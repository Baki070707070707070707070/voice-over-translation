// ==UserScript==
// @name           [VOT] - Voice Over Translation
// @name:de        [VOT] - Voice-Over-Video-Übersetzung
// @name:es        [VOT] - Traducción de vídeo en off
// @name:fr        [VOT] - Traduction vidéo voix-off
// @name:it        [VOT] - Traduzione Video fuori campo
// @name:ru        [VOT] - Закадровый перевод видео
// @name:zh        [VOT] - 画外音视频翻译
// @description    A small extension that adds a Yandex Browser video translation to other browsers
// @description:de Eine kleine Erweiterung, die eine Voice-over-Übersetzung von Videos aus dem Yandex-Browser zu anderen Browsern hinzufügt
// @description:es Una pequeña extensión que agrega una traducción de voz en off de un video de Yandex Browser a otros navegadores
// @description:fr Une petite extension qui ajoute la traduction vocale de la vidéo du Navigateur Yandex à d'autres navigateurs
// @description:it Una piccola estensione che aggiunge la traduzione vocale del video dal browser Yandex ad altri browser
// @description:ru Небольшое расширение, которое добавляет закадровый перевод видео из Яндекс Браузера в другие браузеры
// @description:zh 一个小扩展，它增加了视频从Yandex浏览器到其他浏览器的画外音翻译
// @grant          GM_addStyle
// @grant          GM_deleteValue
// @grant          GM_listValues
// @grant          GM_setValue
// @grant          GM_getValue
// @grant          GM_xmlhttpRequest
// @grant          GM_info
// @require        https://cdn.jsdelivr.net/npm/hls.js/dist/hls.light.min.js
// @require        https://gist.githubusercontent.com/ilyhalight/6eb5bb4dffc7ca9e3c57d6933e2452f3/raw/7ab38af2228d0bed13912e503bc8a9ee4b11828d/gm-addstyle-polyfill.js
// @require        https://unpkg.com/node:crypto
// @match          *://*.youtube.com/*
// @match          *://*.youtube-nocookie.com/*
// @match          *://*.youtubekids.com/*
// @match          *://*.twitch.tv/*
// @match          *://*.xvideos.com/*
// @match          *://*.xv-ru.com/*
// @match          *://*.pornhub.com/*
// @match          *://*.vk.com/*
// @match          *://*.vk.ru/*
// @match          *://invidious.snopyta.org/*
// @match          *://invidious.kavin.rocks/*
// @match          *://vid.puffyan.us/*
// @match          *://invidious.namazso.eu/*
// @match          *://inv.riverside.rocks/*
// @match          *://yt.artemislena.eu/*
// @match          *://invidious.flokinet.to/*
// @match          *://invidious.esmailelbob.xyz/*
// @match          *://invidious.nerdvpn.de/*
// @match          *://invidious.slipfox.xyz/*
// @match          *://invidio.xamh.de/*
// @match          *://invidious.dhusch.de/*
// @match          *://*.piped.video/*
// @match          *://piped.tokhmi.xyz/*
// @match          *://piped.moomoo.me/*
// @match          *://piped.syncpundit.io/*
// @match          *://piped.mha.fi/*
// @match          *://watch.whatever.social/*
// @match          *://piped.garudalinux.org/*
// @match          *://efy.piped.pages.dev/*
// @match          *://watch.leptons.xyz/*
// @match          *://piped.lunar.icu/*
// @match          *://yt.dc09.ru/*
// @match          *://piped.mint.lgbt/*
// @match          *://*.il.ax/*
// @match          *://piped.privacy.com.de/*
// @match          *://piped.esmailelbob.xyz/*
// @match          *://piped.projectsegfau.lt/*
// @match          *://piped.in.projectsegfau.lt/*
// @match          *://piped.us.projectsegfau.lt/*
// @match          *://piped.privacydev.net/*
// @match          *://piped.palveluntarjoaja.eu/*
// @match          *://piped.smnz.de/*
// @match          *://piped.adminforge.de/*
// @match          *://piped.qdi.fi/*
// @match          *://piped.hostux.net/*
// @match          *://piped.chauvet.pro/*
// @match          *://piped.jotoma.de/*
// @match          *://piped.pfcd.me/*
// @match          *://piped.frontendfriendly.xyz/*
// @match          *://*.yewtu.be/*
// @match          *://inv.vern.cc/*
// @match          *://*.vimeo.com/*
// @match          *://*.9gag.com/*
// @match          *://*.twitter.com/*
// @match          *://*.facebook.com/*
// @match          *://*.rutube.ru/*
// @match          *://*.bilibili.com/*
// @match          *://my.mail.ru/*
// @match          *://*.bitchute.com/*
// @match          *://*.coursera.org/learn/*
// @match          *://*.udemy.com/course/*
// @match          *://*.tiktok.com/*
// @match          *://proxitok.pabloferreiro.es/*
// @match          *://proxitok.pussthecat.org/*
// @match          *://tok.habedieeh.re/*
// @match          *://proxitok.esmailelbob.xyz/*
// @match          *://proxitok.privacydev.net/*
// @match          *://tok.artemislena.eu/*
// @match          *://tok.adminforge.de/*
// @match          *://tik.hostux.net/*
// @match          *://tt.vern.cc/*
// @match          *://cringe.whatever.social/*
// @match          *://proxitok.lunar.icu/*
// @match          *://proxitok.privacy.com.de/*
// @match          *://rumble.com/*
// @match          *://*.eporner.com/*
// @match          *://peertube.1312.media/*
// @match          *://tube.shanti.cafe/*
// @match          *://bee-tube.fr/*
// @match          *://video.sadmin.io/*
// @match          *://dalek.zone/*
// @match          *://review.peertube.biz/*
// @match          *://peervideo.club/*
// @match          *://tube.la-dina.net/*
// @match          *://peertube.tmp.rcp.tf/*
// @match          *://peertube.su/*
// @match          *://geo.dailymotion.com/*
// @match          *://*.ok.ru/*
// @match          *://trovo.live/*
// @match          *://disk.yandex.ru/i/*
// @match          *://coursehunter.net/*
// @match          *://youtube.googleapis.com/embed/*
// @match          *://*.banned.video/*
// @match          *://*.weverse.io/*
// @match          *://*.newgrounds.com/*
// @match          *://*.egghead.io/*
// @match          *://*.youku.com/*
// @match          *://*.archive.org/*
// @match          *://*.patreon.com/*
// @match          *://*/*.mp4*
// @exclude        file://*/*.mp4*
// @connect        yandex.ru
// @connect        yandex.net
// @connect        raw.githubusercontent.com
// @connect        toil.cc
// @connect        deno.dev
// @connect        onrender.com
// @connect        workers.dev
// @namespace      vot-min
// @version        1.6.0-beta.1
// @icon           https://translate.yandex.ru/icons/favicon.ico
// @author         sodapng, mynovelhost, Toil, SashaXser, MrSoczekXD
// @homepageURL    https://github.com/ilyhalight/voice-over-translation/issues
// @updateURL      https://raw.githubusercontent.com/ilyhalight/voice-over-translation/dev/dist/vot-min.user.js
// @downloadURL    https://raw.githubusercontent.com/ilyhalight/voice-over-translation/dev/dist/vot-min.user.js
// @supportURL     https://github.com/ilyhalight/voice-over-translation/issues
// ==/UserScript==

(()=>{var __webpack_modules__={"./node_modules/bowser/es5.js":function(t){t.exports=function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=90)}({17:function(t,e,o){"use strict";e.__esModule=!0,e.default=void 0;var n=o(18),i=function(){function t(){}return t.getFirstMatch=function(t,e){var o=e.match(t);return o&&o.length>0&&o[1]||""},t.getSecondMatch=function(t,e){var o=e.match(t);return o&&o.length>1&&o[2]||""},t.matchAndReturnConst=function(t,e,o){if(t.test(e))return o},t.getWindowsVersionName=function(t){switch(t){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},t.getMacOSVersionName=function(t){var e=t.split(".").splice(0,2).map((function(t){return parseInt(t,10)||0}));if(e.push(0),10===e[0])switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},t.getAndroidVersionName=function(t){var e=t.split(".").splice(0,2).map((function(t){return parseInt(t,10)||0}));if(e.push(0),!(1===e[0]&&e[1]<5))return 1===e[0]&&e[1]<6?"Cupcake":1===e[0]&&e[1]>=6?"Donut":2===e[0]&&e[1]<2?"Eclair":2===e[0]&&2===e[1]?"Froyo":2===e[0]&&e[1]>2?"Gingerbread":3===e[0]?"Honeycomb":4===e[0]&&e[1]<1?"Ice Cream Sandwich":4===e[0]&&e[1]<4?"Jelly Bean":4===e[0]&&e[1]>=4?"KitKat":5===e[0]?"Lollipop":6===e[0]?"Marshmallow":7===e[0]?"Nougat":8===e[0]?"Oreo":9===e[0]?"Pie":void 0},t.getVersionPrecision=function(t){return t.split(".").length},t.compareVersions=function(e,o,n){void 0===n&&(n=!1);var i=t.getVersionPrecision(e),r=t.getVersionPrecision(o),a=Math.max(i,r),s=0,l=t.map([e,o],(function(e){var o=a-t.getVersionPrecision(e),n=e+new Array(o+1).join(".0");return t.map(n.split("."),(function(t){return new Array(20-t.length).join("0")+t})).reverse()}));for(n&&(s=a-Math.min(i,r)),a-=1;a>=s;){if(l[0][a]>l[1][a])return 1;if(l[0][a]===l[1][a]){if(a===s)return 0;a-=1}else if(l[0][a]<l[1][a])return-1}},t.map=function(t,e){var o,n=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(o=0;o<t.length;o+=1)n.push(e(t[o]));return n},t.find=function(t,e){var o,n;if(Array.prototype.find)return Array.prototype.find.call(t,e);for(o=0,n=t.length;o<n;o+=1){var i=t[o];if(e(i,o))return i}},t.assign=function(t){for(var e,o,n=t,i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[t].concat(r));var s=function(){var t=r[e];"object"==typeof t&&null!==t&&Object.keys(t).forEach((function(e){n[e]=t[e]}))};for(e=0,o=r.length;e<o;e+=1)s();return t},t.getBrowserAlias=function(t){return n.BROWSER_ALIASES_MAP[t]},t.getBrowserTypeByAlias=function(t){return n.BROWSER_MAP[t]||""},t}();e.default=i,t.exports=e.default},18:function(t,e,o){"use strict";e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,o){"use strict";e.__esModule=!0,e.default=void 0;var n,i=(n=o(91))&&n.__esModule?n:{default:n},r=o(18);function a(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(){}var e,o,n;return t.getParser=function(t,e){if(void 0===e&&(e=!1),"string"!=typeof t)throw new Error("UserAgent should be a string");return new i.default(t,e)},t.parse=function(t){return new i.default(t).getResult()},e=t,n=[{key:"BROWSER_MAP",get:function(){return r.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return r.ENGINE_MAP}},{key:"OS_MAP",get:function(){return r.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return r.PLATFORMS_MAP}}],(o=null)&&a(e.prototype,o),n&&a(e,n),t}();e.default=s,t.exports=e.default},91:function(t,e,o){"use strict";e.__esModule=!0,e.default=void 0;var n=l(o(92)),i=l(o(93)),r=l(o(94)),a=l(o(95)),s=l(o(17));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(t,e){if(void 0===e&&(e=!1),null==t||""===t)throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},!0!==e&&this.parse()}var e=t.prototype;return e.getUA=function(){return this._ua},e.test=function(t){return t.test(this._ua)},e.parseBrowser=function(){var t=this;this.parsedResult.browser={};var e=s.default.find(n.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser},e.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},e.getBrowserName=function(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},e.getBrowserVersion=function(){return this.getBrowser().version},e.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},e.parseOS=function(){var t=this;this.parsedResult.os={};var e=s.default.find(i.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os},e.getOSName=function(t){var e=this.getOS().name;return t?String(e).toLowerCase()||"":e||""},e.getOSVersion=function(){return this.getOS().version},e.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},e.getPlatformType=function(t){void 0===t&&(t=!1);var e=this.getPlatform().type;return t?String(e).toLowerCase()||"":e||""},e.parsePlatform=function(){var t=this;this.parsedResult.platform={};var e=s.default.find(r.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform},e.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},e.getEngineName=function(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},e.parseEngine=function(){var t=this;this.parsedResult.engine={};var e=s.default.find(a.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine},e.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},e.getResult=function(){return s.default.assign({},this.parsedResult)},e.satisfies=function(t){var e=this,o={},n=0,i={},r=0;if(Object.keys(t).forEach((function(e){var a=t[e];"string"==typeof a?(i[e]=a,r+=1):"object"==typeof a&&(o[e]=a,n+=1)})),n>0){var a=Object.keys(o),l=s.default.find(a,(function(t){return e.isOS(t)}));if(l){var u=this.satisfies(o[l]);if(void 0!==u)return u}var d=s.default.find(a,(function(t){return e.isPlatform(t)}));if(d){var c=this.satisfies(o[d]);if(void 0!==c)return c}}if(r>0){var h=Object.keys(i),p=s.default.find(h,(function(t){return e.isBrowser(t,!0)}));if(void 0!==p)return this.compareVersion(i[p])}},e.isBrowser=function(t,e){void 0===e&&(e=!1);var o=this.getBrowserName().toLowerCase(),n=t.toLowerCase(),i=s.default.getBrowserTypeByAlias(n);return e&&i&&(n=i.toLowerCase()),n===o},e.compareVersion=function(t){var e=[0],o=t,n=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===t[0]||"<"===t[0]?(o=t.substr(1),"="===t[1]?(n=!0,o=t.substr(2)):e=[],">"===t[0]?e.push(1):e.push(-1)):"="===t[0]?o=t.substr(1):"~"===t[0]&&(n=!0,o=t.substr(1)),e.indexOf(s.default.compareVersions(i,o,n))>-1},e.isOS=function(t){return this.getOSName(!0)===String(t).toLowerCase()},e.isPlatform=function(t){return this.getPlatformType(!0)===String(t).toLowerCase()},e.isEngine=function(t){return this.getEngineName(!0)===String(t).toLowerCase()},e.is=function(t,e){return void 0===e&&(e=!1),this.isBrowser(t,e)||this.isOS(t)||this.isPlatform(t)},e.some=function(t){var e=this;return void 0===t&&(t=[]),t.some((function(t){return e.is(t)}))},t}();e.default=u,t.exports=e.default},92:function(t,e,o){"use strict";e.__esModule=!0,e.default=void 0;var n,i=(n=o(17))&&n.__esModule?n:{default:n},r=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(t){var e={name:"Googlebot"},o=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||i.default.getFirstMatch(r,t);return o&&(e.version=o),e}},{test:[/opera/i],describe:function(t){var e={name:"Opera"},o=i.default.getFirstMatch(r,t)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/opr\/|opios/i],describe:function(t){var e={name:"Opera"},o=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||i.default.getFirstMatch(r,t);return o&&(e.version=o),e}},{test:[/SamsungBrowser/i],describe:function(t){var e={name:"Samsung Internet for Android"},o=i.default.getFirstMatch(r,t)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/Whale/i],describe:function(t){var e={name:"NAVER Whale Browser"},o=i.default.getFirstMatch(r,t)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/MZBrowser/i],describe:function(t){var e={name:"MZ Browser"},o=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(r,t);return o&&(e.version=o),e}},{test:[/focus/i],describe:function(t){var e={name:"Focus"},o=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(r,t);return o&&(e.version=o),e}},{test:[/swing/i],describe:function(t){var e={name:"Swing"},o=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(r,t);return o&&(e.version=o),e}},{test:[/coast/i],describe:function(t){var e={name:"Opera Coast"},o=i.default.getFirstMatch(r,t)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(t){var e={name:"Opera Touch"},o=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(r,t);return o&&(e.version=o),e}},{test:[/yabrowser/i],describe:function(t){var e={name:"Yandex Browser"},o=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(r,t);return o&&(e.version=o),e}},{test:[/ucbrowser/i],describe:function(t){var e={name:"UC Browser"},o=i.default.getFirstMatch(r,t)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/Maxthon|mxios/i],describe:function(t){var e={name:"Maxthon"},o=i.default.getFirstMatch(r,t)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/epiphany/i],describe:function(t){var e={name:"Epiphany"},o=i.default.getFirstMatch(r,t)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/puffin/i],describe:function(t){var e={name:"Puffin"},o=i.default.getFirstMatch(r,t)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/sleipnir/i],describe:function(t){var e={name:"Sleipnir"},o=i.default.getFirstMatch(r,t)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/k-meleon/i],describe:function(t){var e={name:"K-Meleon"},o=i.default.getFirstMatch(r,t)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/micromessenger/i],describe:function(t){var e={name:"WeChat"},o=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(r,t);return o&&(e.version=o),e}},{test:[/qqbrowser/i],describe:function(t){var e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},o=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(r,t);return o&&(e.version=o),e}},{test:[/msie|trident/i],describe:function(t){var e={name:"Internet Explorer"},o=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/\sedg\//i],describe:function(t){var e={name:"Microsoft Edge"},o=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/edg([ea]|ios)/i],describe:function(t){var e={name:"Microsoft Edge"},o=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/vivaldi/i],describe:function(t){var e={name:"Vivaldi"},o=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/seamonkey/i],describe:function(t){var e={name:"SeaMonkey"},o=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/sailfish/i],describe:function(t){var e={name:"Sailfish"},o=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return o&&(e.version=o),e}},{test:[/silk/i],describe:function(t){var e={name:"Amazon Silk"},o=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/phantom/i],describe:function(t){var e={name:"PhantomJS"},o=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/slimerjs/i],describe:function(t){var e={name:"SlimerJS"},o=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var e={name:"BlackBerry"},o=i.default.getFirstMatch(r,t)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var e={name:"WebOS Browser"},o=i.default.getFirstMatch(r,t)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/bada/i],describe:function(t){var e={name:"Bada"},o=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/tizen/i],describe:function(t){var e={name:"Tizen"},o=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(r,t);return o&&(e.version=o),e}},{test:[/qupzilla/i],describe:function(t){var e={name:"QupZilla"},o=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(r,t);return o&&(e.version=o),e}},{test:[/firefox|iceweasel|fxios/i],describe:function(t){var e={name:"Firefox"},o=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/electron/i],describe:function(t){var e={name:"Electron"},o=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/MiuiBrowser/i],describe:function(t){var e={name:"Miui"},o=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/chromium/i],describe:function(t){var e={name:"Chromium"},o=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(r,t);return o&&(e.version=o),e}},{test:[/chrome|crios|crmo/i],describe:function(t){var e={name:"Chrome"},o=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/GSA/i],describe:function(t){var e={name:"Google Search"},o=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:function(t){var e=!t.test(/like android/i),o=t.test(/android/i);return e&&o},describe:function(t){var e={name:"Android Browser"},o=i.default.getFirstMatch(r,t);return o&&(e.version=o),e}},{test:[/playstation 4/i],describe:function(t){var e={name:"PlayStation 4"},o=i.default.getFirstMatch(r,t);return o&&(e.version=o),e}},{test:[/safari|applewebkit/i],describe:function(t){var e={name:"Safari"},o=i.default.getFirstMatch(r,t);return o&&(e.version=o),e}},{test:[/.*/i],describe:function(t){var e=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(e,t),version:i.default.getSecondMatch(e,t)}}}];e.default=a,t.exports=e.default},93:function(t,e,o){"use strict";e.__esModule=!0,e.default=void 0;var n,i=(n=o(17))&&n.__esModule?n:{default:n},r=o(18),a=[{test:[/Roku\/DVP/],describe:function(t){var e=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:r.OS_MAP.Roku,version:e}}},{test:[/windows phone/i],describe:function(t){var e=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:r.OS_MAP.WindowsPhone,version:e}}},{test:[/windows /i],describe:function(t){var e=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),o=i.default.getWindowsVersionName(e);return{name:r.OS_MAP.Windows,version:e,versionName:o}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(t){var e={name:r.OS_MAP.iOS},o=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return o&&(e.version=o),e}},{test:[/macintosh/i],describe:function(t){var e=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),o=i.default.getMacOSVersionName(e),n={name:r.OS_MAP.MacOS,version:e};return o&&(n.versionName=o),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(t){var e=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:r.OS_MAP.iOS,version:e}}},{test:function(t){var e=!t.test(/like android/i),o=t.test(/android/i);return e&&o},describe:function(t){var e=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),o=i.default.getAndroidVersionName(e),n={name:r.OS_MAP.Android,version:e};return o&&(n.versionName=o),n}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var e=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),o={name:r.OS_MAP.WebOS};return e&&e.length&&(o.version=e),o}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var e=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||i.default.getFirstMatch(/\bbb(\d+)/i,t);return{name:r.OS_MAP.BlackBerry,version:e}}},{test:[/bada/i],describe:function(t){var e=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:r.OS_MAP.Bada,version:e}}},{test:[/tizen/i],describe:function(t){var e=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:r.OS_MAP.Tizen,version:e}}},{test:[/linux/i],describe:function(){return{name:r.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:r.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(t){var e=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:r.OS_MAP.PlayStation4,version:e}}}];e.default=a,t.exports=e.default},94:function(t,e,o){"use strict";e.__esModule=!0,e.default=void 0;var n,i=(n=o(17))&&n.__esModule?n:{default:n},r=o(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(t){var e=i.default.getFirstMatch(/(can-l01)/i,t)&&"Nova",o={type:r.PLATFORMS_MAP.mobile,vendor:"Huawei"};return e&&(o.model=e),o}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:r.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:r.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:r.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:r.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:r.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:r.PLATFORMS_MAP.tablet}}},{test:function(t){var e=t.test(/ipod|iphone/i),o=t.test(/like (ipod|iphone)/i);return e&&!o},describe:function(t){var e=i.default.getFirstMatch(/(ipod|iphone)/i,t);return{type:r.PLATFORMS_MAP.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:r.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:r.PLATFORMS_MAP.mobile}}},{test:function(t){return"blackberry"===t.getBrowserName(!0)},describe:function(){return{type:r.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(t){return"bada"===t.getBrowserName(!0)},describe:function(){return{type:r.PLATFORMS_MAP.mobile}}},{test:function(t){return"windows phone"===t.getBrowserName()},describe:function(){return{type:r.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(t){var e=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&e>=3},describe:function(){return{type:r.PLATFORMS_MAP.tablet}}},{test:function(t){return"android"===t.getOSName(!0)},describe:function(){return{type:r.PLATFORMS_MAP.mobile}}},{test:function(t){return"macos"===t.getOSName(!0)},describe:function(){return{type:r.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(t){return"windows"===t.getOSName(!0)},describe:function(){return{type:r.PLATFORMS_MAP.desktop}}},{test:function(t){return"linux"===t.getOSName(!0)},describe:function(){return{type:r.PLATFORMS_MAP.desktop}}},{test:function(t){return"playstation 4"===t.getOSName(!0)},describe:function(){return{type:r.PLATFORMS_MAP.tv}}},{test:function(t){return"roku"===t.getOSName(!0)},describe:function(){return{type:r.PLATFORMS_MAP.tv}}}];e.default=a,t.exports=e.default},95:function(t,e,o){"use strict";e.__esModule=!0,e.default=void 0;var n,i=(n=o(17))&&n.__esModule?n:{default:n},r=o(18),a=[{test:function(t){return"microsoft edge"===t.getBrowserName(!0)},describe:function(t){if(/\sedg\//i.test(t))return{name:r.ENGINE_MAP.Blink};var e=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:r.ENGINE_MAP.EdgeHTML,version:e}}},{test:[/trident/i],describe:function(t){var e={name:r.ENGINE_MAP.Trident},o=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:function(t){return t.test(/presto/i)},describe:function(t){var e={name:r.ENGINE_MAP.Presto},o=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:function(t){var e=t.test(/gecko/i),o=t.test(/like gecko/i);return e&&!o},describe:function(t){var e={name:r.ENGINE_MAP.Gecko},o=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:r.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(t){var e={name:r.ENGINE_MAP.WebKit},o=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return o&&(e.version=o),e}}];e.default=a,t.exports=e.default}})},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/main.scss":(t,e,o)=>{"use strict";o.d(e,{A:()=>s});var n=o("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),i=o.n(n),r=o("./node_modules/css-loader/dist/runtime/api.js"),a=o.n(r)()(i());a.push([t.id,'.vot-button{--vot-helper-theme: var( --vot-theme-rgb, var(--vot-primary-rgb, 33, 150, 243) );--vot-helper-ontheme: var( --vot-ontheme-rgb, var(--vot-onprimary-rgb, 255, 255, 255) );position:relative;display:inline-block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border:none;border-radius:4px;padding:0 16px;min-width:64px;height:36px;vertical-align:middle;text-align:center;text-overflow:ellipsis;color:rgb(var(--vot-helper-ontheme));background-color:rgb(var(--vot-helper-theme));box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);font-family:var(--vot-font-family, "Roboto", "Segoe UI", BlinkMacSystemFont, system-ui, -apple-system);font-size:14px;font-weight:500;line-height:36px;outline:none;cursor:pointer;transition:box-shadow .2s}.vot-button[hidden]{display:none !important}.vot-button::-moz-focus-inner{border:none}.vot-button::before,.vot-button::after{content:"";position:absolute;border-radius:inherit;top:0;right:0;bottom:0;left:0;opacity:0}.vot-button::before{background-color:rgb(var(--vot-helper-ontheme));transition:opacity .2s}.vot-button::after{background:radial-gradient(circle at center, currentColor 1%, transparent 1%) center/10000% 10000% no-repeat;transition:opacity 1s,background-size .5s}.vot-button:hover{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.vot-button:hover::before{opacity:.08}.vot-button:active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.vot-button:active::after{opacity:.32;background-size:100% 100%;transition:background-size 0s}.vot-button:disabled{background-color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.12);color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.38);box-shadow:none;cursor:initial}.vot-button:disabled::before,.vot-button:disabled::after{opacity:0}.vot-outlined-button{--vot-helper-theme: var( --vot-theme-rgb, var(--vot-primary-rgb, 33, 150, 243) );position:relative;display:inline-block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;border:solid 1px;border-color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.24);border-radius:4px;padding:0 16px;min-width:64px;height:36px;vertical-align:middle;text-align:center;text-overflow:ellipsis;color:rgb(var(--vot-helper-theme));background-color:rgba(0,0,0,0);font-family:var(--vot-font-family, "Roboto", "Segoe UI", BlinkMacSystemFont, system-ui, -apple-system);font-size:14px;font-weight:500;line-height:34px;outline:none;cursor:pointer}.vot-outlined-button[hidden]{display:none !important}.vot-outlined-button::-moz-focus-inner{border:none}.vot-outlined-button::before,.vot-outlined-button::after{content:"";position:absolute;border-radius:3px;top:0;right:0;bottom:0;left:0;opacity:0}.vot-outlined-button::before{background-color:rgb(var(--vot-helper-theme));transition:opacity .2s}.vot-outlined-button::after{background:radial-gradient(circle at center, currentColor 1%, transparent 1%) center/10000% 10000% no-repeat;transition:opacity 1s,background-size .5s}.vot-outlined-button:hover::before{opacity:.04}.vot-outlined-button:active::after{opacity:.16;background-size:100% 100%;transition:background-size 0s}.vot-outlined-button:disabled{background-color:rgba(0,0,0,0);color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.38);cursor:initial}.vot-outlined-button:disabled::before,.vot-outlined-button:disabled::after{opacity:0}.vot-text-button{--vot-helper-theme: var( --vot-theme-rgb, var(--vot-primary-rgb, 33, 150, 243) );position:relative;display:inline-block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;border:none;border-radius:4px;padding:0 8px;min-width:64px;height:36px;vertical-align:middle;text-align:center;text-overflow:ellipsis;color:rgb(var(--vot-helper-theme));background-color:rgba(0,0,0,0);font-family:var(--vot-font-family, "Roboto", "Segoe UI", BlinkMacSystemFont, system-ui, -apple-system);font-size:14px;font-weight:500;line-height:36px;outline:none;cursor:pointer}.vot-text-button[hidden]{display:none !important}.vot-text-button::-moz-focus-inner{border:none}.vot-text-button::before,.vot-text-button::after{content:"";position:absolute;border-radius:inherit;top:0;right:0;bottom:0;left:0;opacity:0}.vot-text-button::before{background-color:rgb(var(--vot-helper-theme));transition:opacity .2s}.vot-text-button::after{background:radial-gradient(circle at center, currentColor 1%, transparent 1%) center/10000% 10000% no-repeat;transition:opacity 1s,background-size .5s}.vot-text-button:hover::before{opacity:.04}.vot-text-button:active::after{opacity:.16;background-size:100% 100%;transition:background-size 0s}.vot-text-button:disabled{background-color:rgba(0,0,0,0);color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.38);cursor:initial}.vot-text-button:disabled::before,.vot-text-button:disabled::after{opacity:0}.vot-icon-button{--vot-helper-onsurface: rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.87);position:relative;display:inline-block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;border:none;border-radius:50%;padding:0;width:36px;height:36px;vertical-align:middle;text-align:center;text-overflow:ellipsis;fill:var(--vot-helper-onsurface);color:var(--vot-helper-onsurface);background-color:rgba(0,0,0,0);font-family:var(--vot-font-family, "Roboto", "Segoe UI", BlinkMacSystemFont, system-ui, -apple-system);font-size:14px;font-weight:500;line-height:36px;outline:none;cursor:pointer}.vot-icon-button[hidden]{display:none !important}.vot-icon-button::-moz-focus-inner{border:none}.vot-icon-button::before,.vot-icon-button::after{content:"";position:absolute;border-radius:inherit;top:0;right:0;bottom:0;left:0;opacity:0}.vot-icon-button::before{background-color:var(--vot-helper-onsurface);transition:opacity .2s}.vot-icon-button::after{background:radial-gradient(circle at center, currentColor 1%, transparent 1%) center/10000% 10000% no-repeat;transition:opacity .3s,background-size .4s}.vot-icon-button:hover::before{opacity:.04}.vot-icon-button:active::after{opacity:.32;background-size:100% 100%;transition:background-size 0s,opacity 0s}.vot-icon-button:disabled{background-color:rgba(0,0,0,0);color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.38);fill:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.38);cursor:initial}.vot-icon-button:disabled::before,.vot-icon-button:disabled::after{opacity:0}.vot-textfield{--vot-helper-theme: rgb( var(--vot-theme-rgb, var(--vot-primary-rgb, 33, 150, 243)) ) !important;--vot-helper-safari1: rgba( var(--vot-onsurface-rgb, 0, 0, 0), 0.38 ) !important;--vot-helper-safari2: rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.6) !important;--vot-helper-safari3: rgba( var(--vot-onsurface-rgb, 0, 0, 0), 0.87 ) !important;position:relative !important;display:inline-block;padding-top:6px !important;font-family:var(--vot-font-family, "Roboto", "Segoe UI", BlinkMacSystemFont, system-ui, -apple-system) !important;font-size:16px !important;line-height:1.5 !important;text-align:start !important}.vot-textfield[hidden]{display:none !important}.vot-textfield>input,.vot-textfield>textarea{-webkit-box-sizing:border-box !important;-moz-box-sizing:border-box !important;box-sizing:border-box !important;margin:0 !important;border-style:solid !important;border-width:1px !important;border-color:rgba(0,0,0,0) var(--vot-helper-safari2) var(--vot-helper-safari2) !important;border-radius:4px !important;padding:15px 13px 15px !important;width:100% !important;height:inherit !important;color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.87) !important;-webkit-text-fill-color:currentColor !important;background-color:rgba(0,0,0,0) !important;box-shadow:inset 1px 0 rgba(0,0,0,0),inset -1px 0 rgba(0,0,0,0),inset 0 -1px rgba(0,0,0,0) !important;font-family:inherit !important;font-size:inherit !important;line-height:inherit !important;caret-color:var(--vot-helper-theme) !important;transition:border .2s,box-shadow .2s !important}.vot-textfield>input:not(:focus):placeholder-shown,.vot-textfield>textarea:not(:focus):placeholder-shown{border-top-color:var(--vot-helper-safari2) !important}.vot-textfield>input+span,.vot-textfield>textarea+span{position:absolute !important;top:0 !important;left:0 !important;display:flex !important;width:100% !important;max-height:100% !important;color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.6) !important;font-size:75% !important;line-height:15px !important;cursor:text !important;transition:color .2s,font-size .2s,line-height .2s !important;pointer-events:none !important}.vot-textfield>input:not(:focus):placeholder-shown+span,.vot-textfield>textarea:not(:focus):placeholder-shown+span{font-size:inherit !important;line-height:68px !important}.vot-textfield>input+span::before,.vot-textfield>input+span::after,.vot-textfield>textarea+span::before,.vot-textfield>textarea+span::after{content:"" !important;display:block !important;-webkit-box-sizing:border-box !important;-moz-box-sizing:border-box !important;box-sizing:border-box !important;margin-top:6px !important;border-top:solid 1px var(--vot-helper-safari2) !important;min-width:10px !important;height:8px !important;pointer-events:none !important;box-shadow:inset 0 1px rgba(0,0,0,0) !important;transition:border .2s,box-shadow .2s !important}.vot-textfield>input+span::before,.vot-textfield>textarea+span::before{margin-right:4px !important;border-left:solid 1px rgba(0,0,0,0) !important;border-radius:4px 0 !important}.vot-textfield>input+span::after,.vot-textfield>textarea+span::after{flex-grow:1 !important;margin-left:4px !important;border-right:solid 1px rgba(0,0,0,0) !important;border-radius:0 4px !important}.vot-textfield>input:not(:focus):placeholder-shown+span::before,.vot-textfield>input:not(:focus):placeholder-shown+span::after,.vot-textfield>textarea:not(:focus):placeholder-shown+span::before,.vot-textfield>textarea:not(:focus):placeholder-shown+span::after{border-top-color:rgba(0,0,0,0) !important}.vot-textfield:hover>input,.vot-textfield:hover>textarea{border-color:rgba(0,0,0,0) var(--vot-helper-safari3) var(--vot-helper-safari3) !important}.vot-textfield:hover>input+span::before,.vot-textfield:hover>input+span::after,.vot-textfield:hover>textarea+span::before,.vot-textfield:hover>textarea+span::after{border-top-color:var(--vot-helper-safari3) !important}.vot-textfield:hover>input:not(:focus):placeholder-shown,.vot-textfield:hover>textarea:not(:focus):placeholder-shown{border-color:var(--vot-helper-safari3) !important}.vot-textfield>input:focus,.vot-textfield>textarea:focus{border-color:rgba(0,0,0,0) var(--vot-helper-theme) var(--vot-helper-theme) !important;box-shadow:inset 1px 0 var(--vot-helper-theme),inset -1px 0 var(--vot-helper-theme),inset 0 -1px var(--vot-helper-theme) !important;outline:none !important}.vot-textfield>input:focus+span,.vot-textfield>textarea:focus+span{color:var(--vot-helper-theme) !important}.vot-textfield>input:focus+span::before,.vot-textfield>input:focus+span::after,.vot-textfield>textarea:focus+span::before,.vot-textfield>textarea:focus+span::after{border-top-color:var(--vot-helper-theme) !important;box-shadow:inset 0 1px var(--vot-helper-theme) !important}.vot-textfield>input:disabled,.vot-textfield>input:disabled+span,.vot-textfield>textarea:disabled,.vot-textfield>textarea:disabled+span{border-color:rgba(0,0,0,0) var(--vot-helper-safari1) var(--vot-helper-safari1) !important;color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.38) !important;pointer-events:none !important}.vot-textfield>input:disabled+span::before,.vot-textfield>input:disabled+span::after,.vot-textfield>textarea:disabled+span::before,.vot-textfield>textarea:disabled+span::after{border-top-color:var(--vot-helper-safari1) !important}.vot-textfield>input:disabled:placeholder-shown,.vot-textfield>input:disabled:placeholder-shown+span,.vot-textfield>textarea:disabled:placeholder-shown,.vot-textfield>textarea:disabled:placeholder-shown+span{border-top-color:var(--vot-helper-safari1) !important}.vot-textfield>input:disabled:placeholder-shown+span::before,.vot-textfield>input:disabled:placeholder-shown+span::after,.vot-textfield>textarea:disabled:placeholder-shown+span::before,.vot-textfield>textarea:disabled:placeholder-shown+span::after{border-top-color:rgba(0,0,0,0) !important}@media not all and (min-resolution: 0.001dpcm){@supports(-webkit-appearance: none){.vot-textfield>input,.vot-textfield>input+span,.vot-textfield>textarea,.vot-textfield>textarea+span,.vot-textfield>input+span::before,.vot-textfield>input+span::after,.vot-textfield>textarea+span::before,.vot-textfield>textarea+span::after{transition-duration:.1s !important}}}.vot-checkbox{--vot-helper-theme: var( --vot-theme-rgb, var(--vot-primary-rgb, 33, 150, 243) );--vot-helper-ontheme: var( --vot-ontheme-rgb, var(--vot-onprimary-rgb, 255, 255, 255) );z-index:0;position:relative;display:inline-block;color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.87);font-family:var(--vot-font-family, "Roboto", "Segoe UI", BlinkMacSystemFont, system-ui, -apple-system);font-size:16px;line-height:1.5;text-align:start}.vot-checkbox[hidden]{display:none !important}.vot-checkbox>input{appearance:none;-moz-appearance:none;-webkit-appearance:none;z-index:10000;position:absolute;display:block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:3px 1px;border:solid 2px;background:rgba(0,0,0,0);border-color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.6);border-radius:2px;width:18px;height:18px;outline:none;cursor:pointer;transition:border-color .2s,background-color .2s}.vot-checkbox>input+span{display:inline-block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding-left:30px;width:inherit;cursor:pointer;font-weight:normal}.vot-checkbox>input+span::before{content:"";position:absolute;left:-10px;top:-8px;display:block;border-radius:50%;width:40px;height:40px;background-color:rgb(var(--vot-onsurface-rgb, 0, 0, 0));opacity:0;transform:scale(1);pointer-events:none;transition:opacity .3s,transform .2s}.vot-checkbox>input+span::after{content:"";z-index:10000;display:block;position:absolute;top:3px;left:1px;-webkit-box-sizing:content-box !important;-moz-box-sizing:content-box !important;box-sizing:content-box !important;width:10px;height:5px;border:solid 2px rgba(0,0,0,0);border-right-width:0;border-top-width:0;pointer-events:none;transform:translate(3px, 4px) rotate(-45deg);transition:border-color .2s}.vot-checkbox>input:checked,.vot-checkbox>input:indeterminate{border-color:rgb(var(--vot-helper-theme));background-color:rgb(var(--vot-helper-theme))}.vot-checkbox>input:checked+span::before,.vot-checkbox>input:indeterminate+span::before{background-color:rgb(var(--vot-helper-theme))}.vot-checkbox>input:checked+span::after,.vot-checkbox>input:indeterminate+span::after{border-color:rgb(var(--vot-helper-ontheme, 255, 255, 255))}.vot-checkbox>input:indeterminate+span::after{border-left-width:0;transform:translate(4px, 3px)}.vot-checkbox:hover>input+span::before{opacity:.04}.vot-checkbox:active>input,.vot-checkbox:active:hover>input{border-color:rgb(var(--vot-helper-theme))}.vot-checkbox:active>input:checked{border-color:rgba(0,0,0,0);background-color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.6)}.vot-checkbox:active>input+span::before{opacity:1;transform:scale(0);transition:transform 0s,opacity 0s}.vot-checkbox>input:disabled{border-color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.38);cursor:initial}.vot-checkbox>input:disabled:checked,.vot-checkbox>input:disabled:indeterminate{border-color:rgba(0,0,0,0);background-color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.38)}.vot-checkbox>input:disabled+span{color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.38);cursor:initial}.vot-checkbox>input:disabled+span::before{opacity:0;transform:scale(0)}.vot-slider{--vot-safari-helper1: rgba( var(--vot-primary-rgb, 33, 150, 243), 0.04 ) !important;--vot-safari-helper2: rgba( var(--vot-primary-rgb, 33, 150, 243), 0.12 ) !important;--vot-safari-helper3: rgba( var(--vot-primary-rgb, 33, 150, 243), 0.16 ) !important;--vot-safari-helper4: rgba( var(--vot-primary-rgb, 33, 150, 243), 0.24 ) !important;display:inline-block;width:100% !important;color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.87) !important;font-family:var(--vot-font, "Roboto", "Segoe UI", BlinkMacSystemFont, system-ui, -apple-system) !important;font-size:16px !important;line-height:1.5 !important;text-align:start !important}.vot-slider[hidden]{display:none !important}.vot-slider>input{-webkit-appearance:none !important;appearance:none !important;position:relative !important;top:24px !important;display:block !important;margin:0 0 -36px !important;width:100% !important;height:36px !important;background-color:rgba(0,0,0,0) !important;cursor:pointer !important}.vot-slider>input:last-child{position:static !important;margin:0 !important}.vot-slider>span{display:inline-block !important;margin-bottom:36px !important}.vot-slider>input:disabled{cursor:default !important;opacity:.38 !important}.vot-slider>input:disabled+span{color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.38) !important}.vot-slider>input::-webkit-slider-runnable-track{margin:17px 0 !important;border-radius:1px !important;width:100% !important;height:2px !important;background-color:rgba(var(--vot-primary-rgb, 33, 150, 243), 0.24) !important}.vot-slider>input::-webkit-slider-thumb{margin:0 !important;appearance:none !important;-webkit-appearance:none !important;border:none !important;border-radius:50% !important;height:2px !important;width:2px !important;background-color:rgb(var(--vot-primary-rgb, 33, 150, 243)) !important;transform:scale(6, 6) !important;transition:box-shadow .2s !important}.vot-slider:hover>input::-webkit-slider-thumb{box-shadow:0 0 0 2px var(--vot-safari-helper1) !important}.vot-slider>input:active::-webkit-slider-thumb{box-shadow:0 0 0 2px var(--vot-safari-helper4) !important}.vot-slider>input:disabled::-webkit-slider-runnable-track{background-color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.38) !important}.vot-slider>input:disabled::-webkit-slider-thumb{background-color:rgb(var(--vot-onsurface-rgb, 0, 0, 0)) !important;color:rgb(var(--vot-surface-rgb, 255, 255, 255)) !important;box-shadow:0 0 0 1px rgb(var(--vot-surface-rgb, 255, 255, 255)) !important;transform:scale(4, 4) !important}.vot-slider>input::-moz-range-track{margin:17px 0 !important;border-radius:1px !important;width:100% !important;height:2px !important;background-color:rgba(var(--vot-primary-rgb, 33, 150, 243), 0.24) !important}.vot-slider>input::-moz-range-thumb{appearance:none !important;-moz-appearance:none !important;border:none !important;border-radius:50% !important;height:2px !important;width:2px !important;background-color:rgb(var(--vot-primary-rgb, 33, 150, 243)) !important;transform:scale(6, 6) !important;transition:box-shadow .2s !important}.vot-slider>input::-moz-range-progress{border-radius:1px !important;height:2px !important;background-color:rgb(var(--vot-primary-rgb, 33, 150, 243)) !important}.vot-slider:hover>input:hover::-moz-range-thumb{box-shadow:0 0 0 2px rgba(var(--vot-primary-rgb, 33, 150, 243), 0.04) !important}.vot-slider>input:active::-moz-range-thumb{box-shadow:0 0 0 2px rgba(var(--vot-primary-rgb, 33, 150, 243), 0.24) !important}.vot-slider>input:disabled::-moz-range-track{background-color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.38) !important}.vot-slider>input:disabled::-moz-range-progress{background-color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.87) !important}.vot-slider>input:disabled::-moz-range-thumb{background-color:rgb(var(--vot-onsurface-rgb, 0, 0, 0)) !important;box-shadow:0 0 0 1px rgb(var(--vot-surface-rgb, 255, 255, 255)) !important;transform:scale(4, 4) !important}.vot-slider>input::-moz-focus-outer{border:none !important}.vot-slider>input:focus{outline:none !important}.vot-slider>input::-ms-track{-webkit-box-sizing:border-box !important;-moz-box-sizing:border-box !important;box-sizing:border-box !important;margin:17px 0 !important;border:none !important;border-radius:1px !important;padding:0 17px !important;width:100% !important;height:2px !important;background-color:rgba(0,0,0,0) !important}.vot-slider>input::-ms-fill-lower{border-radius:1px !important;height:2px !important;background-color:rgb(var(--vot-primary-rgb, 33, 150, 243)) !important}.vot-slider>input::-ms-fill-upper{border-radius:1px !important;height:2px !important;background-color:rgba(var(--vot-primary-rgb, 33, 150, 243), 0.24) !important}.vot-slider>input::-ms-thumb{appearance:none !important;margin:0 17px !important;border:none !important;border-radius:50% !important;height:2px !important;width:2px !important;background-color:rgb(var(--vot-primary-rgb, 33, 150, 243)) !important;transform:scale(6, 6) !important;transition:box-shadow .2s !important}.vot-slider:hover>input::-ms-thumb{box-shadow:0 0 0 2px rgba(var(--vot-primary-rgb, 33, 150, 243), 0.04) !important}.vot-slider>input:active::-ms-thumb{box-shadow:0 0 0 2px rgba(var(--vot-primary-rgb, 33, 150, 243), 0.24) !important}.vot-slider>input:disabled::-ms-fill-lower{background-color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.38) !important}.vot-slider>input:disabled::-ms-fill-upper{background-color:rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.38) !important;opacity:.38 !important}.vot-slider>input:disabled::-ms-thumb{background-color:rgb(var(--vot-onsurface-rgb, 0, 0, 0)) !important;box-shadow:0 0 0 1px rgb(var(--vot-surface-rgb, 255, 255, 255)) !important;transform:scale(4, 4) !important}.vot-slider>input::before{content:"" !important;display:block !important;position:absolute !important;width:calc(100%*var(--vot-progress, 0)) !important;height:2px !important;top:calc(50% - 1px) !important;background:rgb(var(--vot-primary-rgb, 33, 150, 243)) !important}.vot-select{--vot-helper-theme-rgb: var(--vot-onsurface-rgb, 0, 0, 0) !important;--vot-helper-theme: rgba(var(--vot-helper-theme-rgb), 0.87) !important;--vot-helper-safari1: rgba(var(--vot-onsurface-rgb, 0, 0, 0), 0.6) !important;--vot-helper-safari2: rgba( var(--vot-onsurface-rgb, 0, 0, 0), 0.87 ) !important;display:flex;align-items:center;justify-content:space-between;font-family:var(--vot-font-family, "Roboto", "Segoe UI", BlinkMacSystemFont, system-ui, -apple-system);font-size:14px;font-weight:normal;line-height:1.5;text-align:start;color:var(--vot-helper-theme);fill:var(--vot-helper-theme)}.vot-select[hidden]{display:none !important}.vot-select-label{font-size:16px}.vot-select-outer{display:flex;align-items:center;justify-content:space-between;max-width:120px;width:120px;padding:0 5px;border-style:solid !important;border-width:1px !important;border-color:var(--vot-helper-safari1) !important;border-radius:4px !important;cursor:pointer;transition:border .2s !important}.vot-select-outer:hover{border-color:var(--vot-helper-safari2) !important}.vot-select-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.vot-select-arrow-icon{width:20px;height:32px;display:flex;justify-content:center;align-items:center}.vot-select-content-list{display:flex;flex-direction:column}.vot-select-content-list .vot-select-content-item{padding:5px 10px;border-radius:8px;cursor:pointer}.vot-select-content-list .vot-select-content-item:not([inert]):hover{background-color:#2a2c31}.vot-select-content-list .vot-select-content-item[data-vot-selected=true]{color:rgb(var(--vot-primary-rgb, 33, 150, 243));background-color:rgba(var(--vot-primary-rgb, 33, 150, 243), 0.2)}.vot-select-content-list .vot-select-content-item[data-vot-selected=true]:hover{background-color:rgba(var(--vot-primary-rgb, 33, 150, 243), 0.1) !important}.vot-select-content-list .vot-select-content-item[data-vot-disabled=true]{cursor:default}.vot-select-content-list .vot-select-content-item[hidden]{display:none !important}.vot-header{color:rgba(var(--vot-helper-onsurface-rgb), 0.87);font-family:var(--vot-font-family, "Roboto", "Segoe UI", BlinkMacSystemFont, system-ui, -apple-system);font-weight:bold;line-height:1.5;text-align:start}.vot-header[hidden]{display:none !important}.vot-header:not(:first-child){padding-top:8px}.vot-header-level-1{font-size:2em}.vot-header-level-2{font-size:1.5em}.vot-header-level-3{font-size:1.17em}.vot-header-level-4{font-size:1em}.vot-header-level-5{font-size:.83em}.vot-header-level-6{font-size:.67em}.vot-info{display:flex;color:rgba(var(--vot-helper-onsurface-rgb), 0.87);font-family:var(--vot-font-family, "Roboto", "Segoe UI", BlinkMacSystemFont, system-ui, -apple-system);font-size:16px;line-height:1.5;text-align:start}.vot-info[hidden]{display:none !important}.vot-info>:not(:first-child){color:rgba(var(--vot-helper-onsurface-rgb), 0.5);flex:1;margin-left:8px}.vot-lang-select{--vot-helper-theme-rgb: var(--vot-onsurface-rgb, 0, 0, 0);--vot-helper-theme: rgba(var(--vot-helper-theme-rgb), 0.87);display:flex;align-items:center;justify-content:space-between;color:var(--vot-helper-theme);fill:var(--vot-helper-theme)}.vot-lang-select[hidden]{display:none !important}.vot-lang-select-icon{width:32px;height:32px;display:flex;justify-content:center;align-items:center}.vot-segmented-button{--vot-helper-theme-rgb: var(--vot-onsurface-rgb, 0, 0, 0);--vot-helper-theme: rgba(var(--vot-helper-theme-rgb), 0.87);overflow:hidden;position:absolute;left:50%;top:5rem;transform:translate(-50%);user-select:none;display:flex;align-items:center;height:32px;max-width:100vw;background:rgb(var(--vot-surface-rgb, 255, 255, 255));color:var(--vot-helper-theme);fill:var(--vot-helper-theme);border-radius:4px;font-family:var(--vot-font-family, "Roboto", "Segoe UI", BlinkMacSystemFont, system-ui, -apple-system);font-size:16px;line-height:1.5;cursor:default;transition:opacity .5s;z-index:10000}.vot-segmented-button[hidden]{display:none !important}.vot-segmented-button *{-webkit-box-sizing:border-box !important;-moz-box-sizing:border-box !important;box-sizing:border-box !important}.vot-segmented-button .vot-separator{width:1px;height:50%;background:rgba(var(--vot-helper-theme-rgb), 0.1)}.vot-segmented-button .vot-separator[hidden]{display:none !important}.vot-segmented-button .vot-segment,.vot-segmented-button .vot-segment-only-icon{position:relative;overflow:hidden;display:flex;justify-content:center;align-items:center;height:100%;padding:0 8px;background-color:rgba(0,0,0,0);color:inherit;transition:background-color 100ms ease-in-out;border:none}.vot-segmented-button .vot-segment[hidden],.vot-segmented-button [hidden].vot-segment-only-icon{display:none !important}.vot-segmented-button .vot-segment::before,.vot-segmented-button .vot-segment-only-icon::before,.vot-segmented-button .vot-segment::after,.vot-segmented-button .vot-segment-only-icon::after{content:"";position:absolute;border-radius:inherit;top:0;right:0;bottom:0;left:0;opacity:0}.vot-segmented-button .vot-segment::before,.vot-segmented-button .vot-segment-only-icon::before{background-color:rgb(var(--vot-helper-theme-rgb));transition:opacity .2s}.vot-segmented-button .vot-segment::after,.vot-segmented-button .vot-segment-only-icon::after{background:radial-gradient(circle at center, currentColor 1%, transparent 1%) center/10000% 10000% no-repeat;transition:opacity 1s,background-size .5s}.vot-segmented-button .vot-segment:hover::before,.vot-segmented-button .vot-segment-only-icon:hover::before{opacity:.04}.vot-segmented-button .vot-segment:active::after,.vot-segmented-button .vot-segment-only-icon:active::after{opacity:.16;background-size:100% 100%;transition:background-size 0s}.vot-segmented-button .vot-segment-only-icon{min-width:32px;padding:0}.vot-segmented-button .vot-segment-label{margin-left:8px;white-space:nowrap}.vot-segmented-button[data-status=success] .vot-translate-button{color:rgb(var(--vot-primary-rgb, 33, 150, 243));fill:rgb(var(--vot-primary-rgb, 33, 150, 243))}.vot-segmented-button[data-status=error] .vot-translate-button{color:#f28b82;fill:#f28b82}.vot-segmented-button[data-translating=true] #vot-translating-icon{display:block !important}.vot-segmented-button[data-translating=true] #vot-translate-icon{display:none !important}.vot-segmented-button[data-direction=column]{flex-direction:column;height:fit-content}.vot-segmented-button[data-direction=column] .vot-segment-label{display:none}.vot-segmented-button[data-direction=column]>.vot-segment-only-icon,.vot-segmented-button[data-direction=column]>.vot-segment{padding:8px}.vot-segmented-button[data-direction=column] .vot-separator{height:1px;width:50%}.vot-segmented-button[data-position=left]{left:50px;top:12.5vh}.vot-segmented-button[data-position=right]{left:auto;right:0;top:12.5vh}.vot-segmented-button svg{width:fit-content}.vot-menu{--vot-helper-surface-rgb: var(--vot-surface-rgb, 255, 255, 255);--vot-helper-surface: rgb(var(--vot-helper-surface-rgb));--vot-helper-onsurface-rgb: var(--vot-onsurface-rgb, 0, 0, 0);--vot-helper-onsurface: rgba(var(--vot-helper-onsurface-rgb), 0.87);overflow:hidden;position:absolute;left:50%;top:calc(5rem + 32px + 16px);user-select:none;background-color:var(--vot-helper-surface);color:var(--vot-helper-onsurface);border-radius:8px;font-family:var(--vot-font-family, "Roboto", "Segoe UI", BlinkMacSystemFont, system-ui, -apple-system);font-size:16px;line-height:1.5;min-width:300px;cursor:default;z-index:10000;visibility:visible;opacity:1;transform-origin:top;transform:translate(-50%) scale(1);transition:opacity .3s,transform .1s}.vot-menu *{-webkit-box-sizing:border-box !important;-moz-box-sizing:border-box !important;box-sizing:border-box !important}.vot-menu[hidden]{pointer-events:none;display:block !important;visibility:hidden;opacity:0;transform:translate(-50%) scale(0)}.vot-menu-content-wrapper{display:flex;flex-direction:column;min-height:100px;max-height:calc(var(--vot-container-height, 75vh) - (5rem + 32px + 16px)*2);overflow:auto}.vot-menu-header-container{flex-shrink:0;align-items:flex-start;display:flex;min-height:31px}.vot-menu-header-container:empty{padding:0 0 16px 0}.vot-menu-header-container>.vot-icon-button{margin-inline-end:4px;margin-top:4px}.vot-menu-title-container{display:flex;flex:1;font-size:inherit;font-weight:inherit;margin:0;outline:0;text-align:start}.vot-menu-title{flex:1;font-size:16px;line-height:1;padding-bottom:16px;padding-inline-end:16px;padding-inline-start:16px;padding-top:16px}.vot-menu-body-container{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:flex;flex-direction:column;min-height:1.375rem;overflow:auto;padding:0 16px;gap:8px;overscroll-behavior:contain;scrollbar-color:rgba(var(--vot-helper-onsurface-rgb), 0.1) var(--vot-helper-surface) !important}.vot-menu-body-container::-webkit-scrollbar,.vot-menu-body-container::-webkit-scrollbar-track{height:12px !important;width:12px !important;background:var(--vot-helper-surface) !important}.vot-menu-body-container::-webkit-scrollbar-thumb{background:rgba(var(--vot-helper-onsurface-rgb), 0.1) !important;-webkit-border-radius:1ex !important;border:5px solid var(--vot-helper-surface) !important}.vot-menu-body-container::-webkit-scrollbar-thumb:hover{border:3px solid var(--vot-helper-surface) !important}.vot-menu-body-container::-webkit-scrollbar-corner{background:var(--vot-helper-surface) !important}.vot-menu-footer-container{flex-shrink:0;display:flex;justify-content:flex-end;padding-bottom:16px;padding-inline-end:16px;padding-inline-start:16px;padding-top:16px}.vot-menu-footer-container:empty{padding:16px 0 0 0}.vot-menu[data-position=left]{left:240px;top:12.5vh}.vot-menu[data-position=right]{right:-80px;left:auto;top:12.5vh}.vot-dialog-container{visibility:visible;position:absolute;z-index:10000}.vot-dialog-container[hidden]{display:block !important;pointer-events:none;visibility:hidden}.vot-dialog-container *{-webkit-box-sizing:border-box !important;-moz-box-sizing:border-box !important;box-sizing:border-box !important}.vot-dialog-backdrop{background-color:rgba(0,0,0,.6);position:fixed;top:0;right:0;bottom:0;left:0;opacity:1;transition:opacity .3s}[hidden]>.vot-dialog-backdrop{pointer-events:none;opacity:0}.vot-dialog{--vot-helper-surface-rgb: var(--vot-surface-rgb, 255, 255, 255);--vot-helper-surface: rgb(var(--vot-helper-surface-rgb));--vot-helper-onsurface-rgb: var(--vot-onsurface-rgb, 0, 0, 0);--vot-helper-onsurface: rgba(var(--vot-helper-onsurface-rgb), 0.87);display:block;position:fixed;top:50%;bottom:50%;max-width:initial;max-height:initial;width:min(var(--vot-dialog-width, 512px),100%);height:fit-content;inset-inline-start:0px;inset-inline-end:0px;inset-block-start:0px;inset-block-end:0px;border-radius:8px;margin:auto;padding:0;background-color:var(--vot-helper-surface);color:var(--vot-helper-onsurface);box-shadow:0 0 16px rgba(0,0,0,.12),0 16px 16px rgba(0,0,0,.24);font-family:var(--vot-font-family, "Roboto", "Segoe UI", BlinkMacSystemFont, system-ui, -apple-system);font-size:16px;line-height:1.5;user-select:none;visibility:visible;overflow:auto;overflow-y:hidden;opacity:1;transform-origin:center;transform:scale(1);transition:opacity .3s,transform .1s}[hidden]>.vot-dialog{pointer-events:none;opacity:0;transform:scale(0.5);transition:opacity .1s,transform .2s}.vot-dialog-content-wrapper{display:flex;flex-direction:column;max-height:75vh;overflow:auto}.vot-dialog-header-container{flex-shrink:0;align-items:flex-start;display:flex;min-height:31px}.vot-dialog-header-container:empty{padding:0 0 20px 0}.vot-dialog-header-container>.vot-icon-button{margin-inline-end:4px;margin-top:4px}.vot-dialog-title-container{display:flex;flex:1;font-size:inherit;font-weight:inherit;margin:0;outline:0}.vot-dialog-title{flex:1;font-size:115.3846153846%;font-weight:bold;line-height:1;padding-bottom:16px;padding-inline-end:20px;padding-inline-start:20px;padding-top:20px}.vot-dialog-body-container{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:flex;flex-direction:column;min-height:1.375rem;overflow:auto;padding:0 20px;gap:16px;overscroll-behavior:contain;scrollbar-color:rgba(var(--vot-helper-onsurface-rgb), 0.1) var(--vot-helper-surface) !important}.vot-dialog-body-container::-webkit-scrollbar,.vot-dialog-body-container::-webkit-scrollbar-track{height:12px !important;width:12px !important;background:var(--vot-helper-surface) !important}.vot-dialog-body-container::-webkit-scrollbar-thumb{background:rgba(var(--vot-helper-onsurface-rgb), 0.1) !important;-webkit-border-radius:1ex !important;border:5px solid var(--vot-helper-surface) !important}.vot-dialog-body-container::-webkit-scrollbar-thumb:hover{border:3px solid var(--vot-helper-surface) !important}.vot-dialog-body-container::-webkit-scrollbar-corner{background:var(--vot-helper-surface) !important}.vot-dialog-footer-container{flex-shrink:0;display:flex;justify-content:flex-end;padding-bottom:16px;padding-inline-end:16px;padding-inline-start:16px;padding-top:16px}.vot-dialog-footer-container:empty{padding:20px 0 0 0}.vot-subtitles-widget{display:flex;justify-content:center;align-items:center;position:absolute;width:50%;max-height:100%;min-height:20%;z-index:10000;left:25%;top:75%;pointer-events:none}.vot-subtitles{position:relative;max-width:100%;max-height:100%;width:max-content;background:var(--vot-subtitles-background, rgba(46, 47, 52, 0.8));color:var(--vot-subtitles-color, rgb(227, 227, 227));border-radius:1rem;pointer-events:all;padding:1rem;font-size:2rem;line-height:normal;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vot-subtitles span{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.vot-subtitles .passed{color:var(--vot-subtitles-passed-color, rgb(33, 150, 243))}:root{--vot-font-family: "Roboto", "Segoe UI", BlinkMacSystemFont, system-ui, -apple-system;--vot-primary-rgb: 139, 180, 245;--vot-onprimary-rgb: 32, 33, 36;--vot-surface-rgb: 32, 33, 36;--vot-onsurface-rgb: 227, 227, 227;--vot-subtitles-background: rgba(var(--vot-surface-rgb, 46, 47, 52), 0.8);--vot-subtitles-color: rgb(var(--vot-onsurface-rgb, 227, 227, 227));--vot-subtitles-passed-color: rgb(var(--vot-primary-rgb, 33, 150, 243))}vot-block{display:block}',""]);const s=a},"./node_modules/css-loader/dist/runtime/api.js":t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var o="",n=void 0!==e[5];return e[4]&&(o+="@supports (".concat(e[4],") {")),e[2]&&(o+="@media ".concat(e[2]," {")),n&&(o+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),o+=t(e),n&&(o+="}"),e[2]&&(o+="}"),e[4]&&(o+="}"),o})).join("")},e.i=function(t,o,n,i,r){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var u=0;u<t.length;u++){var d=[].concat(t[u]);n&&a[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),o&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=o):d[2]=o),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),e.push(d))}},e}},"./node_modules/css-loader/dist/runtime/noSourceMaps.js":t=>{"use strict";t.exports=function(t){return t[1]}},"./node_modules/requestidlecallback-polyfill/index.js":()=>{window.requestIdleCallback=window.requestIdleCallback||function(t){var e=Date.now();return setTimeout((function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})}),1)},window.cancelIdleCallback=window.cancelIdleCallback||function(t){clearTimeout(t)}},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":t=>{"use strict";var e=[];function o(t){for(var o=-1,n=0;n<e.length;n++)if(e[n].identifier===t){o=n;break}return o}function n(t,n){for(var r={},a=[],s=0;s<t.length;s++){var l=t[s],u=n.base?l[0]+n.base:l[0],d=r[u]||0,c="".concat(u," ").concat(d);r[u]=d+1;var h=o(c),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var g=i(p,n);n.byIndex=s,e.splice(s,0,{identifier:c,updater:g,references:1})}a.push(c)}return a}function i(t,e){var o=e.domAPI(e);o.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;o.update(t=e)}else o.remove()}}t.exports=function(t,i){var r=n(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<r.length;a++){var s=o(r[a]);e[s].references--}for(var l=n(t,i),u=0;u<r.length;u++){var d=o(r[u]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}r=l}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":t=>{"use strict";var e={};t.exports=function(t,o){var n=function(t){if(void 0===e[t]){var o=document.querySelector(t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}e[t]=o}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(o)}},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":(t,e,o)=>{"use strict";t.exports=function(t){var e=o.nc;e&&t.setAttribute("nonce",e)}},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(o){!function(t,e,o){var n="";o.supports&&(n+="@supports (".concat(o.supports,") {")),o.media&&(n+="@media ".concat(o.media," {"));var i=void 0!==o.layer;i&&(n+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),n+=o.css,i&&(n+="}"),o.media&&(n+="}"),o.supports&&(n+="}");var r=o.sourceMap;r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,o)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},"./node_modules/webpack-monkey/lib/node/deps/style-loader-insertStyleElement.js":t=>{t.exports=function(){return function(t){return t.styleTagTransform=function(t,e){e?.remove(),GM_addStyle(t)},document.createElement("style")}.apply(null,arguments)}},"../vot.js/node_modules/@protobufjs/aspromise/index.js":t=>{"use strict";t.exports=function(t,e){var o=new Array(arguments.length-1),n=0,i=2,r=!0;for(;i<arguments.length;)o[n++]=arguments[i++];return new Promise((function(i,a){o[n]=function(t){if(r)if(r=!1,t)a(t);else{for(var e=new Array(arguments.length-1),o=0;o<e.length;)e[o++]=arguments[o];i.apply(null,e)}};try{t.apply(e||null,o)}catch(t){r&&(r=!1,a(t))}}))}},"../vot.js/node_modules/@protobufjs/base64/index.js":(t,e)=>{"use strict";var o=e;o.length=function(t){var e=t.length;if(!e)return 0;for(var o=0;--e%4>1&&"="===t.charAt(e);)++o;return Math.ceil(3*t.length)/4-o};for(var n=new Array(64),i=new Array(123),r=0;r<64;)i[n[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;o.encode=function(t,e,o){for(var i,r=null,a=[],s=0,l=0;e<o;){var u=t[e++];switch(l){case 0:a[s++]=n[u>>2],i=(3&u)<<4,l=1;break;case 1:a[s++]=n[i|u>>4],i=(15&u)<<2,l=2;break;case 2:a[s++]=n[i|u>>6],a[s++]=n[63&u],l=0}s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,a)),s=0)}return l&&(a[s++]=n[i],a[s++]=61,1===l&&(a[s++]=61)),r?(s&&r.push(String.fromCharCode.apply(String,a.slice(0,s))),r.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var a="invalid encoding";o.decode=function(t,e,o){for(var n,r=o,s=0,l=0;l<t.length;){var u=t.charCodeAt(l++);if(61===u&&s>1)break;if(void 0===(u=i[u]))throw Error(a);switch(s){case 0:n=u,s=1;break;case 1:e[o++]=n<<2|(48&u)>>4,n=u,s=2;break;case 2:e[o++]=(15&n)<<4|(60&u)>>2,n=u,s=3;break;case 3:e[o++]=(3&n)<<6|u,s=0}}if(1===s)throw Error(a);return o-r},o.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},"../vot.js/node_modules/@protobufjs/eventemitter/index.js":t=>{"use strict";function e(){this._listeners={}}t.exports=e,e.prototype.on=function(t,e,o){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:o||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var o=this._listeners[t],n=0;n<o.length;)o[n].fn===e?o.splice(n,1):++n;return this},e.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var o=[],n=1;n<arguments.length;)o.push(arguments[n++]);for(n=0;n<e.length;)e[n].fn.apply(e[n++].ctx,o)}return this}},"../vot.js/node_modules/@protobufjs/float/index.js":t=>{"use strict";function e(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),o=new Uint8Array(e.buffer),n=128===o[3];function i(t,n,i){e[0]=t,n[i]=o[0],n[i+1]=o[1],n[i+2]=o[2],n[i+3]=o[3]}function r(t,n,i){e[0]=t,n[i]=o[3],n[i+1]=o[2],n[i+2]=o[1],n[i+3]=o[0]}function a(t,n){return o[0]=t[n],o[1]=t[n+1],o[2]=t[n+2],o[3]=t[n+3],e[0]}function s(t,n){return o[3]=t[n],o[2]=t[n+1],o[1]=t[n+2],o[0]=t[n+3],e[0]}t.writeFloatLE=n?i:r,t.writeFloatBE=n?r:i,t.readFloatLE=n?a:s,t.readFloatBE=n?s:a}():function(){function e(t,e,o,n){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,o,n);else if(isNaN(e))t(2143289344,o,n);else if(e>34028234663852886e22)t((i<<31|2139095040)>>>0,o,n);else if(e<11754943508222875e-54)t((i<<31|Math.round(e/1401298464324817e-60))>>>0,o,n);else{var r=Math.floor(Math.log(e)/Math.LN2);t((i<<31|r+127<<23|8388607&Math.round(e*Math.pow(2,-r)*8388608))>>>0,o,n)}}function a(t,e,o){var n=t(e,o),i=2*(n>>31)+1,r=n>>>23&255,a=8388607&n;return 255===r?a?NaN:i*(1/0):0===r?1401298464324817e-60*i*a:i*Math.pow(2,r-150)*(a+8388608)}t.writeFloatLE=e.bind(null,o),t.writeFloatBE=e.bind(null,n),t.readFloatLE=a.bind(null,i),t.readFloatBE=a.bind(null,r)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),o=new Uint8Array(e.buffer),n=128===o[7];function i(t,n,i){e[0]=t,n[i]=o[0],n[i+1]=o[1],n[i+2]=o[2],n[i+3]=o[3],n[i+4]=o[4],n[i+5]=o[5],n[i+6]=o[6],n[i+7]=o[7]}function r(t,n,i){e[0]=t,n[i]=o[7],n[i+1]=o[6],n[i+2]=o[5],n[i+3]=o[4],n[i+4]=o[3],n[i+5]=o[2],n[i+6]=o[1],n[i+7]=o[0]}function a(t,n){return o[0]=t[n],o[1]=t[n+1],o[2]=t[n+2],o[3]=t[n+3],o[4]=t[n+4],o[5]=t[n+5],o[6]=t[n+6],o[7]=t[n+7],e[0]}function s(t,n){return o[7]=t[n],o[6]=t[n+1],o[5]=t[n+2],o[4]=t[n+3],o[3]=t[n+4],o[2]=t[n+5],o[1]=t[n+6],o[0]=t[n+7],e[0]}t.writeDoubleLE=n?i:r,t.writeDoubleBE=n?r:i,t.readDoubleLE=n?a:s,t.readDoubleBE=n?s:a}():function(){function e(t,e,o,n,i,r){var a=n<0?1:0;if(a&&(n=-n),0===n)t(0,i,r+e),t(1/n>0?0:2147483648,i,r+o);else if(isNaN(n))t(0,i,r+e),t(2146959360,i,r+o);else if(n>17976931348623157e292)t(0,i,r+e),t((a<<31|2146435072)>>>0,i,r+o);else{var s;if(n<22250738585072014e-324)t((s=n/5e-324)>>>0,i,r+e),t((a<<31|s/4294967296)>>>0,i,r+o);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),t(4503599627370496*(s=n*Math.pow(2,-l))>>>0,i,r+e),t((a<<31|l+1023<<20|1048576*s&1048575)>>>0,i,r+o)}}}function a(t,e,o,n,i){var r=t(n,i+e),a=t(n,i+o),s=2*(a>>31)+1,l=a>>>20&2047,u=4294967296*(1048575&a)+r;return 2047===l?u?NaN:s*(1/0):0===l?5e-324*s*u:s*Math.pow(2,l-1075)*(u+4503599627370496)}t.writeDoubleLE=e.bind(null,o,0,4),t.writeDoubleBE=e.bind(null,n,4,0),t.readDoubleLE=a.bind(null,i,0,4),t.readDoubleBE=a.bind(null,r,4,0)}(),t}function o(t,e,o){e[o]=255&t,e[o+1]=t>>>8&255,e[o+2]=t>>>16&255,e[o+3]=t>>>24}function n(t,e,o){e[o]=t>>>24,e[o+1]=t>>>16&255,e[o+2]=t>>>8&255,e[o+3]=255&t}function i(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function r(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=e(e)},"../vot.js/node_modules/@protobufjs/inquire/index.js":module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},"../vot.js/node_modules/@protobufjs/pool/index.js":t=>{"use strict";t.exports=function(t,e,o){var n=o||8192,i=n>>>1,r=null,a=n;return function(o){if(o<1||o>i)return t(o);a+o>n&&(r=t(n),a=0);var s=e.call(r,a,a+=o);return 7&a&&(a=1+(7|a)),s}}},"../vot.js/node_modules/@protobufjs/utf8/index.js":(t,e)=>{"use strict";var o=e;o.length=function(t){for(var e=0,o=0,n=0;n<t.length;++n)(o=t.charCodeAt(n))<128?e+=1:o<2048?e+=2:55296==(64512&o)&&56320==(64512&t.charCodeAt(n+1))?(++n,e+=4):e+=3;return e},o.read=function(t,e,o){if(o-e<1)return"";for(var n,i=null,r=[],a=0;e<o;)(n=t[e++])<128?r[a++]=n:n>191&&n<224?r[a++]=(31&n)<<6|63&t[e++]:n>239&&n<365?(n=((7&n)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,r[a++]=55296+(n>>10),r[a++]=56320+(1023&n)):r[a++]=(15&n)<<12|(63&t[e++])<<6|63&t[e++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,r)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,r.slice(0,a))),i.join("")):String.fromCharCode.apply(String,r.slice(0,a))},o.write=function(t,e,o){for(var n,i,r=o,a=0;a<t.length;++a)(n=t.charCodeAt(a))<128?e[o++]=n:n<2048?(e[o++]=n>>6|192,e[o++]=63&n|128):55296==(64512&n)&&56320==(64512&(i=t.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&i),++a,e[o++]=n>>18|240,e[o++]=n>>12&63|128,e[o++]=n>>6&63|128,e[o++]=63&n|128):(e[o++]=n>>12|224,e[o++]=n>>6&63|128,e[o++]=63&n|128);return o-r}},"../vot.js/node_modules/dom-parser/dist/index.js":function(t,e,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o);var i=Object.getOwnPropertyDescriptor(e,o);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,i)}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),i=this&&this.__exportStar||function(t,e){for(var o in t)"default"===o||Object.prototype.hasOwnProperty.call(e,o)||n(e,t,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseFromString=void 0;const r=o("../vot.js/node_modules/dom-parser/dist/lib/Dom.js");e.parseFromString=function(t){return new r.Dom(t)},i(o("../vot.js/node_modules/dom-parser/dist/lib/Dom.js"),e),i(o("../vot.js/node_modules/dom-parser/dist/lib/Node.js"),e)},"../vot.js/node_modules/dom-parser/dist/lib/Dom.js":(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dom=void 0;const n=o("../vot.js/node_modules/dom-parser/dist/lib/Node.js"),i=o("../vot.js/node_modules/dom-parser/dist/lib/NodeAttribute.js"),r=/(<\/?(?:[a-z][a-z0-9]*:)?[a-z][a-z0-9-_.]*?[a-z0-9]*\s*(?:\s+[a-z0-9-_:]+(?:=(?:(?:'[\s\S]*?')|(?:"[\s\S]*?")))?)*\s*\/?>)|([^<]|<(?![a-z/]))*/gi,a=/\s[a-z0-9-_:]+\b(\s*=\s*('|")[\s\S]*?\2)?/gi,s=/(\s[a-z0-9-_:]+\b\s*)(?:=(\s*('|")[\s\S]*?\3))?/gi,l=/^<[a-z]/,u=/\/>$/,d=/^<\//,c=/^[^<]/,h=/<\/?((?:([a-z][a-z0-9]*):)?(?:[a-z](?:[a-z0-9-_.]*[a-z0-9])?))/i,p=/^('|")|('|")$/g,g=/^(?:area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/i;function m(t,e){if(!e)return!1;const o=d.test(e),[,i]=e.match(h)||[];return o&&t.nodeName===i||t.isSelfCloseTag||t.nodeType===n.NodeType.text}function v(t,e){const o=c.test(t),r=l.test(t);return o?function(t,e){var o;const i=new n.Node({nodeType:n.NodeType.text,nodeName:"#text",text:t,parentNode:e});return null===(o=null==e?void 0:e.childNodes)||void 0===o||o.push(i),i}(t,e):r?function(t,e){var o;const[,r,l]=t.match(h)||[],d=u.test(t)||g.test(r),c=function(t){return(t.match(a)||[]).map((t=>{s.lastIndex=0;const e=s.exec(t)||[],[,o="",n=""]=e;return new i.NodeAttribute({name:o.trim(),value:n.trim().replace(p,"")})}))}(t),m=new n.Node({nodeType:n.NodeType.element,nodeName:r,namespace:l,attributes:c,childNodes:[],parentNode:e,selfCloseTag:d});return null===(o=null==e?void 0:e.childNodes)||void 0===o||o.push(m),m}(t,e):null}e.Dom=class{constructor(t){this.rawHTML=t}find(t,e){const o=function(t,e,o=!1){const n=function*(t){const e=function(t){return t.match(r)||[]}(t);let o=null;for(let t=0,n=e.length;t<n;t++){const n=e[t];o=v(n,o)||o,m(o,n)&&(yield o,o=o.parentNode)}for(;o;)yield o,o=o.parentNode}(t),i=[];for(const t of n)if(t&&e(t)&&(i.push(t),o))return i;return i}(this.rawHTML,t,e);return e?o[0]||null:o}getElementsByClassName(t){const e=new RegExp(`^(.*?\\s)?${t}(\\s.*?)?$`);return this.find((t=>Boolean(t.attributes.length&&e.test(t.getAttribute("class")||""))))}getElementsByTagName(t){return this.find((e=>e.nodeName.toUpperCase()===t.toUpperCase()))}getElementById(t){return this.find((e=>e.getAttribute("id")===t),!0)}getElementsByName(t){return this.find((e=>e.getAttribute("name")===t))}getElementsByAttribute(t,e){return this.find((o=>o.getAttribute(t)===e))}}},"../vot.js/node_modules/dom-parser/dist/lib/Node.js":(t,e)=>{"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.Node=e.NodeType=void 0,function(t){t[t.element=1]="element",t[t.text=3]="text"}(o||(e.NodeType=o={}));class n{constructor({nodeType:t,namespace:e,selfCloseTag:n,text:i,nodeName:r,childNodes:a,parentNode:s,attributes:l}){this.namespace=e||null,this.nodeType=t,this.isSelfCloseTag=Boolean(n),this.text=i||null,this.nodeName=t===o.element?r:"#text",this.childNodes=a||[],this.parentNode=s,this.attributes=l||[]}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get innerHTML(){return this.childNodes.reduce(((t,e)=>t+(e.nodeType===o.text?e.text:e.outerHTML)),"")}get outerHTML(){if(this.nodeType===o.text)return this.textContent;const t=this.attributes.map((t=>t.name+(t.value?`="${t.value}"`:""))).join(" ");const e=`<${this.nodeName}${t.length?" ":""}${t}${this.isSelfCloseTag?"/":""}>`;if(this.isSelfCloseTag)return e;return[e,this.childNodes.map((t=>t.outerHTML)).join(""),`</${this.nodeName}>`].join("")}get textContent(){return this.nodeType===o.text?this.text:this.childNodes.map((t=>t.textContent)).join("").replace(/\x20+/g," ")}getAttribute(t){const e=this.attributes.find((e=>e.name===t));return e?e.value:null}getElementsByTagName(t){return i(this,(e=>e.nodeName.toUpperCase()===t.toUpperCase()))}getElementsByClassName(t){const e=new RegExp(`^(.*?\\s)?${t}(\\s.*?)?$`);return i(this,(t=>Boolean(t.attributes.length&&e.test(t.getAttribute("class")||""))))}getElementsByName(t){return i(this,(e=>Boolean(e.attributes.length&&e.getAttribute("name")===t)))}getElementById(t){return r(this,(e=>Boolean(e.attributes.length&&e.getAttribute("id")===t)))}}function i(t,e){return t.nodeType===o.text?[]:t.childNodes.reduce(((t,n)=>n.nodeType!==o.text&&e(n)?[...t,n,...i(n,e)]:[...t,...i(n,e)]),[])}function r(t,e){for(let o=0,n=t.childNodes.length;o<n;o++){const n=t.childNodes[o];if(e(n))return n;const i=r(n,e);if(i)return i}return null}e.Node=n,n.ELEMENT_NODE=o.element,n.TEXT_NODE=o.text},"../vot.js/node_modules/dom-parser/dist/lib/NodeAttribute.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NodeAttribute=void 0;e.NodeAttribute=class{constructor({name:t,value:e}){this.name=t,this.value=e}}},"../vot.js/node_modules/protobufjs/minimal.js":(t,e,o)=>{"use strict";t.exports=o("../vot.js/node_modules/protobufjs/src/index-minimal.js")},"../vot.js/node_modules/protobufjs/src/index-minimal.js":(t,e,o)=>{"use strict";var n=e;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=o("../vot.js/node_modules/protobufjs/src/writer.js"),n.BufferWriter=o("../vot.js/node_modules/protobufjs/src/writer_buffer.js"),n.Reader=o("../vot.js/node_modules/protobufjs/src/reader.js"),n.BufferReader=o("../vot.js/node_modules/protobufjs/src/reader_buffer.js"),n.util=o("../vot.js/node_modules/protobufjs/src/util/minimal.js"),n.rpc=o("../vot.js/node_modules/protobufjs/src/rpc.js"),n.roots=o("../vot.js/node_modules/protobufjs/src/roots.js"),n.configure=i,i()},"../vot.js/node_modules/protobufjs/src/reader.js":(t,e,o)=>{"use strict";t.exports=l;var n,i=o("../vot.js/node_modules/protobufjs/src/util/minimal.js"),r=i.LongBits,a=i.utf8;function s(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function l(t){this.buf=t,this.pos=0,this.len=t.length}var u,d="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new l(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new l(t);throw Error("illegal buffer")},c=function(){return i.Buffer?function(t){return(l.create=function(t){return i.Buffer.isBuffer(t)?new n(t):d(t)})(t)}:d};function h(){var t=new r(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw s(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw s(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function p(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function g(){if(this.pos+8>this.len)throw s(this,8);return new r(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}l.create=c(),l.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,l.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return u}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return p(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|p(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},l.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},l.prototype.bytes=function(){var t=this.uint32(),e=this.pos,o=this.pos+t;if(o>this.len)throw s(this,t);if(this.pos+=t,Array.isArray(this.buf))return this.buf.slice(e,o);if(e===o){var n=i.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,e,o)},l.prototype.string=function(){var t=this.bytes();return a.read(t,0,t.length)},l.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw s(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},l._configure=function(t){n=t,l.create=c(),n._configure();var e=i.Long?"toLong":"toNumber";i.merge(l.prototype,{int64:function(){return h.call(this)[e](!1)},uint64:function(){return h.call(this)[e](!0)},sint64:function(){return h.call(this).zzDecode()[e](!1)},fixed64:function(){return g.call(this)[e](!0)},sfixed64:function(){return g.call(this)[e](!1)}})}},"../vot.js/node_modules/protobufjs/src/reader_buffer.js":(t,e,o)=>{"use strict";t.exports=r;var n=o("../vot.js/node_modules/protobufjs/src/reader.js");(r.prototype=Object.create(n.prototype)).constructor=r;var i=o("../vot.js/node_modules/protobufjs/src/util/minimal.js");function r(t){n.call(this,t)}r._configure=function(){i.Buffer&&(r.prototype._slice=i.Buffer.prototype.slice)},r.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},r._configure()},"../vot.js/node_modules/protobufjs/src/roots.js":t=>{"use strict";t.exports={}},"../vot.js/node_modules/protobufjs/src/rpc.js":(t,e,o)=>{"use strict";e.Service=o("../vot.js/node_modules/protobufjs/src/rpc/service.js")},"../vot.js/node_modules/protobufjs/src/rpc/service.js":(t,e,o)=>{"use strict";t.exports=i;var n=o("../vot.js/node_modules/protobufjs/src/util/minimal.js");function i(t,e,o){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(o)}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function t(e,o,i,r,a){if(!r)throw TypeError("request must be specified");var s=this;if(!a)return n.asPromise(t,s,e,o,i,r);if(s.rpcImpl)try{return s.rpcImpl(e,o[s.requestDelimited?"encodeDelimited":"encode"](r).finish(),(function(t,o){if(t)return s.emit("error",t,e),a(t);if(null!==o){if(!(o instanceof i))try{o=i[s.responseDelimited?"decodeDelimited":"decode"](o)}catch(t){return s.emit("error",t,e),a(t)}return s.emit("data",o,e),a(null,o)}s.end(!0)}))}catch(t){return s.emit("error",t,e),void setTimeout((function(){a(t)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},i.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},"../vot.js/node_modules/protobufjs/src/util/longbits.js":(t,e,o)=>{"use strict";t.exports=i;var n=o("../vot.js/node_modules/protobufjs/src/util/minimal.js");function i(t,e){this.lo=t>>>0,this.hi=e>>>0}var r=i.zero=new i(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var a=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return r;var e=t<0;e&&(t=-t);var o=t>>>0,n=(t-o)/4294967296>>>0;return e&&(n=~n>>>0,o=~o>>>0,++o>4294967295&&(o=0,++n>4294967295&&(n=0))),new i(o,n)},i.from=function(t){if("number"==typeof t)return i.fromNumber(t);if(n.isString(t)){if(!n.Long)return i.fromNumber(parseInt(t,10));t=n.Long.fromString(t)}return t.low||t.high?new i(t.low>>>0,t.high>>>0):r},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,o=~this.hi>>>0;return e||(o=o+1>>>0),-(e+4294967296*o)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(t){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var s=String.prototype.charCodeAt;i.fromHash=function(t){return t===a?r:new i((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,o=this.hi>>>24;return 0===o?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:o<128?9:10}},"../vot.js/node_modules/protobufjs/src/util/minimal.js":function(t,e,o){"use strict";var n=e;function i(t,e,o){for(var n=Object.keys(e),i=0;i<n.length;++i)void 0!==t[n[i]]&&o||(t[n[i]]=e[n[i]]);return t}function r(t){function e(t,o){if(!(this instanceof e))return new e(t,o);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),o&&i(this,o)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}n.asPromise=o("../vot.js/node_modules/@protobufjs/aspromise/index.js"),n.base64=o("../vot.js/node_modules/@protobufjs/base64/index.js"),n.EventEmitter=o("../vot.js/node_modules/@protobufjs/eventemitter/index.js"),n.float=o("../vot.js/node_modules/@protobufjs/float/index.js"),n.inquire=o("../vot.js/node_modules/@protobufjs/inquire/index.js"),n.utf8=o("../vot.js/node_modules/@protobufjs/utf8/index.js"),n.pool=o("../vot.js/node_modules/@protobufjs/pool/index.js"),n.LongBits=o("../vot.js/node_modules/protobufjs/src/util/longbits.js"),n.isNode=Boolean(void 0!==o.g&&o.g&&o.g.process&&o.g.process.versions&&o.g.process.versions.node),n.global=n.isNode&&o.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},n.isString=function(t){return"string"==typeof t||t instanceof String},n.isObject=function(t){return t&&"object"==typeof t},n.isset=n.isSet=function(t,e){var o=t[e];return!(null==o||!t.hasOwnProperty(e))&&("object"!=typeof o||(Array.isArray(o)?o.length:Object.keys(o).length)>0)},n.Buffer=function(){try{var t=n.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(t){return"number"==typeof t?n.Buffer?n._Buffer_allocUnsafe(t):new n.Array(t):n.Buffer?n._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(t){return t?n.LongBits.from(t).toHash():n.LongBits.zeroHash},n.longFromHash=function(t,e){var o=n.LongBits.fromHash(t);return n.Long?n.Long.fromBits(o.lo,o.hi,e):o.toNumber(Boolean(e))},n.merge=i,n.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},n.newError=r,n.ProtocolError=r("ProtocolError"),n.oneOfGetter=function(t){for(var e={},o=0;o<t.length;++o)e[t[o]]=1;return function(){for(var t=Object.keys(this),o=t.length-1;o>-1;--o)if(1===e[t[o]]&&void 0!==this[t[o]]&&null!==this[t[o]])return t[o]}},n.oneOfSetter=function(t){return function(e){for(var o=0;o<t.length;++o)t[o]!==e&&delete this[t[o]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var t=n.Buffer;t?(n._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,o){return new t(e,o)},n._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},"../vot.js/node_modules/protobufjs/src/writer.js":(t,e,o)=>{"use strict";t.exports=c;var n,i=o("../vot.js/node_modules/protobufjs/src/util/minimal.js"),r=i.LongBits,a=i.base64,s=i.utf8;function l(t,e,o){this.fn=t,this.len=e,this.next=void 0,this.val=o}function u(){}function d(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function c(){this.len=0,this.head=new l(u,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(c.create=function(){return new n})()}:function(){return new c}};function p(t,e,o){e[o]=255&t}function g(t,e){this.len=t,this.next=void 0,this.val=e}function m(t,e,o){for(;t.hi;)e[o++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[o++]=127&t.lo|128,t.lo=t.lo>>>7;e[o++]=t.lo}function v(t,e,o){e[o]=255&t,e[o+1]=t>>>8&255,e[o+2]=t>>>16&255,e[o+3]=t>>>24}c.create=h(),c.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(c.alloc=i.pool(c.alloc,i.Array.prototype.subarray)),c.prototype._push=function(t,e,o){return this.tail=this.tail.next=new l(t,e,o),this.len+=e,this},g.prototype=Object.create(l.prototype),g.prototype.fn=function(t,e,o){for(;t>127;)e[o++]=127&t|128,t>>>=7;e[o]=t},c.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new g((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},c.prototype.int32=function(t){return t<0?this._push(m,10,r.fromNumber(t)):this.uint32(t)},c.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},c.prototype.uint64=function(t){var e=r.from(t);return this._push(m,e.length(),e)},c.prototype.int64=c.prototype.uint64,c.prototype.sint64=function(t){var e=r.from(t).zzEncode();return this._push(m,e.length(),e)},c.prototype.bool=function(t){return this._push(p,1,t?1:0)},c.prototype.fixed32=function(t){return this._push(v,4,t>>>0)},c.prototype.sfixed32=c.prototype.fixed32,c.prototype.fixed64=function(t){var e=r.from(t);return this._push(v,4,e.lo)._push(v,4,e.hi)},c.prototype.sfixed64=c.prototype.fixed64,c.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},c.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var f=i.Array.prototype.set?function(t,e,o){e.set(t,o)}:function(t,e,o){for(var n=0;n<t.length;++n)e[o+n]=t[n]};c.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(p,1,0);if(i.isString(t)){var o=c.alloc(e=a.length(t));a.decode(t,o,0),t=o}return this.uint32(e)._push(f,e,t)},c.prototype.string=function(t){var e=s.length(t);return e?this.uint32(e)._push(s.write,e,t):this._push(p,1,0)},c.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new l(u,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(u,0,0),this.len=0),this},c.prototype.ldelim=function(){var t=this.head,e=this.tail,o=this.len;return this.reset().uint32(o),o&&(this.tail.next=t.next,this.tail=e,this.len+=o),this},c.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),o=0;t;)t.fn(t.val,e,o),o+=t.len,t=t.next;return e},c._configure=function(t){n=t,c.create=h(),n._configure()}},"../vot.js/node_modules/protobufjs/src/writer_buffer.js":(t,e,o)=>{"use strict";t.exports=r;var n=o("../vot.js/node_modules/protobufjs/src/writer.js");(r.prototype=Object.create(n.prototype)).constructor=r;var i=o("../vot.js/node_modules/protobufjs/src/util/minimal.js");function r(){n.call(this)}function a(t,e,o){t.length<40?i.utf8.write(t,e,o):e.utf8Write?e.utf8Write(t,o):e.write(t,o)}r._configure=function(){r.alloc=i._Buffer_allocUnsafe,r.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(t,e,o){e.set(t,o)}:function(t,e,o){if(t.copy)t.copy(e,o,0,t.length);else for(var n=0;n<t.length;)e[o++]=t[n++]}},r.prototype.bytes=function(t){i.isString(t)&&(t=i._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(r.writeBytesBuffer,e,t),this},r.prototype.string=function(t){var e=i.Buffer.byteLength(t);return this.uint32(e),e&&this._push(a,e,t),this},r._configure()}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var o=__webpack_module_cache__[t]={id:t,exports:{}};return __webpack_modules__[t].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var o in e)__webpack_require__.o(e,o)&&!__webpack_require__.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";var t=__webpack_require__("./node_modules/bowser/es5.js"),e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function o(t,e,o){this.low=0|t,this.high=0|e,this.unsigned=!!o}function n(t){return!0===(t&&t.__isLong__)}function i(t){var e=Math.clz32(t&-t);return t?31-e:e}o.prototype.__isLong__,Object.defineProperty(o.prototype,"__isLong__",{value:!0}),o.isLong=n;var r={},a={};function s(t,e){var o,n,i;return e?(i=0<=(t>>>=0)&&t<256)&&(n=a[t])?n:(o=u(t,0,!0),i&&(a[t]=o),o):(i=-128<=(t|=0)&&t<128)&&(n=r[t])?n:(o=u(t,t<0?-1:0,!1),i&&(r[t]=o),o)}function l(t,e){if(isNaN(t))return e?b:f;if(e){if(t<0)return b;if(t>=g)return S}else{if(t<=-m)return T;if(t+1>=m)return k}return t<0?l(-t,e).neg():u(t%p|0,t/p|0,e)}function u(t,e,n){return new o(t,e,n)}o.fromInt=s,o.fromNumber=l,o.fromBits=u;var d=Math.pow;function c(t,e,o){if(0===t.length)throw Error("empty string");if("number"==typeof e?(o=e,e=!1):e=!!e,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e?b:f;if((o=o||10)<2||36<o)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return c(t.substring(1),e,o).neg();for(var i=l(d(o,8)),r=f,a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+s),o);if(s<8){var h=l(d(o,s));r=r.mul(h).add(l(u))}else r=(r=r.mul(i)).add(l(u))}return r.unsigned=e,r}function h(t,e){return"number"==typeof t?l(t,e):"string"==typeof t?c(t,e):u(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}o.fromString=c,o.fromValue=h;var p=4294967296,g=p*p,m=g/2,v=s(1<<24),f=s(0);o.ZERO=f;var b=s(0,!0);o.UZERO=b;var w=s(1);o.ONE=w;var y=s(1,!0);o.UONE=y;var x=s(-1);o.NEG_ONE=x;var k=u(-1,2147483647,!1);o.MAX_VALUE=k;var S=u(-1,-1,!0);o.MAX_UNSIGNED_VALUE=S;var T=u(0,-2147483648,!1);o.MIN_VALUE=T;var L=o.prototype;L.toInt=function(){return this.unsigned?this.low>>>0:this.low},L.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},L.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(T)){var e=l(t),o=this.div(e),n=o.mul(e).sub(this);return o.toString(t)+n.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=l(d(t,6),this.unsigned),r=this,a="";;){var s=r.div(i),u=(r.sub(s.mul(i)).toInt()>>>0).toString(t);if((r=s).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},L.getHighBits=function(){return this.high},L.getHighBitsUnsigned=function(){return this.high>>>0},L.getLowBits=function(){return this.low},L.getLowBitsUnsigned=function(){return this.low>>>0},L.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},L.isZero=function(){return 0===this.high&&0===this.low},L.eqz=L.isZero,L.isNegative=function(){return!this.unsigned&&this.high<0},L.isPositive=function(){return this.unsigned||this.high>=0},L.isOdd=function(){return 1==(1&this.low)},L.isEven=function(){return 0==(1&this.low)},L.equals=function(t){return n(t)||(t=h(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},L.eq=L.equals,L.notEquals=function(t){return!this.eq(t)},L.neq=L.notEquals,L.ne=L.notEquals,L.lessThan=function(t){return this.comp(t)<0},L.lt=L.lessThan,L.lessThanOrEqual=function(t){return this.comp(t)<=0},L.lte=L.lessThanOrEqual,L.le=L.lessThanOrEqual,L.greaterThan=function(t){return this.comp(t)>0},L.gt=L.greaterThan,L.greaterThanOrEqual=function(t){return this.comp(t)>=0},L.gte=L.greaterThanOrEqual,L.ge=L.greaterThanOrEqual,L.compare=function(t){if(n(t)||(t=h(t)),this.eq(t))return 0;var e=this.isNegative(),o=t.isNegative();return e&&!o?-1:!e&&o?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},L.comp=L.compare,L.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(w)},L.neg=L.negate,L.add=function(t){n(t)||(t=h(t));var e=this.high>>>16,o=65535&this.high,i=this.low>>>16,r=65535&this.low,a=t.high>>>16,s=65535&t.high,l=t.low>>>16,d=0,c=0,p=0,g=0;return p+=(g+=r+(65535&t.low))>>>16,c+=(p+=i+l)>>>16,d+=(c+=o+s)>>>16,d+=e+a,u((p&=65535)<<16|(g&=65535),(d&=65535)<<16|(c&=65535),this.unsigned)},L.subtract=function(t){return n(t)||(t=h(t)),this.add(t.neg())},L.sub=L.subtract,L.multiply=function(t){if(this.isZero())return this;if(n(t)||(t=h(t)),e)return u(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return this.unsigned?b:f;if(this.eq(T))return t.isOdd()?T:f;if(t.eq(T))return this.isOdd()?T:f;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(v)&&t.lt(v))return l(this.toNumber()*t.toNumber(),this.unsigned);var o=this.high>>>16,i=65535&this.high,r=this.low>>>16,a=65535&this.low,s=t.high>>>16,d=65535&t.high,c=t.low>>>16,p=65535&t.low,g=0,m=0,w=0,y=0;return w+=(y+=a*p)>>>16,m+=(w+=r*p)>>>16,w&=65535,m+=(w+=a*c)>>>16,g+=(m+=i*p)>>>16,m&=65535,g+=(m+=r*c)>>>16,m&=65535,g+=(m+=a*d)>>>16,g+=o*p+i*c+r*d+a*s,u((w&=65535)<<16|(y&=65535),(g&=65535)<<16|(m&=65535),this.unsigned)},L.mul=L.multiply,L.divide=function(t){if(n(t)||(t=h(t)),t.isZero())throw Error("division by zero");var o,i,r;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?u((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:f;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return b;if(t.gt(this.shru(1)))return y;r=b}else{if(this.eq(T))return t.eq(w)||t.eq(x)?T:t.eq(T)?w:(o=this.shr(1).div(t).shl(1)).eq(f)?t.isNegative()?w:x:(i=this.sub(t.mul(o)),r=o.add(i.div(t)));if(t.eq(T))return this.unsigned?b:f;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();r=f}for(i=this;i.gte(t);){o=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(o)/Math.LN2),s=a<=48?1:d(2,a-48),c=l(o),p=c.mul(t);p.isNegative()||p.gt(i);)p=(c=l(o-=s,this.unsigned)).mul(t);c.isZero()&&(c=w),r=r.add(c),i=i.sub(p)}return r},L.div=L.divide,L.modulo=function(t){return n(t)||(t=h(t)),e?u((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},L.mod=L.modulo,L.rem=L.modulo,L.not=function(){return u(~this.low,~this.high,this.unsigned)},L.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},L.clz=L.countLeadingZeros,L.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},L.ctz=L.countTrailingZeros,L.and=function(t){return n(t)||(t=h(t)),u(this.low&t.low,this.high&t.high,this.unsigned)},L.or=function(t){return n(t)||(t=h(t)),u(this.low|t.low,this.high|t.high,this.unsigned)},L.xor=function(t){return n(t)||(t=h(t)),u(this.low^t.low,this.high^t.high,this.unsigned)},L.shiftLeft=function(t){return n(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):u(0,this.low<<t-32,this.unsigned)},L.shl=L.shiftLeft,L.shiftRight=function(t){return n(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):u(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},L.shr=L.shiftRight,L.shiftRightUnsigned=function(t){return n(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):u(32===t?this.high:this.high>>>t-32,0,this.unsigned)},L.shru=L.shiftRightUnsigned,L.shr_u=L.shiftRightUnsigned,L.rotateLeft=function(t){var e;return n(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?u(this.high,this.low,this.unsigned):t<32?(e=32-t,u(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(e=32-(t-=32),u(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},L.rotl=L.rotateLeft,L.rotateRight=function(t){var e;return n(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?u(this.high,this.low,this.unsigned):t<32?(e=32-t,u(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(e=32-(t-=32),u(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},L.rotr=L.rotateRight,L.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},L.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},L.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},L.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},L.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},o.fromBytes=function(t,e,n){return n?o.fromBytesLE(t,e):o.fromBytesBE(t,e)},o.fromBytesLE=function(t,e){return new o(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},o.fromBytesBE=function(t,e){return new o(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};const _=o;var M=__webpack_require__("../vot.js/node_modules/protobufjs/minimal.js");var V;function E(t){switch(t){case 0:case"NO_CONNECTION":return V.NO_CONNECTION;case 10:case"TRANSLATING":return V.TRANSLATING;case 20:case"STREAMING":return V.STREAMING;default:return V.UNRECOGNIZED}}!function(t){t[t.NO_CONNECTION=0]="NO_CONNECTION",t[t.TRANSLATING=10]="TRANSLATING",t[t.STREAMING=20]="STREAMING",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED"}(V||(V={}));const O={encode:(t,e=M.Writer.create())=>(""!==t.target&&e.uint32(10).string(t.target),""!==t.targetUrl&&e.uint32(18).string(t.targetUrl),e),decode(t,e){const o=t instanceof M.Reader?t:M.Reader.create(t);let n=void 0===e?o.len:o.pos+e;const i={target:"",targetUrl:""};for(;o.pos<n;){const t=o.uint32();switch(t>>>3){case 1:if(10!==t)break;i.target=o.string();continue;case 2:if(18!==t)break;i.targetUrl=o.string();continue}if(4==(7&t)||0===t)break;o.skipType(7&t)}return i},fromJSON:t=>({target:z(t.target)?globalThis.String(t.target):"",targetUrl:z(t.targetUrl)?globalThis.String(t.targetUrl):""}),toJSON(t){const e={};return""!==t.target&&(e.target=t.target),""!==t.targetUrl&&(e.targetUrl=t.targetUrl),e},create:t=>O.fromPartial(t??{}),fromPartial(t){const e={target:"",targetUrl:""};return e.target=t.target??"",e.targetUrl=t.targetUrl??"",e}};const C={encode(t,e=M.Writer.create()){""!==t.url&&e.uint32(26).string(t.url),void 0!==t.deviceId&&e.uint32(34).string(t.deviceId),!1!==t.firstRequest&&e.uint32(40).bool(t.firstRequest),0!==t.duration&&e.uint32(49).double(t.duration),0!==t.unknown0&&e.uint32(56).int32(t.unknown0),""!==t.language&&e.uint32(66).string(t.language),!1!==t.forceSourceLang&&e.uint32(72).bool(t.forceSourceLang),0!==t.unknown1&&e.uint32(80).int32(t.unknown1);for(const o of t.translationHelp)O.encode(o,e.uint32(90).fork()).ldelim();return""!==t.responseLanguage&&e.uint32(114).string(t.responseLanguage),0!==t.unknown2&&e.uint32(120).int32(t.unknown2),0!==t.unknown3&&e.uint32(128).int32(t.unknown3),!1!==t.bypassCache&&e.uint32(136).bool(t.bypassCache),e},decode(t,e){const o=t instanceof M.Reader?t:M.Reader.create(t);let n=void 0===e?o.len:o.pos+e;const i={url:"",deviceId:void 0,firstRequest:!1,duration:0,unknown0:0,language:"",forceSourceLang:!1,unknown1:0,translationHelp:[],responseLanguage:"",unknown2:0,unknown3:0,bypassCache:!1};for(;o.pos<n;){const t=o.uint32();switch(t>>>3){case 3:if(26!==t)break;i.url=o.string();continue;case 4:if(34!==t)break;i.deviceId=o.string();continue;case 5:if(40!==t)break;i.firstRequest=o.bool();continue;case 6:if(49!==t)break;i.duration=o.double();continue;case 7:if(56!==t)break;i.unknown0=o.int32();continue;case 8:if(66!==t)break;i.language=o.string();continue;case 9:if(72!==t)break;i.forceSourceLang=o.bool();continue;case 10:if(80!==t)break;i.unknown1=o.int32();continue;case 11:if(90!==t)break;i.translationHelp.push(O.decode(o,o.uint32()));continue;case 14:if(114!==t)break;i.responseLanguage=o.string();continue;case 15:if(120!==t)break;i.unknown2=o.int32();continue;case 16:if(128!==t)break;i.unknown3=o.int32();continue;case 17:if(136!==t)break;i.bypassCache=o.bool();continue}if(4==(7&t)||0===t)break;o.skipType(7&t)}return i},fromJSON:t=>({url:z(t.url)?globalThis.String(t.url):"",deviceId:z(t.deviceId)?globalThis.String(t.deviceId):void 0,firstRequest:!!z(t.firstRequest)&&globalThis.Boolean(t.firstRequest),duration:z(t.duration)?globalThis.Number(t.duration):0,unknown0:z(t.unknown0)?globalThis.Number(t.unknown0):0,language:z(t.language)?globalThis.String(t.language):"",forceSourceLang:!!z(t.forceSourceLang)&&globalThis.Boolean(t.forceSourceLang),unknown1:z(t.unknown1)?globalThis.Number(t.unknown1):0,translationHelp:globalThis.Array.isArray(t?.translationHelp)?t.translationHelp.map((t=>O.fromJSON(t))):[],responseLanguage:z(t.responseLanguage)?globalThis.String(t.responseLanguage):"",unknown2:z(t.unknown2)?globalThis.Number(t.unknown2):0,unknown3:z(t.unknown3)?globalThis.Number(t.unknown3):0,bypassCache:!!z(t.bypassCache)&&globalThis.Boolean(t.bypassCache)}),toJSON(t){const e={};return""!==t.url&&(e.url=t.url),void 0!==t.deviceId&&(e.deviceId=t.deviceId),!1!==t.firstRequest&&(e.firstRequest=t.firstRequest),0!==t.duration&&(e.duration=t.duration),0!==t.unknown0&&(e.unknown0=Math.round(t.unknown0)),""!==t.language&&(e.language=t.language),!1!==t.forceSourceLang&&(e.forceSourceLang=t.forceSourceLang),0!==t.unknown1&&(e.unknown1=Math.round(t.unknown1)),t.translationHelp?.length&&(e.translationHelp=t.translationHelp.map((t=>O.toJSON(t)))),""!==t.responseLanguage&&(e.responseLanguage=t.responseLanguage),0!==t.unknown2&&(e.unknown2=Math.round(t.unknown2)),0!==t.unknown3&&(e.unknown3=Math.round(t.unknown3)),!1!==t.bypassCache&&(e.bypassCache=t.bypassCache),e},create:t=>C.fromPartial(t??{}),fromPartial(t){const e={url:"",deviceId:void 0,firstRequest:!1,duration:0,unknown0:0,language:"",forceSourceLang:!1,unknown1:0,translationHelp:[],responseLanguage:"",unknown2:0,unknown3:0,bypassCache:!1};return e.url=t.url??"",e.deviceId=t.deviceId??void 0,e.firstRequest=t.firstRequest??!1,e.duration=t.duration??0,e.unknown0=t.unknown0??0,e.language=t.language??"",e.forceSourceLang=t.forceSourceLang??!1,e.unknown1=t.unknown1??0,e.translationHelp=t.translationHelp?.map((t=>O.fromPartial(t)))||[],e.responseLanguage=t.responseLanguage??"",e.unknown2=t.unknown2??0,e.unknown3=t.unknown3??0,e.bypassCache=t.bypassCache??!1,e}};const A={encode:(t,e=M.Writer.create())=>(void 0!==t.url&&e.uint32(10).string(t.url),void 0!==t.duration&&e.uint32(17).double(t.duration),0!==t.status&&e.uint32(32).int32(t.status),void 0!==t.remainingTime&&e.uint32(40).int32(t.remainingTime),void 0!==t.unknown0&&e.uint32(48).int32(t.unknown0),""!==t.translationId&&e.uint32(58).string(t.translationId),void 0!==t.language&&e.uint32(66).string(t.language),void 0!==t.message&&e.uint32(74).string(t.message),e),decode(t,e){const o=t instanceof M.Reader?t:M.Reader.create(t);let n=void 0===e?o.len:o.pos+e;const i={url:void 0,duration:void 0,status:0,remainingTime:void 0,unknown0:void 0,translationId:"",language:void 0,message:void 0};for(;o.pos<n;){const t=o.uint32();switch(t>>>3){case 1:if(10!==t)break;i.url=o.string();continue;case 2:if(17!==t)break;i.duration=o.double();continue;case 4:if(32!==t)break;i.status=o.int32();continue;case 5:if(40!==t)break;i.remainingTime=o.int32();continue;case 6:if(48!==t)break;i.unknown0=o.int32();continue;case 7:if(58!==t)break;i.translationId=o.string();continue;case 8:if(66!==t)break;i.language=o.string();continue;case 9:if(74!==t)break;i.message=o.string();continue}if(4==(7&t)||0===t)break;o.skipType(7&t)}return i},fromJSON:t=>({url:z(t.url)?globalThis.String(t.url):void 0,duration:z(t.duration)?globalThis.Number(t.duration):void 0,status:z(t.status)?globalThis.Number(t.status):0,remainingTime:z(t.remainingTime)?globalThis.Number(t.remainingTime):void 0,unknown0:z(t.unknown0)?globalThis.Number(t.unknown0):void 0,translationId:z(t.translationId)?globalThis.String(t.translationId):"",language:z(t.language)?globalThis.String(t.language):void 0,message:z(t.message)?globalThis.String(t.message):void 0}),toJSON(t){const e={};return void 0!==t.url&&(e.url=t.url),void 0!==t.duration&&(e.duration=t.duration),0!==t.status&&(e.status=Math.round(t.status)),void 0!==t.remainingTime&&(e.remainingTime=Math.round(t.remainingTime)),void 0!==t.unknown0&&(e.unknown0=Math.round(t.unknown0)),""!==t.translationId&&(e.translationId=t.translationId),void 0!==t.language&&(e.language=t.language),void 0!==t.message&&(e.message=t.message),e},create:t=>A.fromPartial(t??{}),fromPartial(t){const e={url:void 0,duration:void 0,status:0,remainingTime:void 0,unknown0:void 0,translationId:"",language:void 0,message:void 0};return e.url=t.url??void 0,e.duration=t.duration??void 0,e.status=t.status??0,e.remainingTime=t.remainingTime??void 0,e.unknown0=t.unknown0??void 0,e.translationId=t.translationId??"",e.language=t.language??void 0,e.message=t.message??void 0,e}};const P={encode:(t,e=M.Writer.create())=>(""!==t.language&&e.uint32(10).string(t.language),""!==t.url&&e.uint32(18).string(t.url),0!==t.unknown0&&e.uint32(24).int32(t.unknown0),""!==t.translatedLanguage&&e.uint32(34).string(t.translatedLanguage),""!==t.translatedUrl&&e.uint32(42).string(t.translatedUrl),0!==t.unknown1&&e.uint32(48).int32(t.unknown1),0!==t.unknown2&&e.uint32(56).int32(t.unknown2),e),decode(t,e){const o=t instanceof M.Reader?t:M.Reader.create(t);let n=void 0===e?o.len:o.pos+e;const i={language:"",url:"",unknown0:0,translatedLanguage:"",translatedUrl:"",unknown1:0,unknown2:0};for(;o.pos<n;){const t=o.uint32();switch(t>>>3){case 1:if(10!==t)break;i.language=o.string();continue;case 2:if(18!==t)break;i.url=o.string();continue;case 3:if(24!==t)break;i.unknown0=o.int32();continue;case 4:if(34!==t)break;i.translatedLanguage=o.string();continue;case 5:if(42!==t)break;i.translatedUrl=o.string();continue;case 6:if(48!==t)break;i.unknown1=o.int32();continue;case 7:if(56!==t)break;i.unknown2=o.int32();continue}if(4==(7&t)||0===t)break;o.skipType(7&t)}return i},fromJSON:t=>({language:z(t.language)?globalThis.String(t.language):"",url:z(t.url)?globalThis.String(t.url):"",unknown0:z(t.unknown0)?globalThis.Number(t.unknown0):0,translatedLanguage:z(t.translatedLanguage)?globalThis.String(t.translatedLanguage):"",translatedUrl:z(t.translatedUrl)?globalThis.String(t.translatedUrl):"",unknown1:z(t.unknown1)?globalThis.Number(t.unknown1):0,unknown2:z(t.unknown2)?globalThis.Number(t.unknown2):0}),toJSON(t){const e={};return""!==t.language&&(e.language=t.language),""!==t.url&&(e.url=t.url),0!==t.unknown0&&(e.unknown0=Math.round(t.unknown0)),""!==t.translatedLanguage&&(e.translatedLanguage=t.translatedLanguage),""!==t.translatedUrl&&(e.translatedUrl=t.translatedUrl),0!==t.unknown1&&(e.unknown1=Math.round(t.unknown1)),0!==t.unknown2&&(e.unknown2=Math.round(t.unknown2)),e},create:t=>P.fromPartial(t??{}),fromPartial(t){const e={language:"",url:"",unknown0:0,translatedLanguage:"",translatedUrl:"",unknown1:0,unknown2:0};return e.language=t.language??"",e.url=t.url??"",e.unknown0=t.unknown0??0,e.translatedLanguage=t.translatedLanguage??"",e.translatedUrl=t.translatedUrl??"",e.unknown1=t.unknown1??0,e.unknown2=t.unknown2??0,e}};const N={encode:(t,e=M.Writer.create())=>(""!==t.url&&e.uint32(10).string(t.url),""!==t.language&&e.uint32(18).string(t.language),e),decode(t,e){const o=t instanceof M.Reader?t:M.Reader.create(t);let n=void 0===e?o.len:o.pos+e;const i={url:"",language:""};for(;o.pos<n;){const t=o.uint32();switch(t>>>3){case 1:if(10!==t)break;i.url=o.string();continue;case 2:if(18!==t)break;i.language=o.string();continue}if(4==(7&t)||0===t)break;o.skipType(7&t)}return i},fromJSON:t=>({url:z(t.url)?globalThis.String(t.url):"",language:z(t.language)?globalThis.String(t.language):""}),toJSON(t){const e={};return""!==t.url&&(e.url=t.url),""!==t.language&&(e.language=t.language),e},create:t=>N.fromPartial(t??{}),fromPartial(t){const e={url:"",language:""};return e.url=t.url??"",e.language=t.language??"",e}};const I={encode(t,e=M.Writer.create()){!1!==t.waiting&&e.uint32(8).bool(t.waiting);for(const o of t.subtitles)P.encode(o,e.uint32(18).fork()).ldelim();return e},decode(t,e){const o=t instanceof M.Reader?t:M.Reader.create(t);let n=void 0===e?o.len:o.pos+e;const i={waiting:!1,subtitles:[]};for(;o.pos<n;){const t=o.uint32();switch(t>>>3){case 1:if(8!==t)break;i.waiting=o.bool();continue;case 2:if(18!==t)break;i.subtitles.push(P.decode(o,o.uint32()));continue}if(4==(7&t)||0===t)break;o.skipType(7&t)}return i},fromJSON:t=>({waiting:!!z(t.waiting)&&globalThis.Boolean(t.waiting),subtitles:globalThis.Array.isArray(t?.subtitles)?t.subtitles.map((t=>P.fromJSON(t))):[]}),toJSON(t){const e={};return!1!==t.waiting&&(e.waiting=t.waiting),t.subtitles?.length&&(e.subtitles=t.subtitles.map((t=>P.toJSON(t)))),e},create:t=>I.fromPartial(t??{}),fromPartial(t){const e={waiting:!1,subtitles:[]};return e.waiting=t.waiting??!1,e.subtitles=t.subtitles?.map((t=>P.fromPartial(t)))||[],e}};const B={encode:(t,e=M.Writer.create())=>(""!==t.url&&e.uint32(10).string(t.url),0!==t.timestamp&&e.uint32(16).int64(t.timestamp),e),decode(t,e){const o=t instanceof M.Reader?t:M.Reader.create(t);let n=void 0===e?o.len:o.pos+e;const i={url:"",timestamp:0};for(;o.pos<n;){const t=o.uint32();switch(t>>>3){case 1:if(10!==t)break;i.url=o.string();continue;case 2:if(16!==t)break;i.timestamp=F(o.int64());continue}if(4==(7&t)||0===t)break;o.skipType(7&t)}return i},fromJSON:t=>({url:z(t.url)?globalThis.String(t.url):"",timestamp:z(t.timestamp)?globalThis.Number(t.timestamp):0}),toJSON(t){const e={};return""!==t.url&&(e.url=t.url),0!==t.timestamp&&(e.timestamp=Math.round(t.timestamp)),e},create:t=>B.fromPartial(t??{}),fromPartial(t){const e={url:"",timestamp:0};return e.url=t.url??"",e.timestamp=t.timestamp??0,e}};const R={encode:(t,e=M.Writer.create())=>(""!==t.url&&e.uint32(10).string(t.url),""!==t.language&&e.uint32(18).string(t.language),""!==t.responseLanguage&&e.uint32(26).string(t.responseLanguage),e),decode(t,e){const o=t instanceof M.Reader?t:M.Reader.create(t);let n=void 0===e?o.len:o.pos+e;const i={url:"",language:"",responseLanguage:""};for(;o.pos<n;){const t=o.uint32();switch(t>>>3){case 1:if(10!==t)break;i.url=o.string();continue;case 2:if(18!==t)break;i.language=o.string();continue;case 3:if(26!==t)break;i.responseLanguage=o.string();continue}if(4==(7&t)||0===t)break;o.skipType(7&t)}return i},fromJSON:t=>({url:z(t.url)?globalThis.String(t.url):"",language:z(t.language)?globalThis.String(t.language):"",responseLanguage:z(t.responseLanguage)?globalThis.String(t.responseLanguage):""}),toJSON(t){const e={};return""!==t.url&&(e.url=t.url),""!==t.language&&(e.language=t.language),""!==t.responseLanguage&&(e.responseLanguage=t.responseLanguage),e},create:t=>R.fromPartial(t??{}),fromPartial(t){const e={url:"",language:"",responseLanguage:""};return e.url=t.url??"",e.language=t.language??"",e.responseLanguage=t.responseLanguage??"",e}};const j={encode:(t,e=M.Writer.create())=>(0!==t.interval&&e.uint32(8).int32(t.interval),void 0!==t.translatedInfo&&B.encode(t.translatedInfo,e.uint32(18).fork()).ldelim(),void 0!==t.pingId&&e.uint32(24).int32(t.pingId),e),decode(t,e){const o=t instanceof M.Reader?t:M.Reader.create(t);let n=void 0===e?o.len:o.pos+e;const i={interval:0,translatedInfo:void 0,pingId:void 0};for(;o.pos<n;){const t=o.uint32();switch(t>>>3){case 1:if(8!==t)break;i.interval=o.int32();continue;case 2:if(18!==t)break;i.translatedInfo=B.decode(o,o.uint32());continue;case 3:if(24!==t)break;i.pingId=o.int32();continue}if(4==(7&t)||0===t)break;o.skipType(7&t)}return i},fromJSON:t=>({interval:z(t.interval)?E(t.interval):0,translatedInfo:z(t.translatedInfo)?B.fromJSON(t.translatedInfo):void 0,pingId:z(t.pingId)?globalThis.Number(t.pingId):void 0}),toJSON(t){const e={};return 0!==t.interval&&(e.interval=function(t){switch(t){case V.NO_CONNECTION:return"NO_CONNECTION";case V.TRANSLATING:return"TRANSLATING";case V.STREAMING:return"STREAMING";case V.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(t.interval)),void 0!==t.translatedInfo&&(e.translatedInfo=B.toJSON(t.translatedInfo)),void 0!==t.pingId&&(e.pingId=Math.round(t.pingId)),e},create:t=>j.fromPartial(t??{}),fromPartial(t){const e={interval:0,translatedInfo:void 0,pingId:void 0};return e.interval=t.interval??0,e.translatedInfo=void 0!==t.translatedInfo&&null!==t.translatedInfo?B.fromPartial(t.translatedInfo):void 0,e.pingId=t.pingId??void 0,e}};const D={encode:(t,e=M.Writer.create())=>(0!==t.pingId&&e.uint32(8).int32(t.pingId),e),decode(t,e){const o=t instanceof M.Reader?t:M.Reader.create(t);let n=void 0===e?o.len:o.pos+e;const i={pingId:0};for(;o.pos<n;){const t=o.uint32();switch(t>>>3){case 1:if(8!==t)break;i.pingId=o.int32();continue}if(4==(7&t)||0===t)break;o.skipType(7&t)}return i},fromJSON:t=>({pingId:z(t.pingId)?globalThis.Number(t.pingId):0}),toJSON(t){const e={};return 0!==t.pingId&&(e.pingId=Math.round(t.pingId)),e},create:t=>D.fromPartial(t??{}),fromPartial(t){const e={pingId:0};return e.pingId=t.pingId??0,e}};const q={encode:(t,e=M.Writer.create())=>(""!==t.uuid&&e.uint32(10).string(t.uuid),""!==t.module&&e.uint32(18).string(t.module),e),decode(t,e){const o=t instanceof M.Reader?t:M.Reader.create(t);let n=void 0===e?o.len:o.pos+e;const i={uuid:"",module:""};for(;o.pos<n;){const t=o.uint32();switch(t>>>3){case 1:if(10!==t)break;i.uuid=o.string();continue;case 2:if(18!==t)break;i.module=o.string();continue}if(4==(7&t)||0===t)break;o.skipType(7&t)}return i},fromJSON:t=>({uuid:z(t.uuid)?globalThis.String(t.uuid):"",module:z(t.module)?globalThis.String(t.module):""}),toJSON(t){const e={};return""!==t.uuid&&(e.uuid=t.uuid),""!==t.module&&(e.module=t.module),e},create:t=>q.fromPartial(t??{}),fromPartial(t){const e={uuid:"",module:""};return e.uuid=t.uuid??"",e.module=t.module??"",e}};const $={encode:(t,e=M.Writer.create())=>(""!==t.secretKey&&e.uint32(10).string(t.secretKey),0!==t.expires&&e.uint32(16).int32(t.expires),e),decode(t,e){const o=t instanceof M.Reader?t:M.Reader.create(t);let n=void 0===e?o.len:o.pos+e;const i={secretKey:"",expires:0};for(;o.pos<n;){const t=o.uint32();switch(t>>>3){case 1:if(10!==t)break;i.secretKey=o.string();continue;case 2:if(16!==t)break;i.expires=o.int32();continue}if(4==(7&t)||0===t)break;o.skipType(7&t)}return i},fromJSON:t=>({secretKey:z(t.secretKey)?globalThis.String(t.secretKey):"",expires:z(t.expires)?globalThis.Number(t.expires):0}),toJSON(t){const e={};return""!==t.secretKey&&(e.secretKey=t.secretKey),0!==t.expires&&(e.expires=Math.round(t.expires)),e},create:t=>$.fromPartial(t??{}),fromPartial(t){const e={secretKey:"",expires:0};return e.secretKey=t.secretKey??"",e.expires=t.expires??0,e}};function F(t){if(t.gt(globalThis.Number.MAX_SAFE_INTEGER))throw new globalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");if(t.lt(globalThis.Number.MIN_SAFE_INTEGER))throw new globalThis.Error("Value is smaller than Number.MIN_SAFE_INTEGER");return t.toNumber()}function z(t){return null!=t}M.util.Long!==_&&(M.util.Long=_,M.configure());const U={encodeTranslationRequest:(t,e,o,n,i)=>C.encode({url:t,firstRequest:!0,duration:e,unknown0:1,language:o,forceSourceLang:!1,unknown1:0,translationHelp:i||[],responseLanguage:n,unknown2:0,unknown3:1,bypassCache:!1}).finish(),decodeTranslationResponse:t=>A.decode(new Uint8Array(t)),encodeSubtitlesRequest:(t,e)=>N.encode({url:t,language:e}).finish(),decodeSubtitlesResponse:t=>I.decode(new Uint8Array(t)),encodeStreamPingRequest:t=>D.encode({pingId:t}).finish(),encodeStreamRequest:(t,e,o)=>R.encode({url:t,language:e,responseLanguage:o}).finish(),decodeStreamResponse:t=>j.decode(new Uint8Array(t)),encodeYandexSessionRequest:(t,e)=>q.encode({uuid:t,module:e}).finish(),decodeYandexSessionResponse:t=>$.decode(new Uint8Array(t))},H={host:"api.browser.yandex.ru",hostVOT:"https://vot-api.toil.cc/v1",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 YaBrowser/24.6.0.0 Safari/537.36",componentVersion:"24.6.1.766",hmac:"bt8xH3VOlb4mqf0nqAibnDOoiPlXsisf",defaultDuration:343},W=crypto,G=new TextEncoder;async function Y(t,e,o){const n=await W.subtle.importKey("raw",G.encode(e),{name:"HMAC",hash:{name:t}},!1,["sign","verify"]);return await W.subtle.sign("HMAC",n,o)}async function Z(t){const e=await Y("SHA-256",H.hmac,t);return new Uint8Array(e).reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),"")}var J,K;async function X(t,e={headers:{"User-Agent":H.userAgent}}){const{timeout:o=3e3}=e,n=new AbortController,i=setTimeout((()=>n.abort()),o),r=await fetch(t,{...e,signal:n.signal});return clearTimeout(i),r}!function(t){t.custom="custom",t.directlink="custom",t.youtube="youtube",t.piped="piped",t.invidious="invidious",t.vk="vk",t.nine_gag="nine_gag",t.gag="nine_gag",t.twitch="twitch",t.proxitok="proxitok",t.tiktok="tiktok",t.vimeo="vimeo",t.xvideos="xvideos",t.pornhub="pornhub",t.twitter="twitter",t.rumble="rumble",t.facebook="facebook",t.rutube="rutube",t.coub="coub",t.bilibili="bilibili",t.mail_ru="mailru",t.mailru="mailru",t.bitchute="bitchute",t.eporner="eporner",t.peertube="peertube",t.dailymotion="dailymotion",t.trovo="trovo",t.yandexdisk="yandexdisk",t.ok_ru="okru",t.okru="okru",t.googledrive="googledrive",t.bannedvideo="bannedvideo",t.weverse="weverse",t.newgrounds="newgrounds",t.egghead="egghead",t.youku="youku",t.archive="archive",t.kodik="kodik",t.patreon="patreon",t.reddit="reddit"}(J||(J={})),function(t){t[t.FAILED=0]="FAILED",t[t.FINISHED=1]="FINISHED",t[t.WAITING=2]="WAITING",t[t.LONG_WAITING=3]="LONG_WAITING",t[t.PART_CONTENT=5]="PART_CONTENT",t[t.LONG_WAITING_2=6]="LONG_WAITING_2"}(K||(K={}));const Q=[{host:J.youtube,url:"https://youtu.be/",match:/^((www.|m.)?youtube(-nocookie|kids)?.com)|(youtu.be)$/},{host:J.invidious,url:"https://youtu.be/",match:["invidious.snopyta.org","yewtu.be","invidious.kavin.rocks","vid.puffyan.us","invidious.namazso.eu","inv.riverside.rocks","yt.artemislena.eu","invidious.flokinet.to","invidious.esmailelbob.xyz","y.com.sb","invidious.nerdvpn.de","inv.vern.cc","invidious.slipfox.xyz","invidio.xamh.de","invidious.dhusch.de"]},{host:J.piped,url:"https://youtu.be/",match:["piped.video","piped.tokhmi.xyz","piped.moomoo.me","piped.syncpundit.io","piped.mha.fi","watch.whatever.social","piped.garudalinux.org","efy.piped.pages.dev","watch.leptons.xyz","piped.lunar.icu","yt.dc09.ru","piped.mint.lgbt","il.ax","piped.privacy.com.de","piped.esmailelbob.xyz","piped.projectsegfau.lt","piped.in.projectsegfau.lt","piped.us.projectsegfau.lt","piped.privacydev.net","piped.palveluntarjoaja.eu","piped.smnz.de","piped.adminforge.de","piped.qdi.fi","piped.hostux.net","piped.chauvet.pro","piped.jotoma.de","piped.pfcd.me","piped.frontendfriendly.xyz"]},{host:J.vk,url:"https://vk.com/video?z=",match:/^(www.|m.)?vk.(com|ru)$/},{host:J.nine_gag,url:"https://9gag.com/gag/",match:/^9gag.com$/},{host:J.twitch,url:"https://twitch.tv/",match:[/^m.twitch.tv$/,/^(www.)?twitch.tv$/,/^clips.twitch.tv$/,/^player.twitch.tv$/]},{host:J.proxitok,url:"https://www.tiktok.com/",match:["proxitok.pabloferreiro.es","proxitok.pussthecat.org","tok.habedieeh.re","proxitok.esmailelbob.xyz","proxitok.privacydev.net","tok.artemislena.eu","tok.adminforge.de","tik.hostux.net","tt.vern.cc","cringe.whatever.social","proxitok.lunar.icu","proxitok.privacy.com.de"]},{host:J.tiktok,url:"https://www.tiktok.com/",match:/^(www.)?tiktok.com$/},{host:J.vimeo,url:"https://vimeo.com/",match:/^vimeo.com$/},{host:J.vimeo,url:"https://player.vimeo.com/",match:/^player.vimeo.com$/},{host:J.xvideos,url:"https://www.xvideos.com/",match:/^(www.)?(xvideos|xv-ru).com$/},{host:J.pornhub,url:"https://rt.pornhub.com/view_video.php?viewkey=",match:/^[a-z]+.pornhub.com$/},{host:J.twitter,url:"https://twitter.com/i/status/",match:/^twitter.com$/},{host:J.rumble,url:"https://rumble.com/",match:/^rumble.com$/},{host:J.facebook,url:"https://facebook.com/",match:t=>t.host.includes("facebook.com")&&(t.pathname.includes("/videos/")||t.pathname.includes("/reel/"))},{host:J.rutube,url:"https://rutube.ru/video/",match:/^rutube.ru$/},{host:J.bilibili,url:"https://www.bilibili.com/video/",match:/^(www|m|player).bilibili.com$/},{host:J.mailru,url:"https://my.mail.ru/",match:/^my.mail.ru$/},{host:J.bitchute,url:"https://www.bitchute.com/video/",match:/^(www.)?bitchute.com$/},{host:J.eporner,url:"https://www.eporner.com/",match:/^(www.)?eporner.com$/},{host:J.peertube,url:"stub",match:["peertube.1312.media","tube.shanti.cafe","bee-tube.fr","video.sadmin.io","dalek.zone","review.peertube.biz","peervideo.club","tube.la-dina.net","peertube.tmp.rcp.tf","peertube.su"]},{host:J.dailymotion,url:"https://dai.ly/",match:/^(www.)?dailymotion.com|dai.ly$/},{host:J.trovo,url:"https://trovo.live/s/",match:/^trovo.live$/},{host:J.yandexdisk,url:"https://yadi.sk/i/",match:/^disk.yandex.ru|yadi.sk$/},{host:J.okru,url:"https://ok.ru/video/",match:/^ok.ru$/},{host:J.googledrive,url:"https://drive.google.com/file/d/",match:/^drive.google.com$/},{host:J.bannedvideo,url:"https://madmaxworld.tv/watch?id=",match:/^(www.)?banned.video|madmaxworld.tv$/,rawResult:!0},{host:J.weverse,url:"https://weverse.io/",match:/^weverse.io$/,needExtraData:!0},{host:J.newgrounds,url:"https://www.newgrounds.com/",match:/^(www.)?newgrounds.com$/},{host:J.egghead,url:"https://egghead.io/",match:/^egghead.io$/},{host:J.youku,url:"https://v.youku.com/",match:/^v.youku.com$/},{host:J.archive,url:"https://archive.org/details/",match:/^archive.org$/},{host:J.kodik,url:"stub",match:/^kodik.(info|biz|cc)$/,needExtraData:!0},{host:J.patreon,url:"stub",match:/^(www.)?patreon.com$/,needExtraData:!0},{host:J.reddit,url:"stub",match:/^(www.)?reddit.com$/,needExtraData:!0},{host:J.custom,url:"stub",match:t=>/([^.]+).mp4/.test(t.pathname),rawResult:!0}];var tt=__webpack_require__("../vot.js/node_modules/dom-parser/dist/index.js");class et extends Error{constructor(t){super(t),this.name="VideoHelper",this.message=t}}class ot{async getVideoData(t){try{const e=await X(`https://my.mail.ru/+/video/meta/${t}?xemail=&ajax_call=1&func_name=&mna=&mnb=&ext=1&_=${(new Date).getTime()}`);return await e.json()}catch(t){return void console.error("Failed to get mail.ru video info",t.message)}}}class nt{API_ORIGIN="https://global.apis.naver.com/weverse/wevweb";API_APP_ID="be4d79eb8fc7bd008ee82c8ec4ff6fd4";API_HMAC_KEY="1b9cb6378d959b45714bec49971ade22e6e24e42";HEADERS={Accept:"application/json, text/plain, */*",Origin:"https://weverse.io",Referer:"https://weverse.io/"};getURLData(){return{appId:this.API_APP_ID,language:"en",os:"WEB",platform:"WEB",wpf:"pc"}}async createHash(t){const e=Date.now(),o=t.substring(0,Math.min(255,t.length))+e,n=await async function(t,e){try{const o=G.encode(e),n=await Y("SHA-1",t,o);return btoa(String.fromCharCode(...new Uint8Array(n)))}catch(t){return console.error(t),!1}}(this.API_HMAC_KEY,o);if(!n)throw new et("Failed to get weverse HMAC signature");return{wmsgpad:e.toString(),wmd:n}}async getHashURLParams(t){const e=await this.createHash(t);return new URLSearchParams(e).toString()}async getPostPreview(t){const e=`/post/v1.0/post-${t}/preview?`+new URLSearchParams({fieldSet:"postForPreview",...this.getURLData()}).toString();try{const t=await this.getHashURLParams(e),o=await X(this.API_ORIGIN+e+"&"+t,{headers:this.HEADERS});return await o.json()}catch(e){return console.error(`Failed to get weverse post preview by postId: ${t}`,e.message),!1}}async getVideoInKey(t){const e=`/video/v1.1/vod/${t}/inKey?`+new URLSearchParams({gcc:"RU",...this.getURLData()}).toString();try{const t=await this.getHashURLParams(e),o=await X(this.API_ORIGIN+e+"&"+t,{method:"POST",headers:this.HEADERS});return await o.json()}catch(e){return console.error(`Failed to get weverse InKey by videoId: ${t}`,e.message),!1}}async getVideoInfo(t,e,o){const n=Date.now();try{const i=new URLSearchParams({key:e,sid:o,nonce:n.toString(),devt:"html5_pc",prv:"N",aup:"N",stpb:"N",cpl:"en",env:"prod",lc:"en",adi:JSON.stringify([{adSystem:null}]),adu:"/"}).toString(),r=await X(`https://global.apis.naver.com/rmcnmv/rmcnmv/vod/play/v2.0/${t}?`+i,{headers:this.HEADERS});return await r.json()}catch(n){return console.error(`Failed to get weverse video info (infraVideoId: ${t}, inkey: ${e}, serviceId: ${o}`,n.message),!1}}extractVideoInfo(t){return t.find((t=>!1===t.useP2P&&t.source.includes(".mp4")))}async getVideoData(t){const e=await this.getPostPreview(t);if(!e)return;const{videoId:o,serviceId:n,infraVideoId:i}=e.extension.video;if(!(o&&n&&i))return;const r=await this.getVideoInKey(o);if(!r)return;const a=await this.getVideoInfo(i,r.inKey,n);if(!a)return;const s=this.extractVideoInfo(a.videos.list);return s?{url:s.source,duration:s.duration}:void 0}}class it{API_ORIGIN="https://kodik.biz";async getSecureData(t){try{const e=this.API_ORIGIN+t,o=await X(e,{headers:{"User-Agent":H.userAgent,Origin:this.API_ORIGIN,Referer:this.API_ORIGIN}}),n=await o.text(),[i,r,a]=t.split("/").filter((t=>t)),s=(0,tt.parseFromString)(n),l=Array.from(s.getElementsByTagName("script")).filter((t=>t.innerHTML.includes(`videoId = "${r}"`)));if(!l.length)throw new et("Failed to find secure script");const u=/'{[^']+}'/.exec(l[0].textContent.trim())?.[0];if(!u)throw new et("Secure json wasn't found in secure script");const d=JSON.parse(u.replaceAll("'",""));return{videoType:i,videoId:r,hash:a,...d}}catch(e){return console.error(`Failed to get kodik secure data by videoPath: ${t}.`,e.message),!1}}async getFtor(t){const{videoType:e,videoId:o,hash:n,d:i,d_sign:r,pd:a,pd_sign:s,ref:l,ref_sign:u}=t;try{const t=await X(this.API_ORIGIN+"/ftor",{method:"POST",headers:{"User-Agent":H.userAgent,Origin:this.API_ORIGIN,Referer:`${this.API_ORIGIN}/${e}/${o}/${n}/360p`},body:new URLSearchParams({d:i,d_sign:r,pd:a,pd_sign:s,ref:decodeURIComponent(l),ref_sign:u,bad_user:"false",cdn_is_working:"true",info:"{}",type:e,hash:n,id:o})});return await t.json()}catch(t){return console.error(`Failed to get kodik video data (type: ${e}, id: ${o}, hash: ${n})`,t.message),!1}}decryptUrl(t){return"https:"+atob(t.replace(/[a-zA-Z]/g,(function(t){const e=t.charCodeAt(0)+13;return String.fromCharCode((t<="Z"?90:122)>=e?e:e-26)})))}async getVideoData(t){const e=await this.getSecureData(t);if(!e)return;const o=await this.getFtor(e);if(!o)return;const n=Object.entries(o.links[o.default.toString()]),i=n.find((([t,e])=>"application/x-mpegURL"===e.type))?.[1];return i?{url:this.decryptUrl(i.src)}:void 0}}class rt{async getPosts(t){try{const e=await X(`https://www.patreon.com/api/posts/${t}?json-api-use-default-includes=false`);return await e.json()}catch(e){return console.error(`Failed to get patreon posts by postId: ${t}.`,e.message),!1}}async getVideoData(t){const e=await this.getPosts(t);if(!e)return;const o=e.data.attributes.post_file.url;return o?{url:o}:void 0}}class at{async getVideoData(t){const e=await X(`https://www.reddit.com/r/${t}`),o=await e.text(),n=/https:\/\/v\.redd\.it\/([^/]+)\/HLSPlaylist\.m3u8\?([^"]+)/.exec(o)?.[0]?.replaceAll("&amp;","&");if(n)return{url:decodeURIComponent(n)}}}class st{static[J.mailru]=new ot;static[J.weverse]=new nt;static[J.kodik]=new it;static[J.patreon]=new rt;static[J.reddit]=new at}class lt extends Error{constructor(t){super(t),this.name="VideoDataError",this.message=t}}async function ut(t){const e=function(t){if(t.startsWith("file://"))return!1;let e;try{e=new URL(t)}catch(e){return console.error(`Invalid URL: ${t}. Have you forgotten https?`),!1}const o=e.hostname,n=t=>t instanceof RegExp?t.test(o):"string"==typeof t?o.includes(t):"function"==typeof t&&t(e);return Q.find((t=>(Array.isArray(t.match)?t.match.some(n):n(t.match))&&t.host&&t.url))}(t);if(!e)throw new lt(`URL: "${t}" is unknown service`);const o=await async function(t,e){const o=new URL(e);switch(t.host){case J.custom:return o.href;case J.piped:case J.invidious:case J.youtube:return"youtu.be"===o.hostname&&(o.search=`?v=${o.pathname.replace("/","")}`,o.pathname="/watch"),/(?:watch|embed|shorts|live)\/([^/]+)/.exec(o.pathname)?.[1]??o.searchParams.get("v");case J.vk:{const t=/^\/(video|clip)-?\d{8,9}_\d{9}$/.exec(o.pathname),e=o.searchParams.get("z"),n=o.searchParams.get("oid"),i=o.searchParams.get("id");return t?t[0].slice(1):e?e.split("/")[0]:n&&i?`video-${Math.abs(parseInt(n))}_${i}`:null}case J.nine_gag:case J.gag:return/gag\/([^/]+)/.exec(o.pathname)?.[1];case J.twitch:{const t=/([^/]+)\/(?:clip)\/([^/]+)/.exec(o.pathname),e=/^clips\.twitch\.tv$/.test(o.hostname);if(/^m\.twitch\.tv$/.test(o.hostname))return/videos\/([^/]+)/.exec(o.href)?.[0]??o.pathname.slice(1);if(/^player\.twitch\.tv$/.test(o.hostname))return`videos/${o.searchParams.get("video")}`;if(e){const t=o.pathname.slice(1),e="embed"===t,n=await X(`https://clips.twitch.tv/${e?o.searchParams.get("clip"):o.pathname.slice(1)}`,{headers:{"User-Agent":"Googlebot/2.1 (+http://www.googlebot.com/bot.html)"}}),i=await n.text(),r=/"url":"https:\/\/www\.twitch\.tv\/([^"]+)"/.exec(i);return r?`${r[1]}/clip/${e?o.searchParams.get("clip"):t}`:null}return t?t[0]:/(?:videos)\/([^/]+)/.exec(o.pathname)?.[0]}case J.proxitok:case J.tiktok:return/([^/]+)\/video\/([^/]+)/.exec(o.pathname)?.[0];case J.vimeo:{const t=o.searchParams.get("app_id"),e=/[^/]+\/[^/]+$/.exec(o.pathname)?.[0]??/[^/]+$/.exec(o.pathname)?.[0];return t?`${e}?app_id=${t}`:e}case J.xvideos:return/[^/]+\/[^/]+$/.exec(o.pathname)?.[0];case J.pornhub:return o.searchParams.get("viewkey")??/embed\/([^/]+)/.exec(o.pathname)?.[1];case J.twitter:return/status\/([^/]+)/.exec(o.pathname)?.[1];case J.rumble:case J.facebook:return o.pathname.slice(1);case J.rutube:return/(?:video|embed)\/([^/]+)/.exec(o.pathname)?.[1];case J.bilibili:{const t=o.searchParams.get("bvid");if(t)return t;let e=/video\/([^/]+)/.exec(o.pathname)?.[1];return e&&null!==o.searchParams.get("p")&&(e+=`/?p=${o.searchParams.get("p")}`),e}case J.mailru:{const t=o.pathname;if(t.startsWith("/v/")||t.startsWith("/mail/"))return t.slice(1);const e=/video\/embed\/([^/]+)/.exec(t)?.[1];if(!e)return null;const n=await st.mailru.getVideoData(e);return n?n.meta.url.replace("//my.mail.ru/",""):null}case J.bitchute:return/(video|embed)\/([^/]+)/.exec(o.pathname)?.[2];case J.eporner:return/video-([^/]+)\/([^/]+)/.exec(o.pathname)?.[0];case J.peertube:return/\/w\/([^/]+)/.exec(o.pathname)?.[0];case J.dailymotion:return"dai.ly"===o.hostname?o.pathname.slice(1):/video\/([^/]+)/.exec(o.pathname)?.[1];case J.trovo:{const t=o.searchParams.get("vid");if(!t)return null;const e=/([^/]+)\/([\d]+)/.exec(o.pathname)?.[0];return e?`${e}?vid=${t}`:null}case J.yandexdisk:return/\/i\/([^/]+)/.exec(o.pathname)?.[1];case J.okru:return/\/video\/(\d+)/.exec(o.pathname)?.[1];case J.googledrive:return/\/file\/d\/([^/]+)/.exec(o.pathname)?.[1];case J.bannedvideo:{const e=o.searchParams.get("id"),n=await X(`${t.url}${e}`),i=await n.text();return/https:\/\/download.assets.video\/videos\/([^.]+).mp4/.exec(i)?.[0]}case J.weverse:return/([^/]+)\/(live|media)\/([^/]+)/.exec(o.pathname)?.[3];case J.newgrounds:return/([^/]+)\/(view)\/([^/]+)/.exec(o.pathname)?.[0];case J.egghead:return o.pathname.slice(1);case J.youku:return/v_show\/id_[\w=]+/.exec(o.pathname)?.[0];case J.archive:return/(details|embed)\/([^/]+)/.exec(o.pathname)?.[2];case J.kodik:return/\/(seria|video)\/([^/]+)\/([^/]+)\/([\d]+)p/.exec(o.pathname)?.[0];case J.patreon:{const t=/posts\/([^/]+)/.exec(o.pathname)?.[1];if(!t)return;return t.replace(/[^\d.]/g,"")}case J.reddit:return/\/r\/(([^/]+)\/([^/]+)\/([^/]+)\/([^/]+))/.exec(o.pathname)?.[1];default:return}}(e,t);if(!o)throw new lt(`Entered unsupported link: "${t}"`);if(e.host===J.peertube&&(e.url=new URL(t).origin),e.rawResult)return{url:o,videoId:o,host:e.host,duration:void 0};if(!e.needExtraData)return{url:e.url+o,videoId:o,host:e.host,duration:void 0};const n=await st[e.host].getVideoData(o);if(!n)throw new lt(`Failed to get video raw url for ${e.host}`);return{url:n.url,videoId:o,host:e.host,duration:n.duration}}const{rE:dt}={rE:"1.0.0"};class ct extends Error{data;constructor(t,e=void 0){super(t),this.data=e,this.name="VOTJSError",this.message=t}}class ht{host;hostVOT;schema;schemaVOT;fetch;fetchOpts;getVideoDataFn;sessions={};requestLang;responseLang;userAgent=H.userAgent;componentVersion=H.componentVersion;paths={videoTranslation:"/video-translation/translate"};isCustomFormat(t){return/\.(m3u8|m4(a|v)|mpd)/.exec(t)}headers={"User-Agent":this.userAgent,Accept:"application/x-protobuf","Accept-Language":"en","Content-Type":"application/x-protobuf",Pragma:"no-cache","Cache-Control":"no-cache","Sec-Fetch-Mode":"no-cors"};headersVOT={"User-Agent":`vot-cli/${dt}`,"Content-Type":"application/json",Pragma:"no-cache","Cache-Control":"no-cache"};constructor({host:t=H.host,hostVOT:e=H.hostVOT,fetchFn:o=X,fetchOpts:n={},getVideoDataFn:i=ut,requestLang:r="en",responseLang:a="ru",headers:s={}}={}){const l=/(http(s)?):\/\//,u=l.exec(t)?.[1];this.host=u?t.replace(`${u}://`,""):t,this.schema=u??"https";const d=l.exec(e)?.[1];this.hostVOT=d?e.replace(`${d}://`,""):e,this.schemaVOT=d??"https",this.fetch=o,this.fetchOpts=n,this.getVideoDataFn=i,this.requestLang=r,this.responseLang=a,this.headers={...this.headers,...s}}getOpts(t,e={}){return{method:"POST",headers:{...this.headers,...e},body:t,...this.fetchOpts}}async request(t,e,o={}){const n=this.getOpts(new Blob([e]),o);try{const e=await this.fetch(`${this.schema}://${this.host}${t}`,n),o=await e.arrayBuffer();return{success:200===e.status,data:o}}catch(t){return console.error("[vot.js]",t.message),{success:!1,data:null}}}async requestVOT(t,e,o={}){const n=this.getOpts(JSON.stringify(e),{...this.headersVOT,...o});try{console.log(`${this.schemaVOT}://${this.hostVOT}${t}`);const e=await this.fetch(`${this.schemaVOT}://${this.hostVOT}${t}`,n),o=await e.json();return{success:200===e.status,data:o}}catch(t){return console.error("[vot.js]",t.message),{success:!1,data:null}}}async getSession(t){const e=Math.floor(Date.now()/1e3),o=this.sessions[t];if(o&&o.timestamp+o.expires>e)return o;const{secretKey:n,expires:i,uuid:r}=await this.createSession(t);return this.sessions[t]={secretKey:n,expires:i,timestamp:e,uuid:r},this.sessions[t]}async translateVideoYAImpl({url:t,duration:e=H.defaultDuration,requestLang:o=this.requestLang,responseLang:n=this.responseLang,translationHelp:i=null,headers:r={}}){const{secretKey:a,uuid:s}=await this.getSession("video-translation"),l=U.encodeTranslationRequest(t,e,o,n,i),u=await Z(l),d=await this.request(this.paths.videoTranslation,l,{"Vtrans-Signature":u,"Sec-Vtrans-Sk":a,"Sec-Vtrans-Token":`${u}:${s}:${this.paths.videoTranslation}:${this.componentVersion}`,...r});if(!d.success)throw new ct("Failed to request video translation",d);const c=U.decodeTranslationResponse(d.data);switch(c.status){case K.FAILED:throw new ct("Yandex couldn't translate video",c);case K.FINISHED:case K.PART_CONTENT:if(!c.url)throw new ct("Audio link wasn't received from Yandex response",c);return{translated:!0,url:c.url,remainingTime:c.remainingTime??-1};case K.WAITING:return{translated:!1,remainingTime:c.remainingTime};case K.LONG_WAITING:case K.LONG_WAITING_2:return{translated:!1,remainingTime:c.remainingTime??-1};default:throw console.error("[vot.js] Unknown response",c),new ct("Unknown response from Yandex",c)}}async translateVideoVOTImpl({url:t,videoId:e,service:o,requestLang:n=this.requestLang,responseLang:i=this.responseLang,headers:r={}}){const a=function(t,e,o){return t===J.patreon?{service:"mux",videoId:new URL(o).pathname.slice(1)}:{service:t,videoId:e}}(o,e,t),s=await this.requestVOT(this.paths.videoTranslation,{provider:"yandex",service:a.service,videoId:a.videoId,fromLang:n,toLang:i,rawVideo:t},r);if(!s.success)throw new ct("Failed to request video translation",s);const l=s.data;switch(l.status){case"failed":throw new ct("Yandex couldn't translate video",l);case"success":if(!l.translatedUrl)throw new ct("Audio link wasn't received from VOT response",l);return{translated:!0,url:l.translatedUrl,remainingTime:-1};case"waiting":return{translated:!1,remainingTime:l.remainingTime,message:l.message}}}async translateVideo({url:t,duration:e=H.defaultDuration,requestLang:o=this.requestLang,responseLang:n=this.responseLang,translationHelp:i=null,headers:r={}}){const{url:a,videoId:s,host:l,duration:u}=await this.getVideoDataFn(t);return this.isCustomFormat(a)?await this.translateVideoVOTImpl({url:a,videoId:s,service:l,requestLang:o,responseLang:n,headers:r}):await this.translateVideoYAImpl({url:a,duration:u??e,requestLang:o,responseLang:n,translationHelp:i,headers:r})}async getSubtitles({url:t,requestLang:e=this.requestLang,headers:o={}}){const{url:n}=await this.getVideoDataFn(t);if(this.isCustomFormat(n))throw new ct("Unsupported video URL for getting subtitles");const{secretKey:i,uuid:r}=await this.getSession("video-translation"),a=U.encodeSubtitlesRequest(n,e),s=await Z(a),l="/video-subtitles/get-subtitles",u=await this.request(l,a,{"Vsubs-Signature":await Z(a),"Sec-Vsubs-Sk":i,"Sec-Vsubs-Token":`${s}:${r}:${l}:${this.componentVersion}`,...o});if(!u.success)throw new ct("Failed to request video subtitles",u);return U.decodeSubtitlesResponse(u.data)}async pingStream({pingId:t,headers:e={}}){const{secretKey:o,uuid:n}=await this.getSession("video-translation"),i=U.encodeStreamPingRequest(t),r=await Z(i),a="/stream-translation/ping-stream",s=await this.request(a,i,{"Vtrans-Signature":await Z(i),"Sec-Vtrans-Sk":o,"Sec-Vtrans-Token":`${r}:${n}:${a}:${this.componentVersion}`,...e});if(!s.success)throw new ct("Failed to request stream ping",s);return!0}async translateStream({url:t,requestLang:e=this.requestLang,responseLang:o=this.responseLang,headers:n={}}){const{url:i}=await this.getVideoDataFn(t);if(this.isCustomFormat(i))throw new ct("Unsupported video URL for getting stream translation");const{secretKey:r,uuid:a}=await this.getSession("video-translation"),s=U.encodeStreamRequest(i,e,o),l=await Z(s),u="/stream-translation/translate-stream",d=await this.request(u,s,{"Vtrans-Signature":await Z(s),"Sec-Vtrans-Sk":r,"Sec-Vtrans-Token":`${l}:${a}:${u}:${this.componentVersion}`,...n});if(!d.success)throw new ct("Failed to request stream translation",d);const c=U.decodeStreamResponse(d.data),h=c.interval;switch(h){case V.NO_CONNECTION:case V.TRANSLATING:return{translated:!1,interval:h,message:h===V.NO_CONNECTION?"streamNoConnectionToServer":"translationTakeFewMinutes"};case V.STREAMING:return{translated:!0,interval:h,pingId:c.pingId,result:c.translatedInfo};default:throw console.error("[vot.js] Unknown response",c),new ct("Unknown response from Yandex",c)}}async createSession(t){const e=function(){let t="";for(let e=0;e<32;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}(),o=U.encodeYandexSessionRequest(e,t),n=await this.request("/session/create",o,{"Vtrans-Signature":await Z(o)});if(!n.success)throw new ct("Failed to request create session",n);return{...U.decodeYandexSessionResponse(n.data),uuid:e}}}const pt=["invidious.snopyta.org","yewtu.be","invidious.kavin.rocks","vid.puffyan.us","invidious.namazso.eu","inv.riverside.rocks","yt.artemislena.eu","invidious.flokinet.to","invidious.esmailelbob.xyz","y.com.sb","invidious.nerdvpn.de","inv.vern.cc","invidious.slipfox.xyz","invidio.xamh.de","invidious.dhusch.de"],gt=["piped.video","piped.tokhmi.xyz","piped.moomoo.me","piped.syncpundit.io","piped.mha.fi","watch.whatever.social","piped.garudalinux.org","efy.piped.pages.dev","watch.leptons.xyz","piped.lunar.icu","yt.dc09.ru","piped.mint.lgbt","il.ax","piped.privacy.com.de","piped.esmailelbob.xyz","piped.projectsegfau.lt","piped.in.projectsegfau.lt","piped.us.projectsegfau.lt","piped.privacydev.net","piped.palveluntarjoaja.eu","piped.smnz.de","piped.adminforge.de","piped.qdi.fi","piped.hostux.net","piped.chauvet.pro","piped.jotoma.de","piped.pfcd.me","piped.frontendfriendly.xyz"],mt=["proxitok.pabloferreiro.es","proxitok.pussthecat.org","tok.habedieeh.re","proxitok.esmailelbob.xyz","proxitok.privacydev.net","tok.artemislena.eu","tok.adminforge.de","tik.hostux.net","tt.vern.cc","cringe.whatever.social","proxitok.lunar.icu","proxitok.privacy.com.de"],vt=["peertube.1312.media","tube.shanti.cafe","bee-tube.fr","video.sadmin.io","dalek.zone","review.peertube.biz","peervideo.club","tube.la-dina.net","peertube.tmp.rcp.tf","peertube.su"],ft="m3u8-proxy.toil.cc",bt="vot-worker.toil.cc",wt=.15,yt="yandex",xt="yandex",kt={yandex:"https://translate.toil.cc/detect",rustServer:"https://rust-server-531j.onrender.com/detect"},St={yandex:"https://translate.toil.cc/translate",deepl:"https://translate-deepl.toil.cc/translate"},Tt=["ru","en","zh","ko","lt","lv","ar","fr","it","es","de","ja"],Lt=["ru","en","kk"],_t=["Violentmonkey","FireMonkey","Greasemonkey","AdGuard","OrangeMonkey"],Mt=JSON.parse('{"__version__":4,"recommended":"recommended","translateVideo":"Translate video","disableTranslate":"Turn off","translationSettings":"Translation settings","subtitlesSettings":"Subtitles settings","about":"About extension","resetSettings":"Reset settings","videoBeingTranslated":"The video is being translated","videoLanguage":"Video language","translationLanguage":"Translation language","translationTake":"The translation will take","translationTakeMoreThanHour":"The translation will take more than an hour","translationTakeAboutMinute":"The translation will take about a minute","translationTakeFewMinutes":"The translation will take a few minutes","translationTakeApproximatelyMinutes":"The translation will take approximately {0} minutes","translationTakeApproximatelyMinute":"The translation will take approximately {0} minutes","unSupportedExtensionError":"Error! {0} is not supported by this version of the extension!\\n\\nPlease use the cloudflare version of the VOT extension.","requestTranslationFailed":"Failed to request video translation","audioNotReceived":"Audio link not received","grantPermissionToAutoPlay":"Grant permission to autoplay","neededAdditionalExtension":"An additional extension is needed to support this site","audioFormatNotSupported":"The audio format is not supported","VOTAutoTranslate":"Translate on open","VOTDontTranslateYourLang":"Do not translate from my language","VOTVolume":"Video volume","VOTVolumeTranslation":"Translation Volume","VOTAutoSetVolume":"Reduce video volume to ","VOTShowVideoSlider":"Video volume slider","VOTSyncVolume":"Link translation and video volume","VOTAudioProxy":"Proxy received audio","VOTDisableFromYourLang":"You have disabled the translation of the video in your language","VOTLiveNotSupported":"Translation of live streams is not supported","VOTPremiere":"Wait for the premiere to end before translating","VOTVideoIsTooLong":"Video is too long","VOTNoVideoIDFound":"No video ID found","VOTSubtitles":"Subtitles","VOTSubtitlesDisabled":"Disabled","VOTSubtitlesMaxLength":"Subtitles max length","VOTHighlightWords":"Highlight words","VOTTranslatedFrom":"translated from","VOTAutogenerated":"autogenerated","VOTSettings":"VOT Settings","VOTMenuLanguage":"Menu language","VOTAuthors":"Authors","VOTVersion":"Version","VOTLoader":"Loader","VOTBrowser":"Browser","VOTShowPiPButton":"Show PiP button","langs":{"auto":"Auto","af":"Afrikaans","ak":"Akan","sq":"Albanian","am":"Amharic","ar":"Arabic","hy":"Armenian","as":"Assamese","ay":"Aymara","az":"Azerbaijani","bn":"Bangla","eu":"Basque","be":"Belarusian","bho":"Bhojpuri","bs":"Bosnian","bg":"Bulgarian","my":"Burmese","ca":"Catalan","ceb":"Cebuano","zh":"Chinese","zh-Hans":"Chinese (Simplified)","zh-Hant":"Chinese (Traditional)","co":"Corsican","hr":"Croatian","cs":"Czech","da":"Danish","dv":"Divehi","nl":"Dutch","en":"English","eo":"Esperanto","et":"Estonian","ee":"Ewe","fil":"Filipino","fi":"Finnish","fr":"French","gl":"Galician","lg":"Ganda","ka":"Georgian","de":"German","el":"Greek","gn":"Guarani","gu":"Gujarati","ht":"Haitian Creole","ha":"Hausa","haw":"Hawaiian","iw":"Hebrew","hi":"Hindi","hmn":"Hmong","hu":"Hungarian","is":"Icelandic","ig":"Igbo","id":"Indonesian","ga":"Irish","it":"Italian","ja":"Japanese","jv":"Javanese","kn":"Kannada","kk":"Kazakh","km":"Khmer","rw":"Kinyarwanda","ko":"Korean","kri":"Krio","ku":"Kurdish","ky":"Kyrgyz","lo":"Lao","la":"Latin","lv":"Latvian","ln":"Lingala","lt":"Lithuanian","lb":"Luxembourgish","mk":"Macedonian","mg":"Malagasy","ms":"Malay","ml":"Malayalam","mt":"Maltese","mi":"Māori","mr":"Marathi","mn":"Mongolian","ne":"Nepali","nso":"Northern Sotho","no":"Norwegian","ny":"Nyanja","or":"Odia","om":"Oromo","ps":"Pashto","fa":"Persian","pl":"Polish","pt":"Portuguese","pa":"Punjabi","qu":"Quechua","ro":"Romanian","ru":"Russian","sm":"Samoan","sa":"Sanskrit","gd":"Scottish Gaelic","sr":"Serbian","sn":"Shona","sd":"Sindhi","si":"Sinhala","sk":"Slovak","sl":"Slovenian","so":"Somali","st":"Southern Sotho","es":"Spanish","su":"Sundanese","sw":"Swahili","sv":"Swedish","tg":"Tajik","ta":"Tamil","tt":"Tatar","te":"Telugu","th":"Thai","ti":"Tigrinya","ts":"Tsonga","tr":"Turkish","tk":"Turkmen","uk":"Ukrainian","ur":"Urdu","ug":"Uyghur","uz":"Uzbek","vi":"Vietnamese","cy":"Welsh","fy":"Western Frisian","xh":"Xhosa","yi":"Yiddish","yo":"Yoruba","zu":"Zulu"},"udemyAccessTokenExpired":"Your entered Udemy Access Token has expired","udemyModuleArgsNotFound":"Could not get udemy module data due to the fact that ModuleArgs was not found","VOTTranslationHelpNull":"Could not get the data required for the translate","enterUdemyAccessToken":"Enter Udemy Access Token","VOTUdemyData":"Udemy Data","streamNoConnectionToServer":"There is no connection to the server","searchField":"Search...","VOTTranslateAPIErrors":"Translate errors from the API","VOTTranslationService":"Translation Service","VOTDetectService":"Detect Service","VOTTranslatingError":"Translating the error","VOTProxyWorkerHost":"Enter the proxy worker address","VOTM3u8ProxyHost":"Enter the address of the m3u8 proxy worker","proxySettings":"Proxy Settings","translationTakeApproximatelyMinute2":"The translation will take approximately {0} minutes","VOTAudioBooster":"Extended translation volume increase"}'),Vt={log:(...t)=>console.log("%c[VOT DEBUG]","background: #F2452D; color: #fff; padding: 5px;",...t)},Et=Vt,Ot=new class{constructor(){this.gmSupport="function"==typeof GM_getValue,Et.log(`GM Storage Status: ${this.gmSupport}`)}syncGet(t,e=void 0,o=!1){if(this.gmSupport)return GM_getValue(t,e);let n=window.localStorage.getItem(t);if("udemyData"===t&&"string"==typeof n)try{n=JSON.parse(n)}catch{n=e}return o?Number(n)??Number(e):n??e}async get(t,e=void 0,o=!1){return this.gmSupport?await GM_getValue(t,e):Promise.resolve(this.syncGet(t,e,o))}syncSet(t,e){return this.gmSupport?GM_setValue(t,e):("udemyData"===t&&(e=JSON.stringify(e)),window.localStorage.setItem(t,e))}async set(t,e){return this.gmSupport?await GM_setValue(t,e):Promise.resolve(this.syncSet(t,e))}syncDelete(t){return this.gmSupport?GM_deleteValue(t):window.localStorage.removeItem(t)}async delete(t){return this.gmSupport?await GM_deleteValue(t):Promise.resolve(this.syncDelete(t))}syncList(){return this.gmSupport?GM_listValues():["autoTranslate","dontTranslateLanguage","dontTranslateYourLang","autoSetVolumeYandexStyle","showVideoSlider","syncVolume","subtitlesMaxLength","highlightWords","responseLanguage","defaultVolume","udemyData","audioProxy","showPiPButton","locale-version","locale-lang","locale-phrases"]}async list(){return this.gmSupport?await GM_listValues():Promise.resolve(this.syncList())}};async function Ct(t,e={}){const o=new AbortController,n=setTimeout((()=>o.abort()),3e3);try{return await fetch(t,{...e,signal:o.signal})}catch(t){return console.error("Fetch timed-out. Error:",t),t}finally{clearTimeout(n)}}const At={async translate(t,e){try{const o=await Ct(`${St.yandex}?${new URLSearchParams({text:t,lang:e})}`);if(o instanceof Error)throw o;const n=await o.json();if(200!==n.code)throw n.message;return n.text[0]}catch(e){return console.error("Error translating text:",e),t}},async detect(t){try{const e=await Ct(`${kt.yandex}?${new URLSearchParams({text:t})}`);if(e instanceof Error)throw e;const o=await e.json();if(200!==o.code)throw o.message;return o.lang??"en"}catch(t){return console.error("Error getting lang from text:",t),"en"}}},Pt={async detect(t){try{const e=await fetch(kt.rustServer,{method:"POST",body:t});if(e instanceof Error)throw e;return await e.text()}catch(t){return console.error("Error getting lang from text:",t),"en"}}},Nt={async translate(t,e="auto",o="ru"){try{const n=await Ct(St.deepl,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams({text:t,source_lang:e,target_lang:o})});if(n instanceof Error)throw n;const i=await n.json();if(200!==i.code)throw i.message;return i.data}catch(e){return console.error("Error translating text:",e),t}}};const It=Object.keys(St),Bt=Object.keys(kt).map((t=>"rustServer"===t?"rust-server":t));async function Rt(t,e,o,n){if(!window.location.hostname.includes("m.youtube.com")&&t?.getAudioTrack){const e=t.getAudioTrack(),o=e?.getLanguageInfo();if("und"!==o?.id)return Wt(o.id.split(".")[0])}const i=e?.captions?.playerCaptionsTracklistRenderer?.captionTracks;if(i?.length){const t=i.find((t=>"asr"===t.kind));if(t&&t.languageCode)return Wt(t.languageCode)}const r=function(t,e){const o=e?e.split("\n").filter((t=>!Zt.test(t))).join(" "):"",n=`${t} ${o}`.slice(0,450);return n.replace(/[^\p{L}\s]+|\s+/gu," ").trim()}(o,n);return Et.log(`Detecting language text: ${r}`),async function(t){switch(await Ot.get("detectService",xt)){case"yandex":return await At.detect(t);case"rust-server":return await Pt.detect(t);default:return"en"}}(r)}function jt(){return/^m\.youtube\.com$/.test(window.location.hostname)}function Dt(){return window.location.pathname.startsWith("/shorts/")?jt()?document.querySelector("#movie_player"):document.querySelector("#shorts-player"):document.querySelector("#movie_player")}function qt(){const t=Dt();return t?.getPlayerResponse?t?.getPlayerResponse?.call()??null:t?.data?.playerResponse??null}function $t(){const t=Dt();return t?.getVideoData?t?.getVideoData?.call()??null:t?.data?.playerResponse?.videoDetails??null}const Ft={isMobile:jt,getPlayer:Dt,getPlayerResponse:qt,getPlayerData:$t,getVideoVolume:function(){const t=Dt();return t?.getVolume?t.getVolume.call()/100:1},getSubtitles:function(){const t=qt();let e=t?.captions?.playerCaptionsTracklistRenderer?.captionTracks??[];return e=e.reduce(((t,e)=>{if("languageCode"in e){const o=e?.languageCode?Wt(e?.languageCode):void 0,n=e?.url||e?.baseUrl;o&&n&&t.push({source:"youtube",language:o,isAutoGenerated:"asr"===e?.kind,url:`${n.startsWith("http")?n:`${window.location.origin}/${n}`}&fmt=json3`})}return t}),[]),Et.log("youtube subtitles:",e),e},getVideoData:async function(){const t=Dt(),e=qt(),o=$t(),{title:n}=o??{},{shortDescription:i,isLive:r}=e?.videoDetails??{};let a=n?await Rt(t,e,n,i):"en";a=Tt.includes(a)?a:"en";const s={isLive:!!r,title:n,description:i,detectedLanguage:a};return Et.log("youtube video data:",s),console.log("[VOT] Detected language: ",s.detectedLanguage),s},setVideoVolume:function(t){const e=Dt();if(e?.setVolume)return e.setVolume(Math.round(100*t)),!0},videoSeek:function(t,e){Et.log("videoSeek",e);const o=(Dt()?.getProgressState()?.seekableEnd||t.currentTime)-e;t.currentTime=o},isMuted:function(){const t=Dt();return!!t?.isMuted&&t.isMuted.call()},isMusic:function(){const t=$t().author,e=$t().title.toUpperCase(),o=e.match(/\w+/g),n=document.body.querySelector("ytd-watch-flexy")?.playerData;return[e,document.URL,t,n?.microformat?.playerMicroformatRenderer.category,n?.title].some((t=>t?.toUpperCase().includes("MUSIC")))||document.body.querySelector("#upload-info #channel-name .badge-style-type-verified-artist")||t&&/(VEVO|Topic|Records|RECORDS|Recordings|AMV)$/.test(t)||t&&/(MUSIC|ROCK|SOUNDS|SONGS)/.test(t.toUpperCase())||o?.length&&["🎵","♫","SONG","SONGS","SOUNDTRACK","LYRIC","LYRICS","AMBIENT","MIX","VEVO","CLIP","KARAOKE","OPENING","COVER","COVERED","VOCAL","INSTRUMENTAL","ORCHESTRAL","DUBSTEP","DJ","DNB","BASS","BEAT","ALBUM","PLAYLIST","DUBSTEP","CHILL","RELAX","CLASSIC","CINEMATIC"].some((t=>o.includes(t)))||["OFFICIAL VIDEO","OFFICIAL AUDIO","FEAT.","FT.","LIVE RADIO","DANCE VER","HIP HOP","ROCK N ROLL","HOUR VER","HOURS VER","INTRO THEME"].some((t=>e.includes(t)))||o?.length&&["OP","ED","MV","OST","NCS","BGM","EDM","GMV","AMV","MMD","MAD"].some((t=>o.includes(t)))}},zt=navigator.language||navigator.userLanguage,Ut=zt?.substr(0,2)?.toLowerCase()??"en",Ht=(t,e)=>{let o=new URL(window.location.href);switch(t){case"piped":case"invidious":case"youtube":if(o.searchParams.has("enablejsapi")){const t=Ft.getPlayer().getVideoUrl();o=new URL(t)}return/(?:watch|embed|shorts|live)\/([^/]+)/.exec(o.pathname)?.[1]||o.searchParams.get("v");case"vk":{const t=/^\/(video|clip)-?\d{8,9}_\d{9}$/.exec(o.pathname),e=o.searchParams.get("z"),n=o.searchParams.get("oid"),i=o.searchParams.get("id");return t?t[0].slice(1):e?e.split("/")[0]:n&&i?`video-${Math.abs(parseInt(n))}_${i}`:null}case"nine_gag":case"9gag":case"gag":return/gag\/([^/]+)/.exec(o.pathname)?.[1];case"twitch":{const t=/([^/]+)\/(?:clip)\/([^/]+)/.exec(o.pathname);if(/^m\.twitch\.tv$/.test(o.hostname))return/videos\/([^/]+)/.exec(o.href)?.[0]||o.pathname.slice(1);if(/^player\.twitch\.tv$/.test(o.hostname))return`videos/${o.searchParams.get("video")}`;if(/^clips\.twitch\.tv$/.test(o.hostname)){const t=document.querySelector("script[type='application/ld+json']"),e=o.pathname.slice(1);if(!t){const t="embed"===e,n=document.querySelector(t?".tw-link[data-test-selector='stream-info-card-component__stream-avatar-link']":".clips-player a:not([class])");if(!n)return;return`${n.href.replace("https://www.twitch.tv/","")}/clip/${t?o.searchParams.get("clip"):e}`}const n=JSON.parse(t.innerText),i=n["@graph"].find((t=>"VideoObject"===t["@type"]))?.creator.url;return`${i.replace("https://www.twitch.tv/","")}/clip/${e}`}return t?t[0]:/(?:videos)\/([^/]+)/.exec(o.pathname)?.[0]}case"proxitok":return/([^/]+)\/video\/([^/]+)/.exec(o.pathname)?.[0];case"tiktok":{let t=/([^/]+)\/video\/([^/]+)/.exec(o.pathname)?.[0];if(!t){const o=e.closest(".xgplayer-playing, .tiktok-web-player"),n=o?.closest('div[data-e2e="recommend-list-item-container"]'),i=n?.querySelector('a[data-e2e="video-author-avatar"]');if(o&&i){const e=o.id?.match(/^xgwrapper-\d+-(.*)$/)?.at(1),n=i.href?.match(/.*(@.*)$/)?.at(1);e&&n&&(t=`${n}/video/${e}`)}}return t}case"vimeo":{const t=o.searchParams.get("app_id"),e=/[^/]+\/[^/]+$/.exec(o.pathname)?.[0]||/[^/]+$/.exec(o.pathname)?.[0];return t?`${e}?app_id=${t}`:e}case"xvideos":return/[^/]+\/[^/]+$/.exec(o.pathname)?.[0];case"pornhub":return o.searchParams.get("viewkey")||/embed\/([^/]+)/.exec(o.pathname)?.[1];case"twitter":return/status\/([^/]+)/.exec(o.pathname)?.[1];case"udemy":case"rumble":case"facebook":return o.pathname.slice(1);case"rutube":return/(?:video|embed)\/([^/]+)/.exec(o.pathname)?.[1];case"coub":return/(?:view|embed)\/([^/]+)/.exec(o.pathname)?.[1]||document.querySelector(".coub.active")?.dataset?.permalink;case"bilibili":{const t=o.searchParams.get("bvid");if(t)return t;let e=/video\/([^/]+)/.exec(o.pathname)?.[1];return e&&null!==o.searchParams.get("p")&&(e+=`/?p=${o.searchParams.get("p")}`),e}case"mail_ru":{const t=o.pathname;if(t.startsWith("/v/")||t.startsWith("/mail/"))return t.slice(1);const e=/video\/embed\/([^/]+)/.exec(t)?.[1];if(!e)return null;const n=document.querySelector(".b-video-controls__mymail-link");return!!n&&n?.href.split("my.mail.ru")?.[1]}case"bitchute":return e.src?.startsWith("blob:")||!e.src?.includes(".mp4")?null:e.src;case"coursera":return/learn\/([^/]+)\/lecture\/([^/]+)/.exec(o.pathname)?.[0];case"eporner":return/video-([^/]+)\/([^/]+)/.exec(o.pathname)?.[0];case"peertube":return/\/w\/([^/]+)/.exec(o.pathname)?.[0];case"dailymotion":{const t=Array.from(document.querySelectorAll("*")).filter((t=>t.innerHTML.trim().includes(".m3u8")));try{let e=t[1].lastChild.src;return/\/video\/(\w+)\.m3u8/.exec(e)?.[1]}catch(t){return console.error("[VOT]",t),!1}}case"trovo":{const t=o.searchParams.get("vid");if(!t)return null;const e=/([^/]+)\/(\d+)/.exec(o.pathname)?.[0];return e?`${e}?vid=${t}`:null}case"yandexdisk":return/\/i\/([^/]+)/.exec(o.pathname)?.[1];case"coursehunter":{const t=/\/course\/([^/]+)/.exec(o.pathname)?.[1];return!!t&&t+o.search}case"ok.ru":return/\/video\/(\d+)/.exec(o.pathname)?.[1];case"googledrive":return o.searchParams.get("docid");case"bannedvideo":return o.searchParams.get("id");case"weverse":return/([^/]+)\/(live|media)\/([^/]+)/.exec(o.pathname)?.[0];case"newgrounds":return/([^/]+)\/(view)\/([^/]+)/.exec(o.pathname)?.[0];case"egghead":return o.pathname.slice(1);case"youku":return/v_show\/id_[\w=]+/.exec(o.pathname)?.[0];case"archive":return/(details|embed)\/([^/]+)/.exec(o.pathname)?.[2];case"patreon":return/posts\/([^/]+)/.exec(o.pathname)?.[0];case"directlink":return o.pathname+o.search;default:return!1}};function Wt(t){return t.toLowerCase().split(/[_;-]/)[0].trim()}function Gt(){return"pictureInPictureEnabled"in document&&document.pictureInPictureEnabled}function Yt(){return"undefined"!=typeof Hls&&Hls?.isSupported()?new Hls({debug:!0,lowLatencyMode:!0,backBufferLength:90}):void 0}const Zt=new RegExp([/(?:https?|ftp):\/\/\S+/g,/https?:\/\/\S+|www\.\S+/gm,/\b\S+\.\S+/gm,/#[^\s#]+/g,/Auto-generated by YouTube/g,/Provided to YouTube by/g,/Released on/g,/0x[a-fA-F0-9]{40}/g,/[13][a-km-zA-HJ-NP-Z1-9]{25,34}/g,/4[0-9AB][1-9A-HJ-NP-Za-km-z]{93}/g,/Paypal/g].map((t=>t.source)).join("|"));async function Jt(t,e={}){try{if(t.includes("api.browser.yandex.ru"))throw new Error("Preventing yandex cors");return await fetch(t,e)}catch(o){return Et.log("GM_fetch preventing cors by GM_xmlhttpRequest",o.message),new Promise(((o,n)=>{GM_xmlhttpRequest({method:"GET",url:t,responseType:"blob",...e,data:e.body,onload:t=>{o(new Response(t.response,{status:t.status,headers:Object.fromEntries(t.responseHeaders.trim().split("\r\n").map((t=>{let e=t.split(": ");if("set-cookie"!==e?.[0])return[e.shift(),e.join(": ")]})).filter((t=>t)))}))},ontimeout:()=>n(new Error("fetch timeout")),onerror:t=>n(t),onabort:()=>n(new Error("fetch abort"))})}))}}const Kt=["auto","en","ru","af","am","ar","az","bg","bn","bs","ca","cs","cy","da","de","el","es","et","eu","fa","fi","fr","gl","hi","hr","hu","hy","id","it","ja","jv","kk","km","kn","ko","lo","mk","ml","mn","ms","mt","my","ne","nl","pa","pl","pt","ro","si","sk","sl","sq","sr","su","sv","sw","tr","uk","ur","uz","vi","zh","zu"],Xt=new class{lang="en";locale={};gmValues=["locale-phrases","locale-lang","locale-version","locale-lang-override"];constructor(){const t=Ot.syncGet("locale-lang-override","auto");this.lang=t&&"auto"!==t?t:(navigator.language||navigator.userLanguage)?.substr(0,2)?.toLowerCase()??"en",this.setLocaleFromJsonString(Ot.syncGet("locale-phrases",""))}reset(){for(let t=0;t<this.gmValues.length;t++)Ot.syncDelete(this.gmValues[t])}async update(t=!1){const e=await Ot.get("locale-version",0,!0),o=await Ot.get("locale-lang");if(t||4!==e||o!==this.lang){Et.log("Updating locale...");try{const t=await Jt(`https://raw.githubusercontent.com/ilyhalight/voice-over-translation/dev/src/localization/locales/${this.lang}.json`);if(200!==t.status)throw t.status;const e=await t.text();await Ot.set("locale-phrases",e),this.setLocaleFromJsonString(e);const o=this.getFromLocale(this.locale,"__version__");"number"==typeof o&&await Ot.set("locale-version",o),await Ot.set("locale-lang",this.lang)}catch(t){console.error("[VOT] [localizationProvider] failed get locale, cause:",t),this.setLocaleFromJsonString(await Ot.get("locale-phrases",""))}}}setLocaleFromJsonString(t){try{this.locale=JSON.parse(t)??{}}catch(t){console.error("[VOT] [localizationProvider]",t),this.locale={}}}getFromLocale(t,e){const o=e.split(".").reduce(((t,e)=>{if("object"==typeof t&&t)return t[e]}),t);return void 0===o&&console.warn("[VOT] [localizationProvider] locale",t,"doesn't contain key",e),o}getDefault(t){return this.getFromLocale(Mt,t)??t}get(t){return this.getFromLocale(this.locale,t)??this.getFromLocale(Mt,t)??t}};var Qt=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),te=__webpack_require__.n(Qt),ee=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),oe=__webpack_require__.n(ee),ne=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),ie=__webpack_require__.n(ne),re=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),ae=__webpack_require__.n(re),se=__webpack_require__("./node_modules/webpack-monkey/lib/node/deps/style-loader-insertStyleElement.js"),le=__webpack_require__.n(se),ue=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),de=__webpack_require__.n(ue),ce=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles/main.scss"),he={};he.styleTagTransform=de(),he.setAttributes=ae(),he.insert=ie().bind(null,"head"),he.domAPI=oe(),he.insertStyleElement=le();te()(ce.A,he);ce.A&&ce.A.locals&&ce.A.locals;const pe="#UNDEFINED";function ge(t){const e=document.createElement("vot-block");return e.classList.add("vot-icon-button"),e.innerHTML=t,e}function me(t){const e=parseFloat(t.value),o=""===t.min?0:parseFloat(t.min),n=(e-o)/((""===t.max?100:parseFloat(t.max))-o);t.parentElement.setAttribute("style",`--vot-progress: ${n}`)}function ve(t,e="",o=" ",n=!1){const i=document.createElement("vot-block");i.classList.add("vot-textfield");const r=document.createElement(n?"textarea":"input");r.placeholder=o,r.value=e;const a=document.createElement("span");return a.innerHTML=t,i.appendChild(r),i.appendChild(a),{container:i,input:r,label:a}}function fe(t){const e=document.createElement("vot-block");e.classList.add("vot-dialog-container"),e.hidden=!0;const o=document.createElement("vot-block");o.classList.add("vot-dialog-backdrop");const n=document.createElement("vot-block");n.classList.add("vot-dialog");const i=document.createElement("vot-block");i.classList.add("vot-dialog-content-wrapper");const r=document.createElement("vot-block");r.classList.add("vot-dialog-header-container");const a=document.createElement("vot-block");a.classList.add("vot-dialog-body-container");const s=document.createElement("vot-block");s.classList.add("vot-dialog-footer-container");const l=document.createElement("vot-block");l.classList.add("vot-dialog-title-container");const u=ge('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="100%" viewBox="0 -960 960 960"><path d="M480-424 284-228q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536-480l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480-424Z"/></svg>');u.classList.add("vot-dialog-close-button"),o.onclick=u.onclick=()=>{e.hidden=!0};const d=document.createElement("vot-block");return d.classList.add("vot-dialog-title"),d.innerHTML=t,e.appendChild(o),e.appendChild(n),n.appendChild(i),i.appendChild(r),i.appendChild(a),i.appendChild(s),r.appendChild(l),r.appendChild(u),l.appendChild(d),{container:e,backdrop:o,dialog:n,contentWrapper:i,headerContainer:r,bodyContainer:a,footerContainer:s,titleContainer:l,closeButton:u,title:d}}function be(t,e,o,n={}){const{onSelectCb:i=function(){},labelElement:r=""}=n;let a=[];const s=document.createElement("vot-block");s.classList.add("vot-select"),r&&s.appendChild(r);const l=document.createElement("vot-block");l.classList.add("vot-select-outer");const u=document.createElement("span");u.classList.add("vot-select-title"),u.innerText=t,void 0===t&&(u.innerText=o.find((t=>!0===t.selected))?.label);const d=document.createElement("vot-block");d.classList.add("vot-select-arrow-icon"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 14.975q-.2 0-.375-.062T11.3 14.7l-4.6-4.6q-.275-.275-.275-.7t.275-.7q.275-.275.7-.275t.7.275l3.9 3.9l3.9-3.9q.275-.275.7-.275t.7.275q.275.275.275.7t-.275.7l-4.6 4.6q-.15.15-.325.213t-.375.062Z"/></svg>',l.append(u,d),l.onclick=()=>{const t=fe(e);t.container.classList.add("vot-dialog-temp"),t.container.hidden=!1,document.documentElement.appendChild(t.container);const n=document.createElement("vot-block");n.classList.add("vot-select-content-list");for(const t of o){const e=document.createElement("vot-block");e.classList.add("vot-select-content-item"),e.innerText=t.label,e.dataset.votSelected=t.selected,e.dataset.votValue=t.value,t.disabled&&(e.inert=!0),e.onclick=async r=>{if(r.target.inert)return;const a=n.childNodes;for(let t of a)t.dataset.votSelected=!1;for(let e of o)e.selected=e.value===t.value;e.dataset.votSelected=!0,u.innerText=t.label,await i(r)},n.appendChild(e)}const r=ve(Xt.get("searchField"));r.input.oninput=t=>{const e=t.target.value.toLowerCase();for(let t=0;t<a.length;t++){const o=a[t];o.hidden=!o.innerText.toLowerCase().includes(e)}},t.bodyContainer.append(r.container,n),a=n.childNodes,t.backdrop.onclick=t.closeButton.onclick=()=>{t.container.remove(),a=[]}},s.append(l);return{container:s,title:u,arrowIcon:d,labelElement:r,setTitle:t=>{u.innerText=t},setSelected:t=>{const e=Array.from(a).filter((t=>!t.inert));for(let o=0;o<e.length;o++){const n=e[o];n.dataset.votSelected=n.dataset.votValue===t}for(let e=0;e<o.length;e++){const n=o[e];n.selected=String(n.value)===t}},updateItems:t=>{o=t}}}const we={createHeader:function(t,e=4){const o=document.createElement("vot-block");return o.classList.add("vot-header"),o.classList.add(`vot-header-level-${e}`),o.innerHTML=t,o},createInformation:function(t,e){const o=document.createElement("vot-block");o.classList.add("vot-info");const n=document.createElement("vot-block");n.innerHTML=t;const i=document.createElement("vot-block");return i.innerHTML=e,o.appendChild(n),o.appendChild(i),{container:o,header:n,value:i}},createButton:function(t){const e=document.createElement("vot-block");return e.classList.add("vot-button"),e.innerHTML=t,e},createTextButton:function(t){const e=document.createElement("vot-block");return e.classList.add("vot-text-button"),e.innerHTML=t,e},createOutlinedButton:function(t){const e=document.createElement("vot-block");return e.classList.add("vot-outlined-button"),e.innerHTML=t,e},createIconButton:ge,createCheckbox:function(t,e=!1){const o=document.createElement("label");o.classList.add("vot-checkbox");const n=document.createElement("input");n.type="checkbox",n.checked=Boolean(e);const i=document.createElement("span");return i.innerHTML=t,o.appendChild(n),o.appendChild(i),{container:o,input:n,label:i}},createSlider:function(t,e=50,o=0,n=100){const i=document.createElement("vot-block");i.classList.add("vot-slider");const r=document.createElement("input");r.type="range",r.min=o,r.max=n,r.value=e;const a=document.createElement("span");return a.innerHTML=t,i.appendChild(r),i.appendChild(a),r.addEventListener("input",(t=>me(t.target))),me(r),{container:i,input:r,label:a}},createTextfield:ve,createDialog:fe,createVOTButton:function(t){const e=document.createElement("vot-block");e.classList.add("vot-segmented-button");const o=document.createElement("vot-block");o.classList.add("vot-segment"),o.classList.add("vot-translate-button"),o.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path id="vot-translate-icon" fill-rule="evenodd" d="M15.778 18.95L14.903 21.375C14.8364 21.5583 14.7197 21.7083 14.553 21.825C14.3864 21.9417 14.203 22 14.003 22C13.6697 22 13.3989 21.8625 13.1905 21.5875C12.9822 21.3125 12.9447 21.0083 13.078 20.675L16.878 10.625C16.9614 10.4417 17.0864 10.2917 17.253 10.175C17.4197 10.0583 17.603 10 17.803 10H18.553C18.753 10 18.9364 10.0583 19.103 10.175C19.2697 10.2917 19.3947 10.4417 19.478 10.625L23.278 20.7C23.4114 21.0167 23.378 21.3125 23.178 21.5875C22.978 21.8625 22.7114 22 22.378 22C22.1614 22 21.9739 21.9375 21.8155 21.8125C21.6572 21.6875 21.5364 21.525 21.453 21.325L20.628 18.95H15.778ZM19.978 17.2H16.378L18.228 12.25L19.978 17.2Z"></path><path d="M9 14L4.7 18.3C4.51667 18.4833 4.28333 18.575 4 18.575C3.71667 18.575 3.48333 18.4833 3.3 18.3C3.11667 18.1167 3.025 17.8833 3.025 17.6C3.025 17.3167 3.11667 17.0833 3.3 16.9L7.65 12.55C7.01667 11.85 6.4625 11.125 5.9875 10.375C5.5125 9.625 5.1 8.83333 4.75 8H6.85C7.15 8.6 7.47083 9.14167 7.8125 9.625C8.15417 10.1083 8.56667 10.6167 9.05 11.15C9.78333 10.35 10.3917 9.52917 10.875 8.6875C11.3583 7.84583 11.7667 6.95 12.1 6H2C1.71667 6 1.47917 5.90417 1.2875 5.7125C1.09583 5.52083 1 5.28333 1 5C1 4.71667 1.09583 4.47917 1.2875 4.2875C1.47917 4.09583 1.71667 4 2 4H8V3C8 2.71667 8.09583 2.47917 8.2875 2.2875C8.47917 2.09583 8.71667 2 9 2C9.28333 2 9.52083 2.09583 9.7125 2.2875C9.90417 2.47917 10 2.71667 10 3V4H16C16.2833 4 16.5208 4.09583 16.7125 4.2875C16.9042 4.47917 17 4.71667 17 5C17 5.28333 16.9042 5.52083 16.7125 5.7125C16.5208 5.90417 16.2833 6 16 6H14.1C13.75 7.18333 13.275 8.33333 12.675 9.45C12.075 10.5667 11.3333 11.6167 10.45 12.6L12.85 15.05L12.1 17.1L9 14Z"></path><path id="vot-translating-icon" style="display:none" d="M19.8081 16.3697L18.5842 15.6633V13.0832C18.5842 12.9285 18.5228 12.7801 18.4134 12.6707C18.304 12.5613 18.1556 12.4998 18.0009 12.4998C17.8462 12.4998 17.6978 12.5613 17.5884 12.6707C17.479 12.7801 17.4176 12.9285 17.4176 13.0832V15.9998C17.4176 16.1022 17.4445 16.2028 17.4957 16.2915C17.5469 16.3802 17.6205 16.4538 17.7092 16.505L19.2247 17.38C19.2911 17.4189 19.3645 17.4443 19.4407 17.4547C19.5169 17.4652 19.5945 17.4604 19.6688 17.4407C19.7432 17.4211 19.813 17.3869 19.8741 17.3402C19.9352 17.2934 19.9864 17.2351 20.0249 17.1684C20.0634 17.1018 20.0883 17.0282 20.0982 16.952C20.1081 16.8757 20.1028 16.7982 20.0827 16.7239C20.0625 16.6497 20.0279 16.5802 19.9808 16.5194C19.9336 16.4586 19.8749 16.4077 19.8081 16.3697ZM18.0015 10C16.8478 10 15.6603 10.359 14.7011 11C13.7418 11.641 12.9415 12.4341 12.5 13.5C12.0585 14.5659 11.8852 16.0369 12.1103 17.1684C12.3353 18.3 12.8736 19.4942 13.6894 20.31C14.5053 21.1258 15.8684 21.7749 17 22C18.1316 22.2251 19.4341 21.9415 20.5 21.5C21.5659 21.0585 22.359 20.2573 23 19.298C23.641 18.3387 24.0015 17.1537 24.0015 16C23.9998 14.4534 23.5951 13.0936 22.5015 12C21.4079 10.9064 19.5481 10.0017 18.0015 10ZM18.0009 20.6665C17.0779 20.6665 16.1757 20.3928 15.4082 19.88C14.6408 19.3672 14.0427 18.6384 13.6894 17.7857C13.3362 16.933 13.2438 15.9947 13.4239 15.0894C13.604 14.1842 14.0484 13.3527 14.7011 12.7C15.3537 12.0474 16.1852 11.6029 17.0905 11.4228C17.9957 11.2428 18.934 11.3352 19.7867 11.6884C20.6395 12.0416 21.3683 12.6397 21.8811 13.4072C22.3939 14.1746 22.6676 15.0769 22.6676 15.9998C22.666 17.237 22.1738 18.4231 21.299 19.298C20.4242 20.1728 19.2381 20.665 18.0009 20.6665Z"></path></svg>';const n=document.createElement("vot-block");n.classList.add("vot-separator");const i=document.createElement("vot-block");i.classList.add("vot-segment-only-icon"),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M120-520q-17 0-28.5-11.5T80-560q0-17 11.5-28.5T120-600h104L80-743q-12-12-12-28.5T80-800q12-12 28.5-12t28.5 12l143 144v-104q0-17 11.5-28.5T320-800q17 0 28.5 11.5T360-760v200q0 17-11.5 28.5T320-520H120Zm40 360q-33 0-56.5-23.5T80-240v-160q0-17 11.5-28.5T120-440q17 0 28.5 11.5T160-400v160h280q17 0 28.5 11.5T480-200q0 17-11.5 28.5T440-160H160Zm680-280q-17 0-28.5-11.5T800-480v-240H480q-17 0-28.5-11.5T440-760q0-17 11.5-28.5T480-800h320q33 0 56.5 23.5T880-720v240q0 17-11.5 28.5T840-440ZM600-160q-17 0-28.5-11.5T560-200v-120q0-17 11.5-28.5T600-360h240q17 0 28.5 11.5T880-320v120q0 17-11.5 28.5T840-160H600Z"/></svg>';const r=document.createElement("vot-block");r.classList.add("vot-separator");const a=document.createElement("vot-block");a.classList.add("vot-segment-only-icon"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M480-160q-33 0-56.5-23.5T400-240q0-33 23.5-56.5T480-320q33 0 56.5 23.5T560-240q0 33-23.5 56.5T480-160Zm0-240q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm0-240q-33 0-56.5-23.5T400-720q0-33 23.5-56.5T480-800q33 0 56.5 23.5T560-720q0 33-23.5 56.5T480-640Z"/></svg>';const s=document.createElement("span");return s.classList.add("vot-segment-label"),s.innerHTML=t,e.appendChild(o),e.appendChild(n),e.appendChild(i),e.appendChild(r),e.appendChild(a),o.appendChild(s),{container:e,translateButton:o,separator:n,pipButton:i,separator2:r,menuButton:a,label:s}},createVOTMenu:function(t){const e=document.createElement("vot-block");e.classList.add("vot-menu"),e.hidden=!0;const o=document.createElement("vot-block");o.classList.add("vot-menu-content-wrapper");const n=document.createElement("vot-block");n.classList.add("vot-menu-header-container");const i=document.createElement("vot-block");i.classList.add("vot-menu-body-container");const r=document.createElement("vot-block");r.classList.add("vot-menu-footer-container");const a=document.createElement("vot-block");a.classList.add("vot-menu-title-container");const s=document.createElement("vot-block");return s.classList.add("vot-menu-title"),s.innerHTML=t,e.appendChild(o),o.appendChild(n),o.appendChild(i),o.appendChild(r),n.appendChild(a),a.appendChild(s),{container:e,contentWrapper:o,headerContainer:n,bodyContainer:i,footerContainer:r,titleContainer:a,title:s}},createVOTSelectLabel:function(t){const e=document.createElement("span");return e.classList.add("vot-select-label"),e.innerText=t,e},createVOTSelect:be,createVOTLanguageSelect:function(t){const{fromTitle:e=pe,fromDialogTitle:o=pe,fromItems:n=[],fromOnSelectCB:i=null,toTitle:r=pe,toDialogTitle:a=pe,toItems:s=[],toOnSelectCB:l=null}=t,u=document.createElement("vot-block");u.classList.add("vot-lang-select");const d=be(e,o,n,{onSelectCb:i}),c=document.createElement("vot-block");c.classList.add("vot-lang-select-icon"),c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M647-440H200q-17 0-28.5-11.5T160-480q0-17 11.5-28.5T200-520h447L451-716q-12-12-11.5-28t12.5-28q12-11 28-11.5t28 11.5l264 264q6 6 8.5 13t2.5 15q0 8-2.5 15t-8.5 13L508-188q-11 11-27.5 11T452-188q-12-12-12-28.5t12-28.5l195-195Z"/></svg>';const h=be(r,a,s,{onSelectCb:l});return u.append(d.container,c,h.container),{container:u,fromSelect:d,icon:c,toSelect:h}},updateSlider:me};class ye extends Error{constructor(t){super(Xt.getDefault(t)),this.name="VOTLocalizedError",this.unlocalizedMessage=t,this.localizedMessage=Xt.get(t)}}function xe(t){const e=t.startMs+t.durationMs;return t.tokens.reduce(((o,n,i)=>{const r=t.tokens[i+1];let a;o.length>0&&(a=o[o.length-1]);const s=a?.alignRange?.end??0,l=s+n.text.length;if(n.alignRange={start:s,end:l},o.push(n),r){const t=n.startMs+n.durationMs,i=r.startMs?r.startMs-t:e-t;o.push({text:" ",startMs:t,durationMs:i,alignRange:{start:l,end:l+1}})}return o}),[])}function ke(t,e){const o=t.text.split(/([\n \t])/).reduce(((t,o)=>{if(o.length){const n=t[t.length-1]??e,i=n?.alignRange?.end??0,r=i+o.length;t.push({text:o,alignRange:{start:i,end:r}})}return t}),[]),n=Math.floor(t.durationMs/o.length),i=t.startMs+t.durationMs;return o.map(((e,r)=>{const a=r===o.length-1,s=t.startMs+n*r;return{...e,startMs:s,durationMs:a?i-s:n}}))}function Se(t){let e=Math.floor(t/3600),o=Math.floor(t%3600/60),n=Math.floor(t%60),i=Math.floor(t%1*1e3);return`${e.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")},${i.toString().padStart(3,"0")}`}async function Te(t){const e=new Promise((t=>setTimeout((()=>t({containsTokens:!1,subtitles:[]})),5e3))),o=(async()=>{try{const e=await Jt(t.url);return await e.json()}catch(t){return console.error("[VOT] Failed to fetch subtitles. Reason:",t),{containsTokens:!1,subtitles:[]}}})();let n=await Promise.race([e,o]);return"youtube"===t.source&&(n=function(t){const e={containsTokens:!1,subtitles:[]};if("object"!=typeof t||!("events"in t)||!Array.isArray(t.events))return console.error("[VOT] Failed to format youtube subtitles",t),e;for(let o=0;o<t.events.length;o++){if(!t.events[o].segs)continue;const n=t.events[o].segs.map((t=>t.utf8.replace(/^( +| +)$/g,""))).join(" ");let i=t.events[o].dDurationMs;t.events[o+1]&&t.events[o].tStartMs+t.events[o].dDurationMs>t.events[o+1].tStartMs&&(i=t.events[o+1].tStartMs-t.events[o].tStartMs),"\n"!==n&&e.subtitles.push({text:n,startMs:t.events[o].tStartMs,durationMs:i})}return e}(n)),n.subtitles=function(t,e){const o=[];let n;for(let i=0;i<t.subtitles.length;i++){const r=t.subtitles[i];let a;if(r?.tokens?.length){if("yandex"!==e)return console.warn("[VOT] Unsupported subtitles tokens type: ",e),t.containsTokens=!1,null;a=xe(r)}else a=ke(r,n);n=a[a.length-1],o.push({...r,tokens:a})}return t.containsTokens=!0,o}(n,t.source),console.log("[VOT] subtitles:",n),n}async function Le(t,e,o,n){const i="youtube"===e.host?Ft.getSubtitles():[];let r=!1;const a=await Promise.race([new Promise((t=>{setTimeout((()=>{r||(console.error("[VOT] Failed get yandex subtitles. Reason: timeout"),t([]))}),5e3)})),new Promise((i=>{t.getSubtitles({url:`${e.url}${o}`,requestLang:n}).then((t=>{console.log("[VOT] Subtitles response: ",t),t.waiting&&(console.error("[VOT] Failed get yandex subtitles"),r=!0,i([]));let e=t.subtitles??[];e=e.reduce(((t,e)=>(e.language&&!t.find((t=>{if("yandex"===t.source&&t.language===e.language&&!t.translatedFromLanguage)return t}))&&t.push({source:"yandex",language:e.language,url:e.url}),e.translatedLanguage&&t.push({source:"yandex",language:e.translatedLanguage,translatedFromLanguage:e.language,url:e.translatedUrl}),t)),[]),r=!0,i(e)}))}))]),s=[...a,...i].sort(((t,e)=>{if(t.source!==e.source)return"yandex"===t.source?-1:1;if(t.language!==e.language&&(t.language===Ut||e.language===Ut))return t.language===Ut?-1:1;if("yandex"===t.source){if(t.translatedFromLanguage!==e.translatedFromLanguage)return t.translatedFromLanguage&&e.translatedFromLanguage?t.translatedFromLanguage===n?-1:1:t.language===e.language?t.translatedFromLanguage?1:-1:t.translatedFromLanguage?-1:1;if(!t.translatedFromLanguage)return t.language===n?-1:1}return"youtube"===t.source&&t.isAutoGenerated!==e.isAutoGenerated?t.isAutoGenerated?1:-1:0}));return console.log("[VOT] subtitles list",s),s}class _e{dragging=!1;subtitlesContainerRect=null;containerRect=null;offsetX=null;offsetY=null;lastContent=null;highlightWords=!1;subtitles=null;maxLength=300;maxLengthRegexp=/.{1,300}(?:\s|$)/g;constructor(t,e,o){this.site=o,this.video=t,"youtube"===this.site.host&&"mobile"!==this.site.additionalData?this.container=e.parentElement:this.container=e,this.votSubtitlesContainer=document.createElement("vot-block"),this.votSubtitlesContainer.classList.add("vot-subtitles-widget"),this.container.appendChild(this.votSubtitlesContainer),this.onMouseDownBound=this.onMouseDown.bind(this),this.onMouseUpBound=this.onMouseUp.bind(this),this.onMouseMoveBound=this.onMouseMove.bind(this),this.onTimeUpdateBound=this.onTimeUpdate.bind(this),document.addEventListener("mousedown",this.onMouseDownBound),document.addEventListener("mouseup",this.onMouseUpBound),document.addEventListener("mousemove",this.onMouseMoveBound),this.video?.addEventListener("timeupdate",this.onTimeUpdateBound)}release(){this.video?.removeEventListener("timeupdate",this.onTimeUpdateBound),document.removeEventListener("mousedown",this.onMouseDownBound),document.removeEventListener("mouseup",this.onMouseUpBound),document.removeEventListener("mousemove",this.onMouseMoveBound),this.votSubtitlesContainer.remove()}onMouseDown(t){this.votSubtitlesContainer.contains(t.target)&&(this.subtitlesContainerRect=this.votSubtitlesContainer.getBoundingClientRect(),this.containerRect=this.container.getBoundingClientRect(),this.offsetX=t.clientX-this.subtitlesContainerRect.x,this.offsetY=t.clientY-this.subtitlesContainerRect.y,this.dragging=!0)}onMouseUp(){this.dragging=!1}onMouseMove(t){if(this.dragging){t.preventDefault();const e=t.clientX-this.offsetX,o=t.clientY-this.offsetY,n=o>=this.containerRect.top,i=o+this.subtitlesContainerRect.height<=this.containerRect.bottom,r=e>=this.containerRect.left,a=e+this.subtitlesContainerRect.width<=this.containerRect.right;this.votSubtitlesContainer.style.top=n&&i?o-this.containerRect.y+"px":n?this.containerRect.height-this.subtitlesContainerRect.height+"px":"0px",this.votSubtitlesContainer.style.left=r&&a?e-this.containerRect.x+"px":r?this.containerRect.width-this.subtitlesContainerRect.width+"px":"0px"}}onTimeUpdate(){this.update()}setContent(t){t&&this.video?(this.subtitles=t,this.update()):(this.subtitles=null,this.votSubtitlesContainer.innerHTML="")}setMaxLength(t){"number"==typeof t&&t&&(this.maxLength=t,this.maxLengthRegexp=new RegExp(`.{1,${t}}(?:\\s|$)`,"g"),this.update())}setHighlightWords(t){this.highlightWords!==!!t&&(this.highlightWords=!!t,this.update())}update(){if(!this.video)return;let t="",e=this.highlightWords&&this.subtitles?.containsTokens;const o=1e3*this.video.currentTime,n=this.subtitles?.subtitles?.findLast((t=>t.startMs<o&&o<t.startMs+t.durationMs));if(n){let{tokens:i}=n;if(i.at(-1).alignRange.end>this.maxLength){let t=[],e=0,n=0,r=0;for(let o=0;o<i.length+1;o++){if(r+=i[o]?.text?.length??0,!i[o]||r>this.maxLength){let a=i.slice(e,n+1);a.at(0)&&" "===a.at(0).text&&(a=a.slice(1)),a.at(-1)&&" "===a.at(-1).text&&(a=a.slice(0,a.length-1)),t.push({startMs:i[e].startMs,durationMs:i[n].startMs+i[n].durationMs-i[e].startMs,tokens:a}),e=o,r=0}n=o}for(let e=0;e<t.length;e++){const n=t[e];if(n.startMs<o&&o<n.startMs+n.durationMs){i=n.tokens;break}}}for(let n=0;n<i.length;n++){const r=i[n],a=r.startMs+r.durationMs/2;t+=`<span ${e&&(o>a||o>r.startMs-100&&a-o<275)?'class="passed"':""}>${r.text}</span>`}}t!==this.lastContent&&(this.lastContent=t,this.votSubtitlesContainer.innerHTML=t?`<vot-block class="vot-subtitles">${t.replace("\\n","<br>")}</vot-block>`:"")}}const Me={getVideoData:async function(){const t=window.course_id??document.querySelector('input[name="course_id"]')?.value,e=window.lessons??await async function(t){const e=await fetch(`https://coursehunter.net/api/v1/course/${t}/lessons`);return await e.json()}(t),o=parseInt(document.querySelector(".lessons-item_active")?.dataset?.index??1),n=e?.[o-1],{file:i,duration:r}=n;return Et.log("coursehunter course data:",e),{url:i,duration:r}}};function Ve(){return Ee()?.player}function Ee(){return document.querySelector(".vjs-v6")}const Oe={getPlayer:Ee,getPlayerData:Ve,getVideoData:async function(t="en"){let e=null;const o=Ve(),{duration:n}=o?.cache_||{},{courseId:i,tracks:r,sources:a}=o?.options_||{},s=function(t){const e=t?.find((t=>"video/mp4"===t.type));return e?.src}(a),l=await async function(t){const e=await fetch(`https://www.coursera.org/api/onDemandCourses.v1/${t}`),o=await e.json();return o?.elements?.[0]}(i);let u=l?.primaryLanguageCodes?.[0];u=u?Wt(u):"en",Tt.includes(u)||(u="en");const d=function(t,e,o){let n=t?.find((t=>Wt(t.srclang)===e));return n||(n=t?.find((t=>Wt(t.srclang)===o))||t?.[0]),n?.src}(r,u,t);console.log(`videoURL: ${s}, subtitlesURL: ${d}`),d&&s?e=[{target:"video_file_url",targetUrl:s},{target:"subtitles_file_url",targetUrl:`https://www.coursera.org${d}`}]:s&&!d?(console.warn("[VOT] Subtitles files not found. Using the link only to the video file."),e={url:s}):console.error(`Failed to find subtitlesURL or videoURL. videoURL: ${s}, subtitlesURL: ${d}`);const c={duration:n,detectedLanguage:u,translationHelp:e};return Et.log("coursera video data:",c),console.log("[VOT] Detected language: ",c.detectedLanguage),c}},Ce="https://www.udemy.com/api-2.0",Ae=2592e6;async function Pe(t){const e=await fetch(`${Ce}/courses/${t}/?`+new URLSearchParams({"fields[course]":"locale",use_remote_version:"true",caching_intent:"true"}));return await e.json()}async function Ne(t,e,o){if(!(n=t.expires,n+Ae>(new Date).getTime()&&t.accessToken))return void console.error(Xt.get("udemyAccessTokenExpired"));var n;const i=`Bearer ${t.accessToken}`,r=await fetch(`${Ce}/users/me/subscribed-courses/${e}/lectures/${o}/?`+new URLSearchParams({"fields[lecture]":"asset","fields[asset]":"length,media_sources,captions"}),{headers:{"x-udemy-authorization":i,authorization:i}});return await r.json()}function Ie(){return Re()?.player}function Be(){const t=document.querySelector(".ud-app-loader[data-module-id='course-taking']")?.dataset?.moduleArgs;return t?JSON.parse(t):(console.error(Xt.get("udemyModuleArgsNotFound")),{})}function Re(){return document.querySelector(".vjs-v7")}const je={getPlayer:Re,getPlayerData:Ie,getVideoData:async function(t,e="en"){let o=null;const n=Ie();Et.log("udemyData",t);const i=Be();Et.log("moduleData: ",i);const r=i.courseId,a=/learn\/lecture\/([^/]+)/.exec(window.location.pathname)?.[1];Et.log(`CourseId: ${r}, lectureId: ${a}`);const s=await Pe(r);Et.log("courseLang Data:",s);const l=await Ne(t,r,a);console.log("lecture Data:",l);let u=s?.locale?.locale;u=u?Wt(u):"en",Tt.includes(u)||(u="en");const d=l?.asset?.length||n?.cache_?.duration,c=function(t){const e=t?.find((t=>"video/webm"===t.type||"video/mp4"===t.type));return e?.src}(l?.asset?.media_sources)||function(){const t=Re()?.querySelector("video")?.src;return!t?.startsWith("blob:")&&t}(),h=function(t,e,o){let n=t?.find((t=>Wt(t.locale_id)===e));return n||(n=t?.find((t=>Wt(t.locale_id)===o))||t?.[0]),n?.url}(l?.asset?.captions,u,e);console.log(`videoURL: ${c}, subtitlesURL: ${h}`),h&&c?o=[{target:"video_file_url",targetUrl:c},{target:"subtitles_file_url",targetUrl:h}]:c&&!h?(console.warn("[VOT] Subtitles files not found. Using the link only to the video file."),o={url:c}):console.error(`Failed to find subtitlesURL or videoURL. videoURL: ${c}, subtitlesURL: ${h}`);const p={duration:d,detectedLanguage:u,translationHelp:o};return Et.log("udemy video data:",p),console.log("[VOT] Detected language: ",p.detectedLanguage),p},getModuleData:Be,getCourseLang:Pe,getLectureData:Ne};const De={getVideoData:async function(t){const e=await async function(t){return await fetch("https://api.banned.video/graphql",{method:"POST",body:JSON.stringify({operationName:"GetVideo",query:"query GetVideo($id: String!) {\n          getVideo(id: $id) {\n            ...DisplayVideoFields\n            videoUrl: directUrl\n            live\n          }\n        }\n\n        fragment DisplayVideoFields on Video {\n          title\n          description: summary\n          duration: videoDuration\n        }",variables:{id:t}}),headers:{"User-Agent":"bannedVideoFrontEnd","apollographql-client-name":"banned-web","apollographql-client-version":"1.3","content-type":"application/json"}}).then((t=>t.json())).catch((t=>(console.error(t),{data:{getVideo:{}}})))}(t);Et.log("banned.video video data:",e);const{videoUrl:o,duration:n,live:i,description:r,title:a}=e.data.getVideo;return{url:o,duration:n,live:i,title:a,description:r}}};const qe="https://global.apis.naver.com/weverse/wevweb",$e="be4d79eb8fc7bd008ee82c8ec4ff6fd4",Fe="1b9cb6378d959b45714bec49971ade22e6e24e42";async function ze(t){const e=Date.now();let o=t.substring(0,Math.min(255,t.length))+e;const n=await async function(t,e){try{const o=new TextEncoder("utf-8");e=o.encode(e);const n=await window.crypto.subtle.importKey("raw",o.encode(t),{name:"HMAC",hash:{name:"SHA-1"}},!1,["sign","verify"]),i=await window.crypto.subtle.sign("HMAC",n,e);return btoa(String.fromCharCode(...new Uint8Array(i)))}catch(t){return console.error(t),!1}}(Fe,o);return{wmsgpad:e,wmd:n}}function Ue(){return{appId:$e,language:"en",os:"WEB",platform:"WEB",wpf:"pc"}}const He={getVideoData:async function(){const t=/([^/]+)\/(live|media)\/([^/]+)/.exec(new URL(window.location).pathname)?.[3],e=await async function(t){const e=`/post/v1.0/post-${t}/preview?`+new URLSearchParams({fieldSet:"postForPreview",...Ue()}),o=await ze(e);try{const t=await fetch(qe+e+"&"+new URLSearchParams(o));return await t.json()}catch(t){return console.error(t),!1}}(t);if(!e)return;Et.log("weverse video preview data:",e);const{videoId:o,serviceId:n,infraVideoId:i}=e.extension.video;if(!(o&&n&&i))return!1;const r=await async function(t){const e=`/video/v1.1/vod/${t}/inKey?`+new URLSearchParams({gcc:"RU",...Ue()}),o=await ze(e);try{const t=await fetch(qe+e+"&"+new URLSearchParams(o),{method:"POST"});return await t.json()}catch(t){return console.error(t),!1}}(o);if(Et.log("weverse video inKey data:",e),!r)return!1;const a=await async function(t,e,o){const n=Date.now();try{const i=await fetch(`https://global.apis.naver.com/rmcnmv/rmcnmv/vod/play/v2.0/${t}?`+new URLSearchParams({key:e,sid:o,nonce:n,devt:"html5_pc",prv:"N",aup:"N",stpb:"N",cpl:"en",env:"prod",lc:"en",adi:JSON.stringify([{adSystem:null}]),adu:"/"}));return await i.json()}catch(t){return console.error(t),!1}}(i,r.inKey,n);Et.log("weverse video info:",a);const s=a.videos.list.find((t=>!1===t.useP2P&&t.source.includes(".mp4")));return!!s&&{url:s.source,duration:s.duration}}},We=[{additionalData:"mobile",host:"youtube",url:"https://youtu.be/",match:/^m.youtube.com$/,selector:"shorts-video #player"},{additionalData:"mobile",host:"youtube",url:"https://youtu.be/",match:/^m.youtube.com$/,selector:".player-container"},{host:"youtube",url:"https://youtu.be/",match:/^(www.)?youtube(-nocookie|kids)?.com$/,selector:".html5-video-container:not(#inline-player *)"},{host:"tiktok",url:"https://www.tiktok.com/",match:/^(www.)?tiktok.com$/,selector:null},{host:"proxitok",url:"https://www.tiktok.com/",match:mt,selector:".column.has-text-centered"},{host:"twitch",url:"https://twitch.tv/",match:[/^m.twitch.tv$/,/^www.twitch.tv$/,/^clips.twitch.tv$/,/^player.twitch.tv$/],selector:".video-ref, main > div > section > div > div > div"},{host:"xvideos",url:"https://www.xvideos.com/",match:/^www.(xvideos|xv-ru).com$/,selector:".video-bg-pic"},{host:"pornhub",url:"https://rt.pornhub.com/view_video.php?viewkey=",match:/^[a-z]+.pornhub.com$/,selector:".mainPlayerDiv > .video-element-wrapper-js > div"},{additionalData:"embed",host:"pornhub",url:"https://rt.pornhub.com/view_video.php?viewkey=",match:t=>t.host.includes("pornhub.com")&&t.pathname.startsWith("/embed/"),selector:"#player"},{additionalData:"mobile",host:"vk",url:"https://vk.com/video?z=",match:/^m.vk.(com|ru)$/,selector:"vk-video-player",shadowRoot:!0},{additionalData:"clips",host:"vk",url:"https://vk.com/video?z=",match:/^(www.|m.)?vk.(com|ru)$/,selector:'div[data-testid="clipcontainer-video"]'},{host:"vk",url:"https://vk.com/video?z=",match:/^(www.|m.)?vk.(com|ru)$/,selector:".videoplayer_media"},{host:"vimeo",url:"https://vimeo.com/",match:/^vimeo.com$/,selector:".player"},{additionalData:"embed",host:"vimeo",url:"https://player.vimeo.com/",match:/^player.vimeo.com$/,selector:".player"},{host:"ok.ru",url:"https://ok.ru/video/",match:/^ok.ru$/,selector:".html5-vpl_vid"},{host:"nine_gag",url:"https://9gag.com/gag/",match:/^9gag.com$/,selector:".video-post"},{host:"bitchute",url:"https://www.bitchute.com/video/",match:/^(www.)?bitchute.com$/,selector:".video-js"},{host:"rutube",url:"https://rutube.ru/video/",match:/^rutube.ru$/,selector:".video-player > div > div > div:nth-child(2)"},{additionalData:"embed",host:"rutube",url:"https://rutube.ru/video/",match:/^rutube.ru$/,selector:"#app > div > div"},{host:"bilibili",url:"https://www.bilibili.com/video/",match:/^(www|m|player).bilibili.com$/,selector:".bpx-player-video-wrap"},{additionalData:"old",host:"bilibili",url:"https://www.bilibili.com/video/",match:/^(www|m).bilibili.com$/,selector:null},{host:"twitter",url:"https://twitter.com/i/status/",match:/^twitter.com$/,selector:'div[data-testid="videoComponent"] > div:nth-child(1) > div'},{host:"mail_ru",url:"https://my.mail.ru/",match:/^my.mail.ru$/,selector:"#b-video-wrapper"},{host:"coursera",url:"https://www.coursera.org/",match:/coursera.org$/,selector:".vjs-v6"},{host:"udemy",url:"https://www.udemy.com/",match:/udemy.com$/,selector:'div[data-purpose="curriculum-item-viewer-content"] > section > div > div > div > div:nth-of-type(2)'},{host:"invidious",url:"https://youtu.be/",match:pt,selector:"#player"},{host:"piped",url:"https://youtu.be/",match:gt,selector:".shaka-video-container"},{host:"rumble",url:"https://rumble.com/",match:/^rumble.com$/,selector:"#videoPlayer > .videoPlayer-Rumble-cls > div"},{host:"eporner",url:"https://www.eporner.com/",match:/^(www.)?eporner.com$/,selector:".vjs-v7"},{host:"peertube",url:"stub",match:vt,selector:".vjs-v7"},{host:"dailymotion",url:"https://dai.ly/",match:/^geo.dailymotion.com$/,selector:".player"},{host:"trovo",url:"https://trovo.live/s/",match:/^trovo.live$/,selector:".player-video"},{host:"yandexdisk",url:"https://yadi.sk/i/",match:/^disk.yandex.ru$/,selector:".video-player__player > div:nth-child(1)"},{host:"coursehunter",url:"https://coursehunter.net/course/",match:/^coursehunter.net$/,selector:"#oframeplayer > pjsdiv:nth-of-type(1)"},{host:"googledrive",url:"https://drive.google.com/file/d/",match:/^youtube.googleapis.com$/,selector:".html5-video-container"},{host:"bannedvideo",url:"https://banned.video/watch?id=",match:/^(www.)?banned.video$/,selector:".vjs-v7"},{host:"facebook",url:"https://facebook.com/",match:t=>t.host.includes("facebook.com")&&t.pathname.includes("/videos/"),selector:'div[role="main"] div[data-pagelet$="video" i]'},{additionalData:"reels",host:"facebook",url:"https://facebook.com/",match:t=>t.host.includes("facebook.com")&&t.pathname.includes("/reel/"),selector:'div[role="main"]'},{host:"weverse",url:"https://weverse.io/",match:/^weverse.io$/,selector:".webplayer-internal-source-wrapper"},{host:"newgrounds",url:"https://www.newgrounds.com/",match:/^www.newgrounds.com$/,selector:".ng-video-player"},{host:"egghead",url:"https://egghead.io/",match:/^egghead.io$/,selector:".cueplayer-react-video-holder"},{host:"youku",url:"https://v.youku.com/",match:/^v.youku.com$/,selector:"#ykPlayer"},{host:"archive",url:"https://archive.org/details/",match:/^archive.org$/,selector:".jw-media"},{host:"directlink",url:"stub",match:t=>/([^.]+).mp4/.test(t.pathname),selector:null},{host:"patreon",url:"https://www.patreon.com/",match:/^www.patreon.com$/,selector:'div[data-tag="post-card"] div[elevation="subtle"] > div > div > div > div'}];__webpack_require__("./node_modules/requestidlecallback-polyfill/index.js");class Ge{constructor(){this.listeners=new Set}hasListener(t){return this.listeners.has(t)}dispatchToListener(t,...e){try{t(...e)}catch(t){console.error("[VOT]",t)}}addListener(t){if(this.hasListener(t))throw new Error("[VOT] The listener has already been added.");this.listeners.add(t)}removeListener(t){if(!this.hasListener(t))throw new Error("[VOT] The listener has not been added yet.");this.listeners.delete(t)}dispatch(...t){for(const e of Array.from(this.listeners))this.dispatchToListener(e,...t)}}function Ye(t){return Array.from(t).flatMap((t=>t instanceof HTMLVideoElement?[t]:t instanceof HTMLElement?Array.from(t.querySelectorAll("video")):t.shadowRoot?Array.from(t.shadowRoot.querySelectorAll("video")):[]))}const Ze=/advertise|promo|sponsor|banner|commercial|preroll|midroll|postroll|ad-container|sponsored/i;const Je=t.getParser(window.navigator.userAgent).getResult(),Ke=[...pt,...gt],Xe=["playing","ratechange","play","waiting","pause"];function Qe(t,e){return t.map((t=>({label:Xt.get("langs")[t]??t.toUpperCase(),value:t,selected:e===t})))}const to={headers:{"sec-ch-ua":null,"sec-ch-ua-mobile":null,"sec-ch-ua-platform":null},fetchFn:Jt,hostVOT:"https://vot-api.toil.cc/v1",host:"api.browser.yandex.ru"};class eo{translateFromLang="en";translateToLang=Ut;timer;ytData="";videoData="";firstPlay=!0;audio=new Audio;audioContext=new(window.AudioContext||window.webkitAudioContext);gainNode=this.audioContext.createGain();hls=Yt();votClient=new ht(to);videoTranslations=[];videoTranslationTTL=7200;downloadTranslationUrl=null;downloadSubtitlesUrl=null;autoRetry;streamPing;volumeOnStart;tempOriginalVolume;tempVolume;firstSyncVolume=!0;subtitlesList=[];subtitlesListVideoId=null;videoLastSrcObject=null;dragging;constructor(t,e,o){Et.log("[VideoHandler] add video:",t,"container:",e,this),this.video=t,this.container=e,this.site=o,this.stopTranslationBound=this.stopTranslation.bind(this),this.handleVideoEventBound=this.handleVideoEvent.bind(this),this.changeOpacityOnEventBound=this.changeOpacityOnEvent.bind(this),this.resetTimerBound=this.resetTimer.bind(this),this.init()}async translateVideoImpl(t,e,o,n,i,r=null){if(clearTimeout(this.autoRetry),Et.log(`Translate video (url: ${t}, duration: ${o}, requestLang: ${n}, responseLang: ${i})`),Ht(this.site.host,this.video)!==e)return null;try{const e=await this.votClient.translateVideo({url:t,duration:o,requestLang:n,responseLang:i,translationHelp:r});if(Et.log("Translate video result",e),e.translated&&e.remainingTime<1)return Et.log("Video translation finished with this data: ",e),e;await this.updateTranslationErrorMsg(e.remainingTime>0?function(t){const e=Math.floor(t/60),o=Math.floor(t%60);return e>=60?Xt.get("translationTakeMoreThanHour"):1===e||0===e&&o>0?Xt.get("translationTakeAboutMinute"):11!==e&&e%10==1?Xt.get("translationTakeApproximatelyMinute2").replace("{0}",e):![12,13,14].includes(e)&&[2,3,4].includes(e%10)?Xt.get("translationTakeApproximatelyMinute").replace("{0}",e):Xt.get("translationTakeApproximatelyMinutes").replace("{0}",e)}(e.remainingTime):e.message??Xt.get("translationTakeFewMinutes"))}catch(t){return console.error("[VOT] Failed to translate video",t),await this.updateTranslationErrorMsg(t.res?.message??t.message),null}return new Promise((a=>{const s=this.subtitlesList.some((t=>"yandex"===t.source))?2e4:3e4;this.autoRetry=setTimeout((async()=>{const s=await this.translateVideoImpl(t,e,o,n,i,r);(!s||s.translated&&s.remainingTime<1)&&a(s)}),s)}))}async translateStreamImpl(t,e,o,n){if(clearTimeout(this.autoRetry),Et.log(`Translate stream (url: ${t}, requestLang: ${o}, responseLang: ${n})`),Ht(this.site.host,this.video)!==e)return null;try{const i=await this.votClient.translateStream({url:t,requestLang:o,responseLang:n});if(Et.log("Translate stream result",i),!i.translated&&10===i.interval)return await this.updateTranslationErrorMsg(Xt.get("translationTakeFewMinutes")),new Promise((r=>{this.autoRetry=setTimeout((async()=>{const i=await this.translateStreamImpl(t,e,o,n);i&&!i.translated&&10===i.interval||r(i)}),1e3*i.interval)}));if(i.message)throw Et.log(`Stream translation aborted! Message: ${i.message}`),new ye("streamNoConnectionToServer");if(!i.result)throw Et.log("Failed to find translation result! Data:",i),new ye("audioNotReceived");return Et.log("Stream translated successfully. Running...",i),this.streamPing=setInterval((async()=>{Et.log("Ping stream translation",i.pingId),this.votClient.pingStream({pingId:i.pingId})}),1e3*i.interval),i}catch(t){return console.error("[VOT] Failed to translate stream",t),await this.updateTranslationErrorMsg(t.res?.message??t.message),null}}async autoTranslate(){if(this.site.host,this.firstPlay&&1===this.data.autoTranslate&&this.videoData.videoId){this.firstPlay=!1;try{await this.translateExecutor(this.videoData.videoId)}catch(t){console.error("[VOT]",t),this.transformBtn("error","VOTLocalizedError"===t?.name?t.localizedMessage:t)}}}async init(){if(this.initialized)return;const t={autoTranslate:Ot.get("autoTranslate",0,!0),dontTranslateLanguage:Ot.get("dontTranslateLanguage",Ut),dontTranslateYourLang:Ot.get("dontTranslateYourLang",1,!0),autoSetVolumeYandexStyle:Ot.get("autoSetVolumeYandexStyle",1,!0),autoVolume:Ot.get("autoVolume",wt,!0),buttonPos:Ot.get("buttonPos","default"),showVideoSlider:Ot.get("showVideoSlider",1,!0),syncVolume:Ot.get("syncVolume",0,!0),subtitlesMaxLength:Ot.get("subtitlesMaxLength",300,!0),highlightWords:Ot.get("highlightWords",0,!0),responseLanguage:Ot.get("responseLanguage",Ut),defaultVolume:Ot.get("defaultVolume",100,!0),udemyData:Ot.get("udemyData",{accessToken:"",expires:0}),audioProxy:Ot.get("audioProxy",0,!0),showPiPButton:Ot.get("showPiPButton",0,!0),translateAPIErrors:Ot.get("translateAPIErrors",1,!0),translationService:Ot.get("translationService",yt),detectService:Ot.get("detectService",xt),m3u8ProxyHost:Ot.get("m3u8ProxyHost",ft),proxyWorkerHost:Ot.get("proxyWorkerHost",bt),audioBooster:Ot.get("audioBooster",0,!0)};this.data=Object.fromEntries(await Promise.all(Object.entries(t).map((async([t,e])=>[t,await e])))),console.log("[db] data from db: ",this.data),this.subtitlesWidget=new _e(this.video,this.container,this.site),this.subtitlesWidget.setMaxLength(this.data.subtitlesMaxLength),this.subtitlesWidget.setHighlightWords(this.data.highlightWords),this.audio.crossOrigin="anonymous",this.gainNode.connect(this.audioContext.destination),this.audioSource=this.audioContext.createMediaElementSource(this.audio),this.audioSource.connect(this.gainNode),this.initUI(),this.initUIEvents();const e=!this.video.src&&!this.video.currentSrc&&!this.video.srcObject;this.votButton.container.hidden=e,e?this.votMenu.container.hidden=!0:(this.videoData=await this.getVideoData(),this.setSelectMenuValues(this.videoData.detectedLanguage,this.data.responseLanguage??"ru")),await this.updateSubtitles(),await this.changeSubtitlesLang("disabled"),await this.autoTranslate(),this.translateToLang=this.data.responseLanguage??"ru",this.initExtraEvents(),this.initialized=!0}transformBtn(t="none",e){this.votButton.container.dataset.status=t,this.votButton.container.dataset.translating="error"===t&&e.includes(Xt.get("translationTake")),this.votButton.label.innerHTML=e,this.votButton.container.title="error"===t?e:""}initUI(){this.votButton=we.createVOTButton(Xt.get("translateVideo")),this.data?.buttonPos&&"default"!==this.data?.buttonPos&&this.container.clientWidth&&this.container.clientWidth>550?(this.votButton.container.dataset.direction="column",this.votButton.container.dataset.position=this.data?.buttonPos):(this.votButton.container.dataset.direction="row",this.votButton.container.dataset.position="default"),this.container.appendChild(this.votButton.container),this.votButton.pipButton.hidden=!Gt()||!this.data?.showPiPButton,this.votButton.separator2.hidden=!Gt()||!this.data?.showPiPButton,this.votButton.container.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()})),this.votMenu=we.createVOTMenu(Xt.get("VOTSettings")),this.votMenu.container.dataset.position=this.container.clientWidth&&this.container.clientWidth>550?this.data?.buttonPos:"default",this.container.appendChild(this.votMenu.container),this.votDownloadButton=we.createIconButton('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="100%" viewBox="0 -960 960 960"><path d="M480-337q-8 0-15-2.5t-13-8.5L308-492q-12-12-11.5-28t11.5-28q12-12 28.5-12.5T365-549l75 75v-286q0-17 11.5-28.5T480-800q17 0 28.5 11.5T520-760v286l75-75q12-12 28.5-11.5T652-548q11 12 11.5 28T652-492L508-348q-6 6-13 8.5t-15 2.5ZM240-160q-33 0-56.5-23.5T160-240v-80q0-17 11.5-28.5T200-360q17 0 28.5 11.5T240-320v80h480v-80q0-17 11.5-28.5T760-360q17 0 28.5 11.5T800-320v80q0 33-23.5 56.5T720-160H240Z"/></svg>'),this.votDownloadButton.hidden=!0,this.votMenu.headerContainer.appendChild(this.votDownloadButton),this.votDownloadSubtitlesButton=we.createIconButton('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="100%" viewBox="0 0 24 24"><path d="M4 20q-.825 0-1.413-.588T2 18V6q0-.825.588-1.413T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.588 1.413T20 20H4Zm2-4h8v-2H6v2Zm10 0h2v-2h-2v2ZM6 12h2v-2H6v2Zm4 0h8v-2h-8v2Z"/></svg>'),this.votDownloadSubtitlesButton.hidden=!0,this.votMenu.headerContainer.appendChild(this.votDownloadSubtitlesButton),this.votSettingsButton=we.createIconButton('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="100%" viewBox="0 -960 960 960"><path d="M555-80H405q-15 0-26-10t-13-25l-12-93q-13-5-24.5-12T307-235l-87 36q-14 5-28 1t-22-17L96-344q-8-13-5-28t15-24l75-57q-1-7-1-13.5v-27q0-6.5 1-13.5l-75-57q-12-9-15-24t5-28l74-129q7-14 21.5-17.5T220-761l87 36q11-8 23-15t24-12l12-93q2-15 13-25t26-10h150q15 0 26 10t13 25l12 93q13 5 24.5 12t22.5 15l87-36q14-5 28-1t22 17l74 129q8 13 5 28t-15 24l-75 57q1 7 1 13.5v27q0 6.5-2 13.5l75 57q12 9 15 24t-5 28l-74 128q-8 13-22.5 17.5T738-199l-85-36q-11 8-23 15t-24 12l-12 93q-2 15-13 25t-26 10Zm-73-260q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm0-80q-25 0-42.5-17.5T422-480q0-25 17.5-42.5T482-540q25 0 42.5 17.5T542-480q0 25-17.5 42.5T482-420Zm-2-60Zm-40 320h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Z"/></svg>'),this.votMenu.headerContainer.appendChild(this.votSettingsButton),this.votTranslationLanguageSelect=we.createVOTLanguageSelect({fromTitle:Xt.get("langs")[this.video.detectedLanguage],fromDialogTitle:Xt.get("videoLanguage"),fromItems:[{label:Xt.get("langs").auto,value:"auto",selected:""},...Qe(Tt,this.videoData.detectedLanguage)],fromOnSelectCB:async t=>{Et.log("[fromOnSelectCB] select from language",t.target.dataset.votValue),this.videoData=await this.getVideoData(),this.setSelectMenuValues(t.target.dataset.votValue,this.videoData.responseLanguage)},toTitle:Xt.get("langs")[this.video.responseLanguage],toDialogTitle:Xt.get("translationLanguage"),toItems:Qe(Lt,this.videoData.responseLanguage),toOnSelectCB:async t=>{const e=t.target.dataset.votValue;Et.log("[toOnSelectCB] select to language",e),this.data.responseLanguage=this.translateToLang=e,await Ot.set("responseLanguage",this.data.responseLanguage),Et.log("Response Language value changed. New value: ",this.data.responseLanguage),this.videoData=await this.getVideoData(),this.setSelectMenuValues(this.videoData.detectedLanguage,this.data.responseLanguage)}}),this.votMenu.bodyContainer.appendChild(this.votTranslationLanguageSelect.container),this.votSubtitlesSelect=we.createVOTSelect(Xt.get("VOTSubtitlesDisabled"),Xt.get("VOTSubtitles"),[{label:Xt.get("VOTSubtitlesDisabled"),value:"disabled",selected:!0,disabled:!1}],{onSelectCb:async t=>{await this.changeSubtitlesLang(t.target.dataset.votValue)},labelElement:we.createVOTSelectLabel(Xt.get("VOTSubtitles"))}),this.votMenu.bodyContainer.appendChild(this.votSubtitlesSelect.container),this.votVideoVolumeSlider=we.createSlider(`${Xt.get("VOTVolume")}: <strong>${100*this.getVideoVolume()}%</strong>`,100*this.getVideoVolume()),this.votVideoVolumeSlider.container.hidden=1!==this.data.showVideoSlider||"success"!==this.votButton.container.dataset.status,this.votMenu.bodyContainer.appendChild(this.votVideoVolumeSlider.container),this.votVideoTranslationVolumeSlider=we.createSlider(`${Xt.get("VOTVolumeTranslation")}: <strong>${this.data?.defaultVolume??100}%</strong>`,this.data?.defaultVolume??100,0,this.data.audioBooster?900:100),this.votVideoTranslationVolumeSlider.container.hidden="success"!==this.votButton.container.dataset.status,this.votMenu.bodyContainer.appendChild(this.votVideoTranslationVolumeSlider.container),this.votMenu.container.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()})),this.votSettingsDialog=we.createDialog(Xt.get("VOTSettings")),document.documentElement.appendChild(this.votSettingsDialog.container),this.votTranslationHeader=we.createHeader(Xt.get("translationSettings")),this.votSettingsDialog.bodyContainer.appendChild(this.votTranslationHeader),this.votAutoTranslateCheckbox=we.createCheckbox(Xt.get("VOTAutoTranslate"),this.data?.autoTranslate??!1),this.votSettingsDialog.bodyContainer.appendChild(this.votAutoTranslateCheckbox.container),this.votDontTranslateYourLangSelect=we.createVOTSelect(Xt.get("langs")[Ot.syncGet("dontTranslateLanguage",Ut)],Xt.get("VOTDontTranslateYourLang"),Qe(Tt,Ot.syncGet("dontTranslateLanguage",Ut)),{onSelectCb:async t=>{this.data.dontTranslateLanguage=t.target.dataset.votValue,await Ot.set("dontTranslateLanguage",this.data.dontTranslateLanguage)},labelElement:we.createCheckbox(Xt.get("VOTDontTranslateYourLang"),this.data?.dontTranslateYourLang??!0).container}),this.votSettingsDialog.bodyContainer.appendChild(this.votDontTranslateYourLangSelect.container),this.votAutoSetVolumeCheckbox=we.createCheckbox(`${Xt.get("VOTAutoSetVolume")}`,this.data?.autoSetVolumeYandexStyle??!0),this.votSettingsDialog.bodyContainer.appendChild(this.votAutoSetVolumeCheckbox.container),this.votAutoSetVolumeSlider=we.createSlider(`<strong>${100*(this.data?.autoVolume??wt)}%</strong>`,100*(this.data?.autoVolume??wt),0,100),this.votSettingsDialog.bodyContainer.appendChild(this.votAutoSetVolumeSlider.container),this.votShowVideoSliderCheckbox=we.createCheckbox(Xt.get("VOTShowVideoSlider"),this.data?.showVideoSlider??!1),this.votSettingsDialog.bodyContainer.appendChild(this.votShowVideoSliderCheckbox.container),this.votAudioBoosterCheckbox=we.createCheckbox(Xt.get("VOTAudioBooster"),this.data?.audioBooster??!1),this.votSettingsDialog.bodyContainer.appendChild(this.votAudioBoosterCheckbox.container),this.votUdemyDataTextfield=we.createTextfield(Xt.get("VOTUdemyData"),this.data?.udemyData?.accessToken??""),this.votUdemyDataTextfield.container.hidden="udemy"!==this.site.host,this.votSettingsDialog.bodyContainer.appendChild(this.votUdemyDataTextfield.container),this.votSyncVolumeCheckbox=we.createCheckbox(Xt.get("VOTSyncVolume"),this.data?.syncVolume??!1),this.votSettingsDialog.bodyContainer.appendChild(this.votSyncVolumeCheckbox.container),this.votTranslationServiceSelect=we.createVOTSelect(Ot.syncGet("translationService",yt).toUpperCase(),Xt.get("VOTTranslationService"),Qe(It,Ot.syncGet("translationService",yt)),{onSelectCb:async t=>{this.data.translationService=t.target.dataset.votValue,await Ot.set("translationService",this.data.translationService)},labelElement:we.createCheckbox(Xt.get("VOTTranslateAPIErrors"),this.data.translateAPIErrors??!0).container}),this.votTranslationServiceSelect.container.hidden="ru"===Xt.lang,this.votSettingsDialog.bodyContainer.appendChild(this.votTranslationServiceSelect.container),this.votDetectServiceSelect=we.createVOTSelect(Ot.syncGet("detectService",xt).toUpperCase(),Xt.get("VOTDetectService"),Qe(Bt,Ot.syncGet("detectService",xt)),{onSelectCb:async t=>{this.data.detectService=t.target.dataset.votValue,await Ot.set("detectService",this.data.detectService)},labelElement:we.createVOTSelectLabel(Xt.get("VOTDetectService"))}),this.votSettingsDialog.bodyContainer.appendChild(this.votDetectServiceSelect.container),this.votSubtitlesHeader=we.createHeader(Xt.get("subtitlesSettings")),this.votSettingsDialog.bodyContainer.appendChild(this.votSubtitlesHeader),this.votSubtitlesMaxLengthSlider=we.createSlider(`${Xt.get("VOTSubtitlesMaxLength")}: <strong>${this.data?.subtitlesMaxLength??300}</strong>`,this.data?.subtitlesMaxLength??300,50,300),this.votSettingsDialog.bodyContainer.appendChild(this.votSubtitlesMaxLengthSlider.container),this.votSubtitlesHighlightWordsCheckbox=we.createCheckbox(Xt.get("VOTHighlightWords"),this.data?.highlightWords??!1),this.votSettingsDialog.bodyContainer.appendChild(this.votSubtitlesHighlightWordsCheckbox.container),this.votProxyHeader=we.createHeader(Xt.get("proxySettings")),this.votSettingsDialog.bodyContainer.appendChild(this.votProxyHeader),this.votM3u8ProxyHostTextfield=we.createTextfield(Xt.get("VOTM3u8ProxyHost"),this.data?.m3u8ProxyHost,ft),this.votSettingsDialog.bodyContainer.appendChild(this.votM3u8ProxyHostTextfield.container),this.votProxyWorkerHostTextfield=we.createTextfield(Xt.get("VOTProxyWorkerHost"),this.data?.proxyWorkerHost,bt),this.votProxyWorkerHostTextfield.container.hidden=!0,this.votSettingsDialog.bodyContainer.appendChild(this.votProxyWorkerHostTextfield.container),this.votAudioProxyCheckbox=we.createCheckbox(Xt.get("VOTAudioProxy"),this.data?.audioProxy??!1),this.votAudioProxyCheckbox.container.hidden=!0,this.votSettingsDialog.bodyContainer.appendChild(this.votAudioProxyCheckbox.container),this.votAboutHeader=we.createHeader(Xt.get("about")),this.votSettingsDialog.bodyContainer.appendChild(this.votAboutHeader),this.votLanguageSelect=we.createVOTSelect(Xt.get("langs")[Ot.syncGet("locale-lang-override","auto")],Xt.get("VOTMenuLanguage"),Qe(Kt,Ot.syncGet("locale-lang-override","auto")),{onSelectCb:async t=>{await Ot.set("locale-lang-override",t.target.dataset.votValue)},labelElement:we.createVOTSelectLabel(Xt.get("VOTMenuLanguage"))}),this.votSettingsDialog.bodyContainer.appendChild(this.votLanguageSelect.container),this.votShowPiPButtonCheckbox=we.createCheckbox(Xt.get("VOTShowPiPButton"),this.data?.showPiPButton??!1),this.votShowPiPButtonCheckbox.container.hidden=!Gt(),this.votSettingsDialog.bodyContainer.appendChild(this.votShowPiPButtonCheckbox.container),this.votVersionInfo=we.createInformation(`${Xt.get("VOTVersion")}:`,GM_info.script.version),this.votSettingsDialog.bodyContainer.appendChild(this.votVersionInfo.container),this.votAuthorsInfo=we.createInformation(`${Xt.get("VOTAuthors")}:`,GM_info.script.author),this.votSettingsDialog.bodyContainer.appendChild(this.votAuthorsInfo.container),this.votLoaderInfo=we.createInformation(`${Xt.get("VOTLoader")}:`,`${GM_info.scriptHandler} v${GM_info.version}`),this.votSettingsDialog.bodyContainer.appendChild(this.votLoaderInfo.container),this.votBrowserInfo=we.createInformation(`${Xt.get("VOTBrowser")}:`,`${Je.browser.name} ${Je.browser.version} (${Je.os.name} ${Je.os.version})`),this.votSettingsDialog.bodyContainer.appendChild(this.votBrowserInfo.container),this.votResetSettingsButton=we.createButton(Xt.get("resetSettings")),this.votSettingsDialog.bodyContainer.appendChild(this.votResetSettingsButton)}initUIEvents(){this.votButton.translateButton.addEventListener("click",(()=>{(async()=>{if(this.audio.src)return Et.log("[click translationBtn] audio.src is not empty"),void this.stopTranslate();if(this.hls.url)return Et.log("[click translationBtn] hls is not empty"),void this.stopTranslate();try{if(Et.log("[click translationBtn] trying execute translation"),!this.videoData.videoId)throw new ye("VOTNoVideoIDFound");"vk"===this.site.host&&"clips"===this.site.additionalData&&(this.videoData=await this.getVideoData()),await this.translateExecutor(this.videoData.videoId)}catch(t){console.error("[VOT]",t),"VOTLocalizedError"===t?.name?this.transformBtn("error",t.localizedMessage):this.transformBtn("error",t)}})()})),this.votButton.pipButton.addEventListener("click",(()=>{(async()=>{this.video!==document.pictureInPictureElement?await this.video.requestPictureInPicture():await document.exitPictureInPicture()})()})),this.votButton.menuButton.addEventListener("click",(()=>{this.votMenu.container.hidden=!this.votMenu.container.hidden})),this.votButton.container.addEventListener("mousedown",(()=>{this.dragging=!0})),this.container.addEventListener("mouseup",(()=>{this.dragging=!1})),this.container.addEventListener("mousemove",(async t=>{if(this.dragging){t.preventDefault();const e=t.clientX/this.container.clientWidth*100;this.data.buttonPos=this.container.clientWidth&&this.container.clientWidth>550?e<=44?"left":e>=66?"right":"default":"default",this.votButton.container.dataset.direction="default"===this.data.buttonPos?"row":"column",this.votButton.container.dataset.position=this.data.buttonPos,this.votMenu.container.dataset.position=this.data.buttonPos,this.container.clientWidth&&this.container.clientWidth>550&&await Ot.set("buttonPos",this.data.buttonPos)}})),this.votDownloadButton.addEventListener("click",(()=>{this.downloadTranslationUrl&&window.open(this.downloadTranslationUrl,"_blank").focus()})),this.votDownloadSubtitlesButton.addEventListener("click",(async()=>{const t=function(t){let e="",o=1;for(const n of t.subtitles){let t=n.startMs/1e3,i=(n.startMs+n.durationMs)/1e3;e+=`${o}\n`,e+=`${Se(t)} --\x3e ${Se(i)}\n`,e+=`${n.text}\n\n`,o++}return e.trim()}(this.YandexSubtitles),e=new Blob([t],{type:"text/plain"}),o=URL.createObjectURL(e),n=document.createElement("a");n.href=o,n.download=`subtitles_${this.videoData.videoId}.srt`,n.click(),URL.revokeObjectURL(o)})),this.votSettingsButton.addEventListener("click",(()=>{this.votSettingsDialog.container.hidden=!this.votSettingsDialog.container.hidden,(document.fullscreenElement||document.webkitFullscreenElement)&&(document.webkitExitFullscreen&&document.webkitExitFullscreen(),document.exitFullscreen&&document.exitFullscreen())})),this.votVideoVolumeSlider.input.addEventListener("input",(t=>{const e=Number(t.target.value);this.votVideoVolumeSlider.label.querySelector("strong").innerHTML=`${e}%`,this.setVideoVolume(e/100),this.data.syncVolume&&this.syncVolumeWrapper("video",e)})),this.votVideoTranslationVolumeSlider.input.addEventListener("input",(t=>{(async()=>{this.data.defaultVolume=Number(t.target.value),await Ot.set("defaultVolume",this.data.defaultVolume),this.votVideoTranslationVolumeSlider.label.querySelector("strong").innerHTML=`${this.data.defaultVolume}%`,this.gainNode.gain.value=this.data.defaultVolume/100,this.data.syncVolume&&(this.syncVolumeWrapper("translation",this.data.defaultVolume),["youtube","googledrive"].includes(this.site.host)&&"mobile"!==this.site.additionalData&&this.setVideoVolume(this.tempOriginalVolume/100))})()})),this.votAutoTranslateCheckbox.input.addEventListener("change",(t=>{(async()=>{this.data.autoTranslate=Number(t.target.checked),await Ot.set("autoTranslate",this.data.autoTranslate),await this.autoTranslate(),Et.log("autoTranslate value changed. New value: ",this.data.autoTranslate)})()})),this.votDontTranslateYourLangSelect.labelElement.addEventListener("change",(t=>{(async()=>{this.data.dontTranslateYourLang=Number(t.target.checked),await Ot.set("dontTranslateYourLang",this.data.dontTranslateYourLang),Et.log("dontTranslateYourLang value changed. New value: ",this.data.dontTranslateYourLang)})()})),this.votAutoSetVolumeCheckbox.input.addEventListener("change",(t=>{(async()=>{this.data.autoSetVolumeYandexStyle=Number(t.target.checked),await Ot.set("autoSetVolumeYandexStyle",this.data.autoSetVolumeYandexStyle),Et.log("autoSetVolumeYandexStyle value changed. New value: ",this.data.autoSetVolumeYandexStyle)})()})),this.votAutoSetVolumeSlider.input.addEventListener("input",(t=>{(async()=>{const e=Number(t.target.value);this.data.autoVolume=(e/100).toFixed(2),await Ot.set("autoVolume",this.data.autoVolume),this.votAutoSetVolumeSlider.label.querySelector("strong").innerHTML=`${e}%`})()})),this.votShowVideoSliderCheckbox.input.addEventListener("change",(t=>{(async()=>{this.data.showVideoSlider=Number(t.target.checked),await Ot.set("showVideoSlider",this.data.showVideoSlider),Et.log("showVideoSlider value changed. New value: ",this.data.showVideoSlider),this.votVideoVolumeSlider.container.hidden=1!==this.data.showVideoSlider||"success"!==this.votButton.container.dataset.status})()})),this.votAudioBoosterCheckbox.input.addEventListener("change",(t=>{(async()=>{this.data.audioBooster=Number(t.target.checked),await Ot.set("audioBooster",this.data.audioBooster),Et.log("audioBooster value changed. New value: ",this.data.audioBooster);const e=this.votVideoTranslationVolumeSlider.input.value;this.votVideoTranslationVolumeSlider.input.max=this.data.audioBooster?900:100,this.data.audioBooster||(this.votVideoTranslationVolumeSlider.input.value=e>100?100:e,this.votVideoTranslationVolumeSlider.input.dispatchEvent(new Event("input")))})()})),this.votUdemyDataTextfield.input.addEventListener("change",(t=>{(async()=>{this.data.udemyData={accessToken:t.target.value,expires:(new Date).getTime()},await Ot.set("udemyData",this.data.udemyData),Et.log("udemyData value changed. New value: ",this.data.udemyData),window.location.reload()})()})),this.votSyncVolumeCheckbox.input.addEventListener("change",(t=>{(async()=>{this.data.syncVolume=Number(t.target.checked),await Ot.set("syncVolume",this.data.syncVolume),Et.log("syncVolume value changed. New value: ",this.data.syncVolume)})()})),this.votTranslationServiceSelect.labelElement.addEventListener("change",(t=>{(async()=>{this.data.translateAPIErrors=Number(t.target.checked),await Ot.set("translateAPIErrors",this.data.translateAPIErrors),Et.log("translateAPIErrors value changed. New value: ",this.data.translateAPIErrors)})()})),this.votSubtitlesMaxLengthSlider.input.addEventListener("input",(t=>{(async()=>{this.data.subtitlesMaxLength=Number(t.target.value),await Ot.set("subtitlesMaxLength",this.data.subtitlesMaxLength),this.votSubtitlesMaxLengthSlider.label.querySelector("strong").innerHTML=`${this.data.subtitlesMaxLength}`,this.subtitlesWidget.setMaxLength(this.data.subtitlesMaxLength)})()})),this.votSubtitlesHighlightWordsCheckbox.input.addEventListener("change",(t=>{(async()=>{this.data.highlightWords=Number(t.target.checked),await Ot.set("highlightWords",this.data.highlightWords),Et.log("highlightWords value changed. New value: ",this.data.highlightWords),this.subtitlesWidget.setHighlightWords(this.data.highlightWords)})()})),this.votShowPiPButtonCheckbox.input.addEventListener("change",(t=>{(async()=>{this.data.showPiPButton=Number(t.target.checked),await Ot.set("showPiPButton",this.data.showPiPButton),Et.log("showPiPButton value changed. New value: ",this.data.showPiPButton),this.votButton.pipButton.hidden=!Gt()||!this.data.showPiPButton,this.votButton.separator2.hidden=!Gt()||!this.data.showPiPButton})()})),this.votM3u8ProxyHostTextfield.input.addEventListener("change",(t=>{(async()=>{this.data.m3u8ProxyHost=t.target.value||ft,await Ot.set("m3u8ProxyHost",this.data.m3u8ProxyHost),Et.log("m3u8ProxyHost value changed. New value: ",this.data.m3u8ProxyHost)})()})),this.votProxyWorkerHostTextfield.input.addEventListener("change",(t=>{(async()=>{this.data.proxyWorkerHost=t.target.value||bt,await Ot.set("proxyWorkerHost",this.data.proxyWorkerHost),Et.log("proxyWorkerHost value changed. New value: ",this.data.proxyWorkerHost),window.location.reload()})()})),this.votAudioProxyCheckbox.input.addEventListener("change",(t=>{(async()=>{this.data.audioProxy=Number(t.target.checked),await Ot.set("audioProxy",this.data.audioProxy),Et.log("audioProxy value changed. New value: ",this.data.audioProxy)})()})),this.votResetSettingsButton.addEventListener("click",(()=>{(async()=>{Xt.reset();const t=await Ot.list();for(let e=0;e<t.length;e++){const o=t[e];Xt.gmValues.includes(o)||Ot.syncDelete(o)}window.location.reload()})()}))}releaseExtraEvents(){if(this.resizeObserver?.disconnect(),["youtube","googledrive"].includes(this.site.host)&&"mobile"!==this.site.additionalData&&this.syncVolumeObserver?.disconnect(),this.extraEvents)for(let t=0;t<this.extraEvents.length;t++){const e=this.extraEvents[t];e.element.removeEventListener(e.event,e.handler)}}initExtraEvents(){this.extraEvents=[];const t=(t,e,o)=>{this.extraEvents.push({element:t,event:e,handler:o}),t.addEventListener(e,o)},e=(e,o,n)=>{for(const i of o)t(e,i,n)};if(this.resizeObserver=new ResizeObserver((t=>{for(let e=0;e<t.length;e++){const o=t[e];this.votMenu.container.setAttribute("style",`--vot-container-height: ${o.contentRect.height}px`)}const e=this.container.clientWidth&&this.container.clientWidth>550;this.votButton.container.dataset.position=this.votMenu.container.dataset.position=e?this.data?.buttonPos:"default",this.votButton.container.dataset.direction=this.data?.buttonPos&&"default"!==this.data?.buttonPos&&e?"column":"row"})),this.resizeObserver.observe(this.video),this.votMenu.container.setAttribute("style",`--vot-container-height: ${this.video.getBoundingClientRect().height}px`),["youtube","googledrive"].includes(this.site.host)&&"mobile"!==this.site.additionalData){this.syncVolumeObserver=new MutationObserver((t=>{if(this.audio.src&&this.data.syncVolume)for(let e=0;e<t.length;e++){const o=t[e];if("attributes"===o.type&&"aria-valuenow"===o.attributeName){if(this.firstSyncVolume)return void(this.firstSyncVolume=!1);const t=this.isMuted()?0:100*this.getVideoVolume(),e=Math.round(t);this.data.defaultVolume=e,this.gainNode.gain.value=this.data.defaultVolume/100,this.syncVolumeWrapper("video",e)}}}));const t=document.querySelector(".ytp-volume-panel");t&&this.syncVolumeObserver.observe(t,{attributes:!0,childList:!1,subtree:!0,attributeOldValue:!0})}let o;document.addEventListener("click",(t=>{const e=t.target,o=this.votButton.container,n=this.votMenu.container,i=this.container,r=this.votSettingsDialog.container,a=document.querySelector(".vot-dialog-temp"),s=o.contains(e),l=n.contains(e),u=i.contains(e),d=r.contains(e),c=a?.contains(e)??!1;Et.log(`[document click] ${s} ${l} ${u} ${d} ${c}`),s||l||d||c||(u||this.logout(0),this.votMenu.container.hidden=!0)})),o="pornhub"===this.site.host?"embed"===this.site.additionalData?document.querySelector("#player"):this.container.querySelector(".video-element-wrapper-js > div"):"twitter"===this.site.host?document.querySelector('div[data-testid="videoPlayer"]'):"yandexdisk"===this.site.host?document.querySelector(".video-player__player"):this.container,o&&e(o,["mousemove","mouseout"],this.resetTimerBound),t(this.votButton.container,"mousemove",this.changeOpacityOnEventBound),t(this.votMenu.container,"mousemove",this.changeOpacityOnEventBound),e(document,["touchstart","touchmove","touchend"],this.changeOpacityOnEventBound),t(this.votButton.container,"mousedown",(t=>{t.stopImmediatePropagation()})),t(this.votMenu.container,"mousedown",(t=>{t.stopImmediatePropagation()})),"youtube"===this.site.host&&(this.container.draggable=!1),"googledrive"===this.site.host&&(this.container.style.height="100%"),t(this.video,"canplaythrough",(async()=>{"rutube"===this.site.host&&this.video.src||Ht(this.site.host,this.video)!==this.videoData.videoId&&(await this.handleSrcChanged(),Et.log("lipsync mode is loadeddata"),await this.autoTranslate())})),t(this.video,"emptied",(()=>{this.video.src&&Ht(this.site.host,this.video)===this.videoData.videoId||(Et.log("lipsync mode is emptied"),this.videoData="",this.stopTranslation())})),["rutube","ok"].includes(this.site.host)||t(this.video,"volumechange",(()=>{this.syncVideoVolumeSlider()}))}logout(t){this.votMenu.container.hidden&&(this.votButton.container.style.opacity=t)}resetTimer(){clearTimeout(this.timer),this.logout(1),this.timer=setTimeout((()=>{this.logout(0)}),1e3)}changeOpacityOnEvent(t){clearTimeout(this.timer),this.logout(1),t.stopPropagation()}async changeSubtitlesLang(t){if(Et.log("[onchange] subtitles",t),this.votSubtitlesSelect.setSelected(t),"disabled"===t)this.votSubtitlesSelect.setTitle(Xt.get("VOTSubtitlesDisabled")),this.subtitlesWidget.setContent(null),this.votDownloadSubtitlesButton.hidden=!0,this.YandexSubtitles=null;else{const e=await Te(this.subtitlesList.at(parseInt(t)));this.subtitlesWidget.setContent(e),this.votDownloadSubtitlesButton.hidden=!1,this.YandexSubtitles=e}}async updateSubtitlesLangSelect(){const t=[{label:Xt.get("VOTSubtitlesDisabled"),value:"disabled",selected:!0,disabled:!1},...this.subtitlesList.map(((t,e)=>({label:(Xt.get("langs")[t.language]??t.language.toUpperCase())+(t.translatedFromLanguage?` ${Xt.get("VOTTranslatedFrom")} ${Xt.get("langs")[t.translatedFromLanguage]??t.translatedFromLanguage.toUpperCase()}`:"")+("yandex"!==t.source?` ${t.source}`:"")+(t.isAutoGenerated?` (${Xt.get("VOTAutogenerated")})`:""),value:e,selected:!1,disabled:!1})))];this.votSubtitlesSelect.updateItems(t),await this.changeSubtitlesLang(t[0].value)}async updateSubtitles(){if(await this.changeSubtitlesLang("disabled"),!this.videoData.videoId)return console.error(`[VOT] ${Xt.getDefault("VOTNoVideoIDFound")}`),this.subtitlesList=[],this.subtitlesListVideoId=null,this.votButton.container.hidden=!0,void await this.updateSubtitlesLangSelect();this.votButton.container.hidden=!1,this.subtitlesListVideoId!==this.videoData.videoId&&(this.subtitlesList=await Le(this.votClient,this.site,this.videoData.videoId,this.videoData.detectedLanguage),this.subtitlesList?this.subtitlesListVideoId=this.videoData.videoId:await this.changeSubtitlesLang("disabled"),await this.updateSubtitlesLangSelect())}getVideoVolume(){let t=this.video?.volume;return["youtube","googledrive"].includes(this.site.host)&&(t=Ft.getVideoVolume()??t),t}setVideoVolume(t){if(["youtube","googledrive"].includes(this.site.host)){if(Ft.setVideoVolume(t))return}this.video.volume=t}isMuted(){return["youtube","googledrive"].includes(this.site.host)?Ft.isMuted():this.video?.muted}syncVideoVolumeSlider(){const t=this.isMuted()?0:100*this.getVideoVolume(),e=Math.round(t);this.votVideoVolumeSlider.input.value=e,this.votVideoVolumeSlider.label.querySelector("strong").innerHTML=`${e}%`,we.updateSlider(this.votVideoVolumeSlider.input),1===this.data.syncVolume&&(this.tempOriginalVolume=Number(e))}setSelectMenuValues(t,e){this.votTranslationLanguageSelect.fromSelect.setTitle(Xt.get("langs")[t]),this.votTranslationLanguageSelect.toSelect.setTitle(Xt.get("langs")[e]),this.votTranslationLanguageSelect.fromSelect.setSelected(t),this.votTranslationLanguageSelect.toSelect.setSelected(e),console.log(`[VOT] Set translation from ${t} to ${e}`),this.videoData.detectedLanguage=t,this.videoData.responseLanguage=e}syncVolumeWrapper(t,e){const o="translation"===t?this.votVideoVolumeSlider:this.votVideoTranslationVolumeSlider,n=Number(o.input.value),i=function(t,e,o,n){let i=e;return e>n?(i=o+(e-n),i=i>100?100:Math.max(i,0),t.volume=i/100):e<n&&(i=o-(n-e),i=i>100?100:Math.max(i,0),t.volume=i/100),i}("translation"===t?this.video:this.audio,e,n,"translation"===t?this.tempVolume:this.tempOriginalVolume);o.input.value=i,o.label.querySelector("strong").innerHTML=`${i}%`,we.updateSlider(o.input),this.tempOriginalVolume="translation"===t?i:e,this.tempVolume="translation"===t?e:i}async getVideoData(){const t={translationHelp:null,isStream:!1,duration:this.video?.duration||343,videoId:Ht(this.site.host,this.video),detectedLanguage:this.translateFromLang,responseLanguage:this.translateToLang};if(!t.videoId)return this.ytData={},t;if("youtube"===this.site.host)this.ytData=await Ft.getVideoData(),t.isStream=this.ytData.isLive,this.ytData.title&&(t.detectedLanguage=this.ytData.detectedLanguage,t.responseLanguage=this.translateToLang);else if(["rutube","ok.ru","mail_ru"].includes(this.site.host))t.detectedLanguage="ru";else if("youku"===this.site.host)t.detectedLanguage="zh";else if("vk"===this.site.host){const e=document.getElementsByTagName("track")?.[0]?.srclang;t.detectedLanguage=e||"auto"}else if("coursera"===this.site.host){const e=await Oe.getVideoData(this.translateToLang);t.duration=e.duration||t.duration,t.detectedLanguage=e.detectedLanguage,t.translationHelp=e.translationHelp}else if("coursehunter"===this.site.host){const e=await Me.getVideoData();t.translationHelp={url:e.url},t.duration=e.duration||t.duration}else if("bannedvideo"===this.site.host){const e=await De.getVideoData(t.videoId);t.translationHelp={url:e.url},t.duration=e.duration||t.duration,t.isStream=e.live}else if("weverse"===this.site.host){const e=await He.getVideoData();t.detectedLanguage="ko",e&&(t.translationHelp={url:e.url},t.duration=e.duration||t.duration)}else if("udemy"===this.site.host){const e=await je.getVideoData(this.data.udemyData,this.translateToLang);t.duration=e.duration||t.duration,t.detectedLanguage=e.detectedLanguage,t.translationHelp=e.translationHelp}else"bitchute"===this.site.host?t.translationHelp={url:t.videoId}:["bilibili","piped","invidious","bitchute","rumble","peertube","dailymotion","trovo","yandexdisk","coursehunter","archive","directlink"].includes(this.site.host)&&(t.detectedLanguage="auto");return t}videoValidator(){if(["youtube","ok.ru","vk"].includes(this.site.host)&&(Et.log("VideoValidator videoData: ",this.videoData),1===this.data.dontTranslateYourLang&&this.videoData.detectedLanguage===this.data.dontTranslateLanguage))throw new ye("VOTDisableFromYourLang");if(!this.videoData.isStream&&this.videoData.duration>14400)throw new ye("VOTVideoIsTooLong");return!0}lipSync(t=!1){if(Et.log("lipsync video",this.video),this.video)if(this.audio.currentTime=this.video.currentTime,this.audio.playbackRate=this.video.playbackRate,t)if("play"!=t)["pause","stop","waiting"].includes(t)&&(Et.log(`lipsync mode is ${t}`),this.audio.pause()),"playing"==t&&(Et.log("lipsync mode is playing"),this.audio.play());else{Et.log("lipsync mode is play");const t=this.audio.play();void 0!==t&&t.catch((t=>{if(console.error("[VOT]",t),"NotAllowedError"===t.name)throw this.transformBtn("error",Xt.get("grantPermissionToAutoPlay")),new ye("grantPermissionToAutoPlay");if("NotSupportedError"===t.name)throw this.transformBtn("error",Ke.includes(window.location.hostname)?Xt.get("neededAdditionalExtension"):Xt.get("audioFormatNotSupported")),Ke.includes(window.location.hostname)?new ye("neededAdditionalExtension"):new ye("audioFormatNotSupported")}))}else Et.log("lipsync mode is not set")}handleVideoEvent(t){Et.log(`video ${t.type}`),this.lipSync(t.type)}stopTranslate(){for(const t of Xe)this.video.removeEventListener(t,this.handleVideoEventBound);this.audio.pause(),this.audio.src="",this.audio.removeAttribute("src"),this.votVideoVolumeSlider.container.hidden=!0,this.votVideoTranslationVolumeSlider.container.hidden=!0,this.votDownloadButton.hidden=!0,this.downloadTranslationUrl=null,this.transformBtn("none",Xt.get("translateVideo")),Et.log(`Volume on start: ${this.volumeOnStart}`),this.volumeOnStart&&this.setVideoVolume(this.volumeOnStart),this.volumeOnStart="",clearInterval(this.streamPing),clearTimeout(this.autoRetry),this.hls?.destroy(),this.hls=Yt(),this.firstSyncVolume=!0}async translateExecutor(t){Et.log("Run translateFunc",t),await this.translateFunc(t,this.videoData.isStream,this.videoData.detectedLanguage,this.videoData.responseLanguage,this.videoData.translationHelp)}async updateTranslationErrorMsg(t){const e=Xt.get("translationTake"),o=Xt.get("VOTTranslatingError"),n=Xt.lang;if("VOTLocalizedError"===t?.name)this.transformBtn("error",t.localizedMessage);else if(1!==this.data.translateAPIErrors||t.includes(e)||"ru"===n)this.transformBtn("error",t);else{const e=await async function(t,e="",o="ru"){switch(await Ot.get("translationService",yt)){case"yandex":{const n=e&&o?`${e}-${o}`:o;return await At.translate(t,n)}case"deepl":return await Nt.translate(t,e,o);default:return t}}(t,"ru",n);this.transformBtn("error",o),this.transformBtn("error",e)}}afterUpdateTranslation(t){this.votVideoVolumeSlider.container.hidden=1!==this.data.showVideoSlider||"success"!==this.votButton.container.dataset.status,this.votVideoTranslationVolumeSlider.container.hidden="success"!==this.votButton.container.dataset.status,1===this.data.autoSetVolumeYandexStyle&&(this.votVideoVolumeSlider.input.value=100*this.data.autoVolume,this.votVideoVolumeSlider.label.querySelector("strong").innerHTML=100*this.data.autoVolume+"%",we.updateSlider(this.votVideoVolumeSlider.input)),this.votDownloadButton.hidden=!1,this.downloadTranslationUrl=t}updateTranslation(t){if(this.audio.src=t,this.volumeOnStart=this.getVideoVolume(),"number"==typeof this.data.defaultVolume&&(this.gainNode.gain.value=this.data.defaultVolume/100),"number"==typeof this.data.autoSetVolumeYandexStyle&&this.data.autoSetVolumeYandexStyle&&this.setVideoVolume(this.data.autoVolume),"twitter"===this.site.host)document.querySelector('button[data-testid="app-bar-back"][role="button"]').addEventListener("click",this.stopTranslationBound);this.video&&!this.video.paused&&this.lipSync("play");for(const t of Xe)this.video.addEventListener(t,this.handleVideoEventBound);this.transformBtn("success",Xt.get("disableTranslate")),this.afterUpdateTranslation(t)}async translateFunc(t,e,o,n,i){console.log("[VOT] Video Data: ",this.videoData);let r=`${this.site.url}${t}`;if(i?.url&&(r=i.url,i=null),Et.log("Run videoValidator"),this.videoValidator(),e){let e=await this.translateStreamImpl(r,t,o,n);if(!e)return void Et.log("Skip translation");this.transformBtn("success",Xt.get("disableTranslate"));const i=`https://${this.data.m3u8ProxyHost}/?all=yes&origin=${encodeURIComponent("https://strm.yandex.ru")}&referer=${encodeURIComponent("https://strm.yandex.ru")}&url=${encodeURIComponent(e.result.url)}`;if(this.hls)this.hls.on(Hls.Events.MEDIA_ATTACHED,(function(){Et.log("audio and hls.js are now bound together !")})),this.hls.on(Hls.Events.MANIFEST_PARSED,(function(t){Et.log("manifest loaded, found "+t?.levels?.length+" quality level")})),this.hls.loadSource(i),this.hls.attachMedia(this.audio),this.hls.on(Hls.Events.ERROR,(function(t){if(t.fatal)switch(t.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),this.hls.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",t);break;default:this.hls.destroy()}})),Et.log(this.hls);else{if(!this.audio.canPlayType("application/vnd.apple.mpegurl"))throw new ye("audioFormatNotSupported");this.audio.src=i}if("youtube"===this.site.host&&Ft.videoSeek(this.video,10),this.volumeOnStart=this.getVideoVolume(),"number"==typeof this.data.defaultVolume&&(this.gainNode.gain.value=this.data.defaultVolume/100),"number"==typeof this.data.autoSetVolumeYandexStyle&&this.data.autoSetVolumeYandexStyle&&this.setVideoVolume(this.data.autoVolume),!this.video.src&&!this.video.currentSrc&&!this.video.srcObject)return this.stopTranslation();this.video&&!this.video.paused&&this.lipSync("play");for(const t of Xe)this.video.addEventListener(t,this.handleVideoEventBound);return this.afterUpdateTranslation(i)}if(["udemy","coursera"].includes(this.site.host)&&!i)throw new ye("VOTTranslationHelpNull");const a=this.videoTranslations.find((e=>e.videoId===t&&e.expires>Date.now()/1e3&&e.from===o&&e.to===n));if(a)return this.updateTranslation(a.url),void Et.log("[translateFunc] Cached translation was received");let s=await this.translateVideoImpl(r,t,this.videoData.duration,o,n,i);s?(this.updateTranslation(s.url),this.subtitlesList.some((t=>"yandex"===t.source&&t.translatedFromLanguage===this.videoData.detectedLanguage&&t.language===this.videoData.responseLanguage))||(this.subtitlesList=await Le(this.votClient,this.site,this.videoData.videoId,this.videoData.detectedLanguage),await this.updateSubtitlesLangSelect()),this.videoTranslations.push({videoId:t,from:o,to:n,url:s.url,expires:Date.now()/1e3+this.videoTranslationTTL})):Et.log("Skip translation")}stopTranslation(){this.stopTranslate(),this.syncVideoVolumeSlider()}async handleSrcChanged(){Et.log("[VideoHandler] src changed",this),this.firstPlay=!0,this.videoData=await this.getVideoData(),this.setSelectMenuValues(this.videoData.detectedLanguage,this.videoData.responseLanguage);const t=!this.video.src&&!this.video.currentSrc&&!this.video.srcObject;this.votButton.container.hidden=t,t&&(this.votMenu.container.hidden=t),this.site.selector||(this.container=this.video.parentElement),this.container.contains(this.votButton.container)||(this.container.appendChild(this.votButton.container),this.container.appendChild(this.votMenu.container)),await this.updateSubtitles(),await this.changeSubtitlesLang("disabled"),this.translateToLang=this.data.responseLanguage??"ru"}async release(){Et.log("[VideoHandler] release"),this.initialized=!1,this.releaseExtraEvents(),this.subtitlesWidget.release(),this.votButton.container.remove(),this.votMenu.container.remove()}}const oo=new class{constructor(){this.videoCache=new Set,this.onVideoAdded=new Ge,this.onVideoRemoved=new Ge,this.observer=new MutationObserver((t=>{window.requestIdleCallback((()=>{for(let e=0;e<t.length;e++){const o=t[e];if("childList"!==o.type)continue;const n=Ye(o.addedNodes);for(let t=0;t<n.length;t++)this.checkAndHandleVideo(n[t]);const i=Ye(o.removedNodes);for(let t=0;t<i.length;t++)this.handleVideoRemoved(i[t])}}),{timeout:1e3})})),this.intersectionObserver=new IntersectionObserver((t=>{for(let e=0;e<t.length;e++){const o=t[e];o.isIntersecting&&this.handleIntersectingVideo(o.target)}}),{threshold:.1})}enable(){this.observer.observe(document,{childList:!0,subtree:!0});const t=document.querySelectorAll("video");for(let e=0;e<t.length;e++)this.checkAndHandleVideo(t[e])}disable(){this.observer.disconnect(),this.intersectionObserver.disconnect()}checkAndHandleVideo(t){this.videoCache.has(t)||(this.videoCache.add(t),this.intersectionObserver.observe(t))}handleIntersectingVideo(t){this.intersectionObserver.unobserve(t),function(t){if(Ze.test(t.className)||Ze.test(t.title))return!0;let e=t.parentElement;for(;e;){if(Ze.test(e.className)||Ze.test(e.id))return!0;e=e.parentElement}return!1}(t)?Et.log("The promotional video was ignored",t):function(t,e){!function o(){!function(t){return t.readyState>=3}(t)?requestAnimationFrame(o):e(t)}()}(t,(t=>{this.handleVideoAdded(t)}))}handleVideoAdded=t=>{this.onVideoAdded.dispatch(t)};handleVideoRemoved=t=>{document.contains(t)||(this.videoCache.delete(t),this.onVideoRemoved.dispatch(t))}},no=new WeakMap;function io(t,e){if(t.shadowRoot){let o=t.selector?Array.from(document.querySelectorAll(t.selector)).find((t=>t.shadowRoot.contains(e))):e.parentElement;return o&&o.shadowRoot?o.parentElement:o}{const o=Je.browser.version.split(".")[0];if(t.selector?.includes(":not")&&t.selector?.includes("*")&&o&&("Chrome"===Je.browser.name&&Number(o)<88||"Firefox"===Je.browser.name&&Number(o)<84)){const o=t.selector.split(" *")[0];return o?Array.from(document.querySelectorAll(o)).find((t=>t.contains(e))):e.parentElement}return t.selector?Array.from(document.querySelectorAll(t.selector)).find((t=>t.contains(e))):e.parentElement}}(async function(){if(Et.log("Loading extension..."),await Xt.update(),Et.log(`Selected menu language: ${Xt.lang}`),GM_info?.scriptHandler&&_t.includes(GM_info.scriptHandler))return console.error(`[VOT] ${Xt.getDefault("unSupportedExtensionError").replace("{0}",GM_info.scriptHandler)}`),alert(`[VOT] ${Xt.get("unSupportedExtensionError").replace("{0}",GM_info.scriptHandler)}`);Et.log("Extension compatibility passed..."),oo.onVideoAdded.addListener((t=>{for(const e of function(){const t=window.location.hostname,e=new URL(window.location),o=o=>o instanceof RegExp?o.test(t):"string"==typeof o?t.includes(o):"function"==typeof o&&o(e);return We.filter((t=>(Array.isArray(t.match)?t.match.some(o):o(t.match))&&t.host&&t.url))}()){if(!e)continue;let o=io(e,t);if(o&&(("rumble"!==e.host||t.style.display)&&(["peertube","directlink"].includes(e.host)&&(e.url=window.location.origin),!no.has(t)))){no.set(t,new eo(t,o,e));break}}})),oo.onVideoRemoved.addListener((async t=>{no.has(t)&&(await no.get(t).release(),no.delete(t))})),oo.enable()})().catch((t=>{console.error("[VOT]",t)}))})()})();